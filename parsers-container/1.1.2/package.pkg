KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KICAgIHJldHVybiB7DQogICAgICAgIG5hbWU6ICJpbmNsdWRlZFBhcnNlcnMiLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBkYXRhOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiUmVhZE5vdmVsRnVsbCIsDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgImRlYnVnT25seSI6IGZhbHNlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICJmaWxlIjogIk1hbmdhbkVsbyIsDQogICAgICAgICAgICAgICAgImRlYnVnT25seSI6IGZhbHNlDQogICAgICAgICAgICB9LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICJmaWxlIjogIlRocmVlIE1hbmdhIiwNCiAgICAgICAgICAgICAgICAiZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWwtU3QiLA0KICAgICAgICAgICAgICAgICJkZWJ1Z09ubHkiOiBmYWxzZQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HsNCiAgICAgICAgICAgICAgICAiZmlsZSI6ICJOb3ZlbEZ1bGwiLA0KICAgICAgICAgICAgICAgICJkZWJ1Z09ubHkiOiBmYWxzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Q0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAiZmlsZSI6ICJOb3ZlbC04WCIsDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgImRlYnVnT25seSI6IGZhbHNlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICJmaWxlIjogIkJveE5vdmVsIiwNCiAgICAgICAgICAgICAgICAiZGVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiUmJlc05ldCIsDQogICAgICAgICAgICAgICAgImRlYnVnTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU025seSI6IGZhbHNlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICJmaWxlIjogIlctTVRMIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwNCiAgICAgICAgICAgICAgICAiZGVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgImZpbGUiOiAiQWxsTm92ZWwiLA0KICAgICAgICAgICAgICAgICJkZWJ1Z09ubHkiOiBmYWxzZQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAiZmlsZSI6ICJDb21yYWRlbWFvIiwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAiZGVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUiOiAiTGlnaHROb3ZlbFB1YiIsDQogICAgICAgICAgICAgICAgImRlYnVnT25seSI6IHRydWUNCiAgICAgICAgICAgIH0sDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiTm92ZWxPbmxpbmVGdWxsIiwNCiAgICAgICAgICAgICAgICAiZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVhZExpZ2h0Tm92ZWwiLA0KICAgICAgICAgICAgICAgICJkZWJ1Z09ubHkiOiB0cnVlDQogICAgICAgICAgICB9LA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgew0KICAgICAgICAgICAgICAgICJmaWxlIjogIlJveWFsUm9hZCIsDQogICAgICAgICAgICAgICAgImRlYnVnT25seSI6IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICJmaWxlIjogIk5vdmVsSGFsbCIsDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgImRlYnVnT25seSI6IGZhbHNlDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICJmaWxlIjogIlNjcmliYmxlSHViIiwNCiAgICAgICAgICAgICAgICAiZGVidWdPbmx5IjogZmFsc2UNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiWmluTm92ZWwiLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICJkZWJ1Z09ubHkiOiBmYWxzZQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAiZmlsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SI6ICJUYXBSZWFkIiwNCiAgICAgICAgICAgICAgICAiZGVidWdPbmx5IjogZmFsc2UNCiAgICAgICAgICAgIH0sDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB7DQogICAgICAgICAgICAgICAgImZpbGUiOiAiTXRsTm92ZWwiLA0KICAgICAgICAgICAgICAgICJkZWJ1Z09ubHkiOiB0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVlDQogICAgICAgICAgICB9DQogICAgICAgIF0NCiAgICB9DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmlkID0gIjEuMzY1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFuZ2EiOw0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTWFuYWdhOw0KICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlckxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gIjM2NU1hbmdhIjsNCiAgICAgICAgdGhpcy5kaXNwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF5TmFtZSA9ICJUaHJlZSBNYW5nYSI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gImh0dHBzOi8vMzY1bWFuZ2EuY29tL3dwLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFkbWluL2FkbWluLWFqYXgucGhwIjsNCiAgICAgICAgdGhpcy51cmwgPSAiaHR0cHM6Ly8zNjVtYW5nYS5jb20iOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLnNlYXJjaFVybCA9ICJodHRwczovLzM2NW1hbmdhLmNvbS93cC1hZG1pbi9hZG1pbi1hamF4LnBocCI7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMucGFuaW5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaXMuc2VhcmNoUGFnaW5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuaWNvbiA9ICJodHRwczovLzM2NW1hbmdhLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxOS8wOS9jcm9wcGVkLWZhdmljb24tMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zJ4MzIucG5nIjsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aW5ncygpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLm11bHRpU2VsZWN0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5wYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUm9tYW5jZSIsICJyb21hbmNlIiksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkRyYW1hIiwgImRyYW1hIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoIlNjaG9vbCBMaWZlIiwgInNjaG9vbC1saWZlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFjdGlvbiIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJhY3Rpb24iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQ29tZWR5IiwgImNvbWVkeSIpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb21pYyIsICJjb21pYyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZlbnR1cmUiLCAiYWR2ZW50dXJlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFuaW1lIiwgImFuaW1lIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkxpdmUgYWN0aW9uIiwgImxpdmUtYWN0aW9uIiksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIlBzeWNob2xvZ2ljYWwiLCAicHN5Y2hvbG9naWNhbCIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJTY2ktZmkiLCAic2NpLWZpIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkZhbnRhc3kiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiZmFudGFzeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIaXN0b3JpY2FsIiwgImhpc3RvcmljYWwiKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiSG9ycm9yIiwgImhvcnJvciIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCJNYW5nYSIsICJtYW5nYSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNYW5odWEiLCAibWFuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVhIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk1hbmh3YSIsICJtYW5od2EiKSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBuZXcgbGFiZWxWYWx1ZSgiTWFydGlhbCBBcnRzIiwgIm1hcnRpYWwtYXJ0cyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCJNeXN0ZXJ5IiwgIm15c3RlcnkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2xpY2Ugb2YgTGlmZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIsICJzbGljZS1vZi1saWZlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlRyYWdlZHkiLCAidHJhZ2VkeSIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJXZWJ0b29ucyIsICJ3ZWJ0b29ucyIpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCJTcG9ydHMiLCAic3BvcnRzIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkNvb2tpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mciLCAiY29va2luZyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBZHVsdCIsICJhZHVsdCIpLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJjYXJ0b29uIiwgIkNhcnRvb24iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgiRGVtb25zIiwgImRlbW9ucyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJEZXRlY3RpdmUiLCAiZGV0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aXZlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkRvdWppbnNoaSIsICJkb3VqaW5zaGkiKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRWNjaGkiLCAiZWNjaGkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgiRmFudGFzeSIsICJmYW50YXN5IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkZ1bGwtQ29sb3IiLCAiZnVsbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C1jb2xvciIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJHYW1lIiwgImdhbWUiKSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBuZXcgbGFiZWxWYWx1ZSgiR2VuZGVyLUJlbmRlciIsICJnZW5kZXItYmVuZGVyIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoIkhhcmVtIiwgImhhcmVtIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhpc3RvcmljYWwiLCAiaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzdG9yaWNhbCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJJc2VrYWkiLCAiaXNla2FpIiksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkpvc2VpIiwgImpvc2VpIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kxvbmctU3RyaXAiLCAibG9uZy1zdHJpcCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNYWdpYyIsICJtYWdpYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNYXR1cmUiLCAibWF0dXJlIiksDQogICAgICAgICAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV3IGxhYmVsVmFsdWUoIk1lY2hhIiwgIm1lY2hhIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk11c2ljIiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m11c2ljIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk9mZmljZS1Xb3JrZXJzIiwgIm9mZmljZS13b3JrZXJzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk9mZmljaWFsLUNvbG9yZWQiLCAib2ZmaWNpYWwtY29sb3JlZCIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJPbmUtU2hvdCIsICJvbmUtc2hvdCIpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCJSZWluY2FybmF0aW9uIiwgInJlaW5jYXJuYXRpb24iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxWYWx1ZSgiUmV2ZXJzZSIsICJyZXZlcnNlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlJldmVyc2UtSGFyZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W0iLCAicmV2ZXJzZS1oYXJlbSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTZWluZW4iLCAic2VpbmVuIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNob3VqbyIsICJzaG91am8iKSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiU2hvdWpvLUFpIiwgInNob3Vqby1haSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTaG91bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVuIiwgInNob3VuZW4iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgic2hvdW5lbi1haSIsICJTaG91bmVuLUFpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNvZnQtWWFvaSIsICJzb2Z0LXlhb2kiKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiU29mdC1ZdXJpIiwgInNvZnQteXVyaSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJTdXBlci1Qb3dlciIsICJzdXBlci1wb3dlciIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTdXBlcm5hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVyYWwiLCAic3VwZXJuYXR1cmFsIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlN1cnZpdmFsIiwgInN1cnZpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlRocmlsbGVyIiwgInRocmlsbGVyIiksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIlRpbWUtVHJhdmVsIiwgInRpbWUtdHJhdmVsIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoIlZpbGxhaW5lc3MiLCAidmlsbGFpbmVzcyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJXZWItQMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029taWMiLCAid2ViLWNvbWljIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIllhb2kiLCAieWFvaSIpLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJZdXJpIiwgInl1cmkiKQ0KDQogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5zdGF0dXNlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb21wbGV0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WQiLCAiZW5kIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk9uZ29pbmciLCAib24tZ29pbmciKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgXQ0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJDbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVhbmVyIik7DQoNCiAgICB9DQoNCiAgICBQYXJzZXIucHJvdG90eXBlID0gew0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024gKGtleXMpIHsNCiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN0IiwgIkxhdGVzdCBVcGRhdGUiLCAiTGF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInJvbWFuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UiLCAiUm9tYW5jZSIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcihbInJvbWFuY2UiXSkpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBTZWN0aW9uKCJoYXJlbSIsICJIYXJlbSIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcihbImhhcmVtIl0pKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgU2VjdGlvbigiY29tcGxldGVkIiwgIkNvbXBsZXRlZCIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAiZW5kIikpLA0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QocGFnZSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZmlsdGVyID0gbmV3IEZpbHRlcigpOw0KICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuIGZpbHRlcjsNCiAgICAgICAgfSwNCiAgICAgICAgLy9odHRwczovLzM2NW1hbmdhLmNvbS8/cz0mcG9zdF90eXBlPXdwLW1hbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdhJmdlbnJlJTVCJTVEPWFjdGlvbiZnZW5yZSU1QiU1RD1hZGFwdGF0aW9uJm9wPSZhdXRob3I9JmFydGlzdD0mcmVsZWFzZT0mYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WR1bHQ9JnN0YXR1cyU1QiU1RD1lbmQmc3RhdHVzJTVCJTVEPW9uLWdvaW5nDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgICAgY29uc3QgZm9ybSA9IHsNCiAgICAgICAgICAgICAgICBhY3Rpb246ICJtYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WRhcmFfbG9hZF9tb3JlIiwNCiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlIC0gMSwNCiAgICAgICAgICAgICAgICB0ZW1wbGF0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TogIm1hZGFyYS1jb3JlL2NvbnRlbnQvY29udGVudC1zZWFyY2giLA0KICAgICAgICAgICAgICAgICJ2YXJzW3NdIjogIWZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5nZW5yZXMgfHwgZmlsdGVyLmdlbnJlcy5sZW5ndGggPD0gMCA/IGZpbHRlci50aXRsZSA6ICIiLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJ2YXJzW29yZGVyYnldIjogIiIsDQogICAgICAgICAgICAgICAgInZhcnNbcGFnZWRdIjogMSwNCiAgICAgICAgICAgICAgICAidMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFyc1twb3N0c19wZXJfcGFnZV0iOiAyMCwNCiAgICAgICAgICAgICAgICAidmFyc1t0ZW1wbGF0ZV0iOiAic2VhcmNoIiwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAidmFyc1ttZXRhX3F1ZXJ5XVswXVswXVtrZXldIjogIl93cF9tYW5nYV9zdGF0dXMiLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICJ2YXJzW21ldGFfcXVlcnldWzBdWzBdW2NvbXBhcmVdIjogIklOIiwNCiAgICAgICAgICAgICAgICAidmFyc1ttZXRhXMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03F1ZXJ5XVswXVtyZWxhdGlvbl0iOiAiQU5EIiwNCiAgICAgICAgICAgICAgICAidmFyc1ttZXRhX3F1ZXJ5XVtyZWxhdGlvbl0iOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAiT1IiLA0KICAgICAgICAgICAgICAgICJ2YXJzW3RheF9xdWVyeV1bcmVsYXRpb25dIjogIk9SIiwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAidmFyc1twb3N0X3R5cGVdIjogIndwLW1hbmdhIiwNCiAgICAgICAgICAgICAgICAidmFyc1twb3N0X3N0YXR1c10iOiAicHVibMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzaCIsDQogICAgICAgICAgICAgICAgInZhcnNbbWFuZ2FfYXJjaGl2ZXNfaXRlbV9sYXlvdXRdIjogImRlZmF1bHQiDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzICYmIGZpbHRlci5nZW5yZXMubGVuZ3RoID4gMCkgew0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGZvcm1bInZhcnNbdGF4X3F1ZXJ5XVswXVtmaWVsZF0iXSA9ICJuYW1lIjsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBmb3JtWyJ2YXJzW3RheF9xdWVyeV1bMF1bdGVybXNdW10iXSA9IGZpbHRlci5nZW5yZXMubGFzdCgpOw0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGZvcm1bInZhcnNbdGF4X3F1ZXJ5XVswXVt0YXhvbm9teV0iXSA9ICJ3cC1tYW5nYS1nZW5yZSI7DQogICAgICAgICAgICB9DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuYWN0aXZlKSB7DQogICAgICAgICAgICAgICAgZm9ybVsidmFyc1ttZXRhX3F1ZXJ5XMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0VswXVswXVt2YWx1ZV1bXSJdID0gZmlsdGVyLmFjdGl2ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIGNvbnRhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkucG9zdEZvcm0odGhpcy5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hVcmwsIGZvcm0pKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ccucm93JykuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoeC5zZWxlY3QoJy50YWItdGh1bWIgaW1nJykuYXR0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0igic3JjIikuaGFzVmFsdWUoKSkNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goDQogICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCIudGFiLXRodW1iIGltZyIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mF0dHIoInNyYyIpLnRleHQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiLnBvc3QtdGl0bGUgYSIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Hguc2VsZWN0KCIucG9zdC10aXRsZSBhIikuYXR0cigiaHJlZiIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0pOw0KDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KDQogICAgICAgIGdldE5vdmVsOiBhc3luYyBmdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCg0KICAgICAgICAgICAgdmFyIGl0ZW0gPSBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgTm92ZWxSZXZpZXdzKCk7DQogICAgICAgICAgICB2YXIgdGJJbmZvID0gY29udGFpbmVyLmZpbmQoIi5wcm9maWxlLW1hbmdhIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C50YWItc3VtbWFyeSIpDQogICAgICAgICAgICBpdGVtLmdlbnJlcyA9IHRiSW5mby5maW5kKCIuZ2VucmVzLWNvbnRlbnQgYSIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m1hcCh4ID0+IHgudGV4dChmYWxzZSkpOw0KICAgICAgICAgICAgaXRlbS5kZXNjcmlwdGlvbiA9IGNvbnRhaW5lci5zZWxlY3QoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5zdW1tYXJ5X19jb250ZW50IikudGV4dChmYWxzZSkNCg0KICAgICAgICAgICAgaXRlbS51dm90ZXMgPSBjb250YWluZXIuc2VsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0KCIucG9zdC1jb250ZW50IC52b3RlLWRldGFpbHMiKS5yZW1vdmUoIi5yYXRlLXRpdGxlLCAuc3VtbWFyeS1oZWFkaW5nIikudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV4dChmYWxzZSkucmVtb3ZlTmV3TGluZSgiICIpOw0KICAgICAgICAgICAgaXRlbS5hbHRlcm5hdGl2ZU5hbWVzID0gdGJJbmZvLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlbGVjdCgiLnBvc3QtY29udGVudD4gZGl2IikuZXEoNCkucmVtb3ZlKCIuc3VtbWFyeS1oZWFkaW5nIikudGV4dChmYWxzZSkNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIGl0ZW0uYXV0aG9yID0gdGJJbmZvLnNlbGVjdCgiLmF1dGhvci1jb250ZW50IikudGV4dChmYWxzZSk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBpdGVtLmxhbmcgPSAiIjsNCg0KICAgICAgICAgICAgaXRlbS5jb21wbGV0ZWQgPSAiU3RhdHVzOiIgKyB0YkluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m8uZmluZCgiLnBvc3Qtc3RhdHVzID4gLnBvc3QtY29udGVudF9pdGVtIikuZXEoMSkuc2VsZWN0KCIuc3VtbWFyeS1jb250ZW50IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikudGV4dChmYWxzZSkucmVtb3ZlTmV3TGluZSgiICIpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gY29udGFpbmVyLmZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mQoIi5saXN0aW5nLWNoYXB0ZXJzX3dyYXAgdWwgbGkgPiBhIikubWFwKHggPT4gbmV3IENoYXB0ZXIoeC50ZXh0KGZhbHNlKSwgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5hdHRyKCJocmVmIikudXJsKCkpKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWxpSXRlbSgNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBjb250YWluZXIuc2VsZWN0KCcuc3VtbWFyeV9pbWFnZSBpbWcnKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBjb250YWluZXIuc2VsZWN0KCcucG9zdC10aXRsZScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGl0ZW0uZGVzY3JpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpb24sDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgICAgICAgICAgICAgY2hhcHRlcnMucmV2ZXJzZSgpLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIGl0ZW0sDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2hhcHRlcjogYXN5bmMgZnVuY3Rpb24gKHVybCkgew0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRtbCh1cmwpKS5maW5kKCIuZW50cnktY29udGVudCAucmVhZGluZy1jb250ZW50IC5wYWdlLWJyZWFrIGltZyIpLm1hcCh4ID0+IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HguYXR0cigic3JjIikudXJsKCkpLmZpbHRlcih4ID0+IHggJiYgeCAhPSAiIik7DQogICAgICAgIH0sDQoNCiAgICAgICAgbGF0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN0OiBhc3luYyBmdW5jdGlvbiAocGFnZSkgew0KICAgICAgICAgICAgY29uc3QgZm9ybSA9IHsNCiAgICAgICAgICAgICAgICBhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb246ICJtYWRhcmFfbG9hZF9tb3JlIiwNCiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlIC0gMSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0ZW1wbGF0ZTogIm1hZGFyYS1jb3JlL2NvbnRlbnQvY29udGVudC1hcmNoaXZlIiwNCiAgICAgICAgICAgICAgICAidmFyc1tvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mRlcmJ5XSI6ICJtZXRhX3ZhbHVlX251bSIsDQogICAgICAgICAgICAgICAgInZhcnNbcGFnZWRdIjogMSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAidmFyc1twb3N0c19wZXJfcGFnZV0iOiAyMCwNCiAgICAgICAgICAgICAgICAidmFyc1t0YXhfcXVlcnldW3JlbGF0aW9uXMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SI6ICJPUiIsDQogICAgICAgICAgICAgICAgInZhcnNbbWV0YV9xdWVyeV1bMF1bcmVsYXRpb25dIjogIkFORCIsDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgInZhcnNbbWV0YV9xdWVyeV1bcmVsYXRpb25dIjogIk9SIiwNCiAgICAgICAgICAgICAgICAidmFyc1twb3N0X3R5cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVdIjogIndwLW1hbmdhIiwNCiAgICAgICAgICAgICAgICAidmFyc1twb3N0X3N0YXR1c10iOiAicHVibGlzaCIsDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgInZhcnNbbWV0YV9rZXldIjogIl9sYXRlc3RfdXBkYXRlIiwNCiAgICAgICAgICAgICAgICAidmFyc1tvcmRlcl0iOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAiZGVzYyIsDQogICAgICAgICAgICAgICAgInZhcnNbc2lkZWJhcl0iOiAicmlnaHQiLA0KICAgICAgICAgICAgICAgICJ2YXJzWMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU021hbmdhX2FyY2hpdmVzX2l0ZW1fbGF5b3V0XSI6ICJzbWFsbF90aHVtYm5haWwiDQogICAgICAgICAgICB9DQoNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLnBvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03RGb3JtKHRoaXMubGF0ZXN0VXJsLCBmb3JtKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0250YWluZXIuZmluZCgnLnBhZ2UtbGlzdGluZy1pdGVtJykuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoeC5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoJy5pdGVtLXRodW1iIGltZycpLmF0dHIoInNyYyIpLmhhc1ZhbHVlKCkpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExpZ2h0SXRlbSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB4LnNlbGVjdCgiLml0ZW0tdGh1bWIgaW1nIikuYXR0cigic3JjIikudGV4dCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHguc2VsZWN0KCIucG9zdC10aXRsZSBhIikudGV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoIi5wb3N0LXRpdGxlIGEiKS5hdHRyKCJocmVmIikudXJsKCksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICB9DQoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KfQ==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQogICAgICAgIHRoaXMuaWQgPSAiMS5hbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Gxub3ZlbCI7DQogICAgICAgIHRoaXMuZGV0YWxpSXRlbVR5cGUgPSBEZXRhbGlJdGVtVHlwZS5Ob3ZlbDsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYXJzZXJMYW5ndWFnZSA9ICJlbiI7DQogICAgICAgIHRoaXMubmFtZSA9ICdBbGxOb3ZlbCc7DQogICAgICAgIHRoaXMuZGlzcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxheU5hbWUgPSB0aGlzLm5hbWU7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vYWxsbm92ZWwubmV0Lyc7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vYWxsbm92ZWwubmV0Lyc7DQogICAgICAgIHRoaXMuc2VhcmNoVXJsID0gJ2h0dHBzOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i8vYWxsbm92ZWwubmV0L3NlYXJjaC5waHA/a2V5d29yZD17cX0nOw0KICAgICAgICB0aGlzLnBhbmluYXRpb24gPSBmYWxzZTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5pY29uID0gJ2h0dHBzOi8vYWxsbm92ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WwubmV0L21lZGlhL2Zhdmljb24ucG5nJzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJSb21hbmNlIiwgInJvbWFuY2UuaHRtbD9wYWdlPXtwfSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZlbnR1cmUiLCAiYWR2ZW50dXJlLmh0bWw/cGFnZT17cH0iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiVGhyaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxsZXIiLCAidGhyaWxsZXIuaHRtbD9wYWdlPXtwfSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJGYW50YXN5IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgImZhbnRhc3kuaHRtbD9wYWdlPXtwfSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJZb3VuZyBBZHVsdCIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJ5b3VuZy1hZHVsdC5odG1sP3BhZ2U9e3B9IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk15c3RlcnkiLCAibMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XlzdGVyeS5odG1sP3BhZ2U9e3B9IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhpc3RvcmljYWwiLCAiaGlzdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9yaWNhbC5odG1sP3BhZ2U9e3B9IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhvcnJvciIsICJob3Jyb3IuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRtbD9wYWdlPXtwfSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTY2llbmNlIEZpY3Rpb24iLCAic2NpZW5jZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S1maWN0aW9uLmh0bWw/cGFnZT17cH0iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiSHVtb3JvdXMiLCAiaHVtbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JvdXMuaHRtbD9wYWdlPXtwfSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDaHJpc3RpYW4iLCAiY2hyaXN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFuLmh0bWw/cGFnZT17cH0iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiV2VzdGVybiIsICJ3ZXN0ZXJuLmh0bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ww/cGFnZT17cH0iKQ0KICAgICAgICAgICAgXQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuY2xlYW5lciA9IHBsdWdpbnMuZmluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQogICAgICAgIGdldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb25zOiBmdW5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBTZWN0aW9uKCJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgU2VjdGlvbigicm9tYW5jZSIsICJSb21hbmNlIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsicm9tYW5jZS5odG1sPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03BhZ2U9e3B9Il0pKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigieW91bmctYWR1bHQiLCAiWW91bmcgQWR1bHQiLCAiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIoWyJ5b3VuZy1hZHVsdC5odG1sP3BhZ2U9e3B9Il0pKSwNCiAgICAgICAgICAgIF0NCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICAgICAgcmV0dXJuIHNlY3Rpb25zLmZpbHRlcih4ID0+ICFrZXlzIHx8IGtleXMuaW5jbHVkZXMoeC5uYW1lKSk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIH0sDQoNCiAgICAgICAgdHJhbnNsYXRlU2VjdGlvbjogYXN5bmMgZnVuY3Rpb24gKHNlY3Rpb24sIHBhZ2UpIHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIGlmIChzZWN0aW9uLmlkZW50aWZpZXIgPT0gIkxhdGVzdCIpDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wl0IHRoaXMubGF0ZXN0KHBhZ2UpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlYXJjaChzZWN0aW9uLmZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXIoKSwgcGFnZSk7DQogICAgICAgIH0sDQoNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgZGVmYXVsdEZpbHRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHJldHVybiBmaWx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLCBwYWdlKSB7DQogICAgICAgICAgICBpZiAoIWZpbHRlci50aXRsZSkNCiAgICAgICAgICAgICAgICBmaWx0ZXIudGl0bGUgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAiIjsNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzLmxlbmd0aCA8PSAwICYmIGZpbHRlci50aXRsZSA9PSAiIikNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICB2YXIgdXJsID0gZmlsdGVyLmdlbnJlcy5sZW5ndGggPiAwID8gZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyLmdlbnJlc1swXS50b1N0cmluZygpLnVyaSh0aGlzLnVybCkucmVwbGFjZSgie3B9IiwgcGFnZSkgOiB0aGlzLnNlYXJjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FVybC5yZXBsYWNlKCJ7cX0iLCBmaWx0ZXIudGl0bGUpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSkuZmluZCgiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mxpc3Qtbm92ZWwgYSIpLmZvckVhY2goeCA9PiB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpZ2h0SXRlbSgNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoImltZyIpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB4LnNlbGVjdCgiLnRpdGxlLWhvbWUtbm92ZWwiKS50ZXh0KCksDQogICAgICAgICAgICAgICAgICAgICIiLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB4LmF0dHIoImhyZWYiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lKSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mMgZnVuY3Rpb24gKG5vdmVsVXJsKSB7DQoNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgICAgIHZhciBjaGFwdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVycyA9IGNvbnRhaW5lci5maW5kKCIubGlzdC1wYWdlLW5vdmVsIGEiKS5tYXAoeCA9PiBuZXcgQ2hhcHRlcih4LnRleHQoZmFscMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UpLCB4LmF0dHIoImhyZWYiKS51cmwoKSkpOw0KICAgICAgICAgICAgdmFyIG5vdmVsUmV2aWV3cyA9IG5ldyBOb3ZlbFJldmlldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03MoKTsNCiAgICAgICAgICAgIHZhciBpbmZvID0gY29udGFpbmVyLmZpbmQoIi5saXN0LWluZm8iKTsNCiAgICAgICAgICAgIG5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsUmV2aWV3cy5nZW5yZXMgPSBpbmZvLmVxKDEpLmZpbmQoImEiKS50ZXh0QXJyYXkoKTsNCiAgICAgICAgICAgIG5vdmVsUmV2aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WV3cy5hdXRob3IgPSBpbmZvLmVxKDApLnNlbGVjdCgiYSIpLnRleHQoZmFsc2UpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nV2b3RlcyA9IGluZm8uZXEoMikuc2VsZWN0KCJzcGFuIikuaGFzRWxlbWVudCgpID8gaW5mby5lcSgyKS5zZWxlY3QoInNwYW4iKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S50ZXh0KGZhbHNlKSArICIgVmlld3MiIDogIiI7DQogICAgICAgICAgICByZXR1cm4gbmV3IERldGFsaUl0ZW0oDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgY29udGFpbmVyLnNlbGVjdCgiLnJvdyBpbWciKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICBjbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0250YWluZXIuc2VsZWN0KCIuZGV0YWlsLW5vdmVsIGgxIikudGV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgY29udGFpbmVyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlbGVjdCgiLmRlcy1ub3ZlbCIpLmNsZWFuSW5uZXJIVE1MKCksDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgY2hhcHRlcnMsDQogICAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIHRoaXMubmFtZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICB1bmRlZmluZWQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XB0ZXI6IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYW5DaGFwdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKS5zZWxlY3QoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5jb250ZW50X25vdmVsIiksIHRoaXMubmFtZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgbGF0ZXN0OiBhc3luYyBmdW5jdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAocGFnZSkgew0KICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMubGF0ZXN0VXJsLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mcoKSk7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WVudCgpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mluZCgiLmxpc3Qtbm92ZWwgYSIpLmZvckVhY2goeCA9PiB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpZ2h0SMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRlbSgNCiAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoImltZyIpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB4LnNlbGVjdCgiLnRpdGxlLWhvbWUtbm92ZWwiKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgICAgIiIsDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgIHguYXR0cigiaHJlZiIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIG5ldyBQYXJzZXIoKTsNCn07&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmlkID0gIjEuYm94bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWwiOw0KICAgICAgICB0aGlzLnBhcnNlckxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ0JveE5vdmVsJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHRoaXMubmFtZTsNCiAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL2JveG5vdmVsLmNvbS9wYWdlL3twfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sc7DQogICAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vYm94bm92ZWwuY29tJzsNCiAgICAgICAgdGhpcy5zZWFyY2hVcmwgPSAnJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zsNCiAgICAgICAgdGhpcy5wYW5pbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gdHJ1ZTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgdGhpcy5pY29uID0gJ2h0dHBzOi8vYm94bm92ZWwuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE4LzA0L2JveC1pYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029uLTE1MHgxNTAucG5nJzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uOiB0cnVlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KDQoNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5zb3J0VHlwZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFscMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTGF0ZXN0IFJlbGVhc2UgTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWwnLCAnbGF0ZXN0JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1JlbGV2YW5jZScsICcnKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUmF0aW5nJywgJ3JhdGluZycpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCdUcmVuZGluZycsICd0cmVuZGluZycpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNb3N0IFZpZXdzJywgJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZpZXdzJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ05ldycsICduZXctbWFuZ2EnKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0F0sDQogICAgICAgIH07DQoNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJDbGVhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyIik7DQogICAgfQ0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgICAgICAgbG9hZFNldHRpbmdzOiBhc3luYyBmdW5jdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbiAoKSB7DQogICAgICAgICAgICBpZiAodGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMudmFsdWVzLmxlbmd0aCA+IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DApDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRIdG1sKCJodHRwczovL2JveG5vdmVsLmNvbS8/cz0mcG9zdF90eXBlPXdwLW1hbmdhIikudGhlbihodG1sID0+IHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoaHRtbCk7DQogICAgICAgICAgICAgICAgY29udGFpbmVyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZpbmQoIi5jaGVja2JveC1ncm91cCAuY2hlY2tib3giKS5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcy52YWx1ZXMucHVzaChuZXcgbGFiZWxWYWx1ZSh4LnNlbGVjdCgibGFiZWwiKS50ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Xh0KCksIHguc2VsZWN0KCJpbnB1dCIpLmF0dHIoInZhbHVlIikudGV4dCgpKSk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIH0pDQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgc2VjdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kxhdGVzdCIsIHRydWUpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJuZXciLCAiTmV3IE5vdmVscyIsICJTZWFyY2giLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsICJuZXctbWFuZ2EiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0k1vc3QgVmlld3MiLCAiTW9zdCBWaWV3cyIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsICJ2aWV3cyIpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgIF0NCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLmluYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02x1ZGVzKHgubmFtZSkpOw0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zbGF0ZVNlY3Rpb246IGFzeW5jIGZ1bmN0aW9uIChzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uLCBwYWdlKSB7DQogICAgICAgICAgICBpZiAoc2VjdGlvbi5pZGVudGlmaWVyID09ICJMYXRlc3QiKSByZXR1cm4gYXdhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XQgdGhpcy5sYXRlc3QocGFnZSk7DQogICAgICAgICAgICBlbHNlIHJldHVybiBhd2FpdCB0aGlzLnNlYXJjaChzZWN0aW9uLmZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXIoKSwgcGFnZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZGVmYXVsdEZpbHRlcjogZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBmaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YXIgdXJsID0gYGh0dHBzOi8vYm94bm92ZWwuY29tL3BhZ2UvJHtwYWdlfS8/cz0ke2ZpbHRlci50aXRsZSB8fCAiIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0n0mcG9zdF90eXBlPXdwLW1hbmdhJntnZW5yZX0mb3AmYXV0aG9yJmFydGlzdCZyZWxlYXNlJmFkdWx0Jm1fb3JkZXJieT0ke2ZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlci5zb3J0VHlwZSB8fCAiIn1gDQogICAgICAgICAgICBpZiAoZmlsdGVyLmdlbnJlcyAmJiBmaWx0ZXIuZ2VucmVzLmxlbmd0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA+IDApIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgie2dlbnJlfSIsIGZpbHRlci5nZW5yZXMubWFwKHggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4gImdlbnJlJTVCMCU1RD0iICsgeCkuam9pbigiJiIpKQ0KICAgICAgICAgICAgfSBlbHNlIHVybCA9IHVybC5yZXBsYWNlKCImeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02dlbnJlfSIsICIiKQ0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGNvbnRhaW5lci5maW5kKCcudGFiLWNvbnRlbnQtd3JhcCAuYy10YWJzLWl0ZW0gLnRhYi10aHVtYiBhJykuZm9yRWFjaCgoeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkgPT4gew0KICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBMaWdodEl0ZW0oeC5zZWxlY3QoJ2ltZycpLmF0dHIoInNyYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yIpLnVybCgpLCB4LmF0dHIoInRpdGxlIikudGV4dCgpLCAnJywgeC5hdHRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZSkpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJzOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdmFyIGNoYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XB0ZXJzID0gW107DQogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lci5nZXRDbGllbnQodGhpcy5pZCkucG9zdEZvcm0oImFqYXgvY2hhcHRlcnMiLnVyaShub3ZlbFVybCksIHsga2V5OiAidGVzdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIgfSkpOw0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCcubGlzdGluZy1jaGFwdGVyc193cmFwIGEnKS5mb3JFYWNoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HggPT4gew0KICAgICAgICAgICAgICAgICAgICBjaGFwdGVycy5wdXNoKG5ldyBDaGFwdGVyKHgudGV4dChmYWxzZSksIHguYXR0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0igiaHJlZiIpLnVybCgpKSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXJzLnJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyc2UoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHRocm93IGUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0Tm92ZWw6IGFzeW5jIGZ1bmN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uIChub3ZlbFVybCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybCkpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gYXdhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XQgdGhpcy5nZXRDaGFwdGVycyhub3ZlbFVybCk7DQogICAgICAgICAgICB2YXIgaXRlbSA9IG5ldyBOb3ZlbFJldmlld3MoKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIGl0ZW0uZ2VucmVzID0gY29udGFpbmVyLmZpbmQoIi5nZW5yZXMtY29udGVudCBhIikudGV4dEFycmF5KCk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICBpdGVtLmF1dGhvciA9IGNvbnRhaW5lci5maW5kKCIuYXV0aG9yLWNvbnRlbnQgYSIpLnRleHQoZmFsc2UpDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICBpdGVtLmNvbXBsZXRlZCA9ICJTdGF0dXM6IiArIGNvbnRhaW5lci5maW5kKCIucG9zdC1zdGF0dXMgLnBvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QtY29udGVudF9pdGVtIikubGFzdCgpLnNlbGVjdCgiLnN1bW1hcnktY29udGVudCIpLnRleHQoZmFsc2UpDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBpdGVtLnV2b3RlcyA9ICJSYXRpbmc6IiArIGNvbnRhaW5lci5zZWxlY3QoIi50b3RhbF92b3RlcyIpLnRleHQoZmFsc2UpICsgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i81IjsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWxpSXRlbShjb250YWluZXIuc2VsZWN0KCcuc3VtbWFyeV9pbWFnZSBpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WcnKS5hdHRyKCJzcmMiKS51cmwoKSwgY29udGFpbmVyLnNlbGVjdCgnLnBvc3QtdGl0bGUgaDEnKS50ZXh0KGZhbHNlKSwgY29udMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFpbmVyLnNlbGVjdCgnLnN1bW1hcnlfX2NvbnRlbnQnKS5jbGVhbklubmVySFRNTCgpLCBub3ZlbFVybCwgY2hhcHRlcnMsIGl0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W0sIHRoaXMubmFtZSwgdW5kZWZpbmVkKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0Q2hhcHRlcjogYXN5bmMgZnVuY3Rpb24gKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW5lci5jbGVhbkNoYXB0ZXIodGhpcy5wYXJzZXIuanEoYXdhaXQgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpLnNlbGVjdCgnLnJlYWRpbmctY29udGVudCcpLCB0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLm5hbWUpOw0KICAgICAgICB9LA0KICAgICAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgdXJsID0gdGhpcy5sYXRlc3RVcmwucmVwbGFjZSgne3B9JywgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgnLnBhZ2UtbGlzdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GluZy1pdGVtIC5yb3cnKS5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpZ2h0SXRlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sh4LnNlbGVjdCgnaW1nJykuYXR0cigic3JjIikudXJsKCksIHguc2VsZWN0KCcucG9zdC10aXRsZSBhJykudGV4dCgpLCAnJywgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5zZWxlY3QoJy5wb3N0LXRpdGxlIGEnKS5hdHRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG5ldyBQYXJzZXIoKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0n07&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KICAgIGZ1bmN0aW9uIFBhcnNlcigpIHsNCiAgICAgICAgdGhpcy5pZCA9ICIxLmNvbXJhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVtYW8iOw0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIHRoaXMubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFtZSA9ICdDb21yYWRlbWFvJzsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9ICJHb29nbGUgVHJhbnNsYXRlZCBub3ZlbHMiOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL2NvbXJhZGVtYW8uY29tL3BhZ2Uve3B9Lyc7DQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMudXJsID0gJ2h0dHBzOi8vY29tcmFkZW1hby5jb20nOw0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICdodHRwczovL2NvbXJhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVtYW8uY29tL3BhZ2Uve3B9Lz9zPXtxfSZwb3N0X3R5cGU9bm92ZWwnOw0KICAgICAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLmljb24gPSAnaHR0cHM6Ly93d3cuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029vZ2xlLmNvbS9zMi9mYXZpY29ucz9kb21haW49aHR0cHM6Ly9jb21yYWRlbWFvLmNvbSc7DQogICAgICAgIHRoaXMucGFyc2VyUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VhcmNoU2V0dGluZ3MgPSBuZXcgUGFyc2VyU2VhcmNoU2V0dGluZ3MoKTsNCiAgICAgICAgdGhpcy5wYXJzZXJMYW5ndWFnZSA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJlbiI7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZ2VucmVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0FjdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0icpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdDb21lZHknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnRmFudGFzeScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIYXJlbScpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCdNYXR1cmUnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTXlzdGVyeScpLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdSb21hbmNlJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S1maScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdUcmFnZWR5JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoJ1hpYW54aWEnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnV3V4aWEnKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgnWHVhbmh1YW4nKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQWR2ZW50dXJlJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1N1cGVybmF0dXJhbCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdEcmFtYScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNYXJ0aWFsIEFydHMnLCAiTWFydGlhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C1BcnRzIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NlaW5lbicpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdQc3ljaG9sb2dpY2FsJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NsaWNlIG9mIExpZmUnLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAic2xpY2Utb2YtbGlmZSIpLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgfTsNCg0KDQoNCiAgICAgICAgdGhpcy5wYXJzZXJTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hTZXR0aW5ncy5zb3J0VHlwZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQ2hpbmVzZScsICdjaGluZXNlJyksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0phcGFuZXNlJywgJ2phcGFuZXNlJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoJ0tvcmVhbicsICdrb3JlYW4nKSwNCiAgICAgICAgICAgIF0sDQogICAgICAgIH07DQoNCiAgICAgICAgdGhpcy5wYXJzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJTZWFyY2hTZXR0aW5ncy5zdGF0dXNlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb21wbGV0ZSIsICJjb21wbGV0ZSIpLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJPbkdvaW5nIiwgIm9uLWdvaW5nIikNCiAgICAgICAgICAgIF0NCiAgICAgICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Q0KDQoNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJDbGVhbmVyIik7DQogICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Q0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YXIgc2VjdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRlIiwgIkxhdGVzdCIsIHRydWUpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJjb21wbGV0ZWQiLCAiQ29tcGxldGVkIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICJjb21wbGV0ZSIpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigiY2hpbmVzZSIsICJDaGluZXNlIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyKHVuZGVmaW5lZCwgImNoaW5lc2UiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImphcGFuZXNlIiwgIkphcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFuZXNlIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgImphcGFuZXNlIikpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBTZWN0aW9uKCJrb3JlYW4iLCAiS29yZWFuIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mtvcmVhbiIpKQ0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPT4gIWtleXMgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Hwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocGFnZSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyID0gbmV3IEZpbHRlcigpOw0KICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjsNCiAgICAgICAgfSwNCg0KICAgICAgICBzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2g6IGFzeW5jIGZ1bmN0aW9uIChmaWx0ZXIsIHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciBzb3J0VHlwZVVyaSA9ICJodHRwcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zovL2NvbXJhZGVtYW8uY29tL210eXBlL3tzfS9wYWdlL3twfS8iDQogICAgICAgICAgICB2YXIgc29ydFR5cGVVcmwgPSBzb3J0VMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HlwZVVyaS5yZXBsYWNlKCJ7c30iLCBmaWx0ZXIuc29ydFR5cGUpLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbmcoKSk7DQoNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIHZhciB1cmwgPSBmaWx0ZXIuc29ydFR5cGUgJiYgZmlsdGVyLnNvcnRUeXBlICE9ICIiID8gc29ydFR5cGVVcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mwgOiB0aGlzLnNlYXJjaFVybC5yZXBsYWNlKCd7cX0nLCBmaWx0ZXIudGl0bGUgfHwgIiIpLnJlcGxhY2UoIntwfSIsIHBhZ2UudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9TdHJpbmcoKSk7DQogICAgICAgICAgICBpZiAoZmlsdGVyLmdlbnJlcy5sZW5ndGggJiYgZmlsdGVyLmdlbnJlcy5sZW5ndGggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAwKQ0KICAgICAgICAgICAgICAgIHVybCA9ICgiZ2VucmUvIiArIGZpbHRlci5nZW5yZXNbMF0gKyAiL3BhZ2Uve3B9IikucmVwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFjZSgie3B9IiwgcGFnZS50b1N0cmluZygpKS51cmkodGhpcy51cmwpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGlmIChmaWx0ZXIuYWN0aXZlICYmICghZmlsdGVyLnNvcnRUeXBlIHx8IGZpbHRlci5zb3J0VHlwZSA9PSAiIikpDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIHVybCA9ICgic3RhdHVzLyIgKyBmaWx0ZXIuYWN0aXZlICsgIi9wYWdlL3twfSIpLnJlcGxhY2UoIntwfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIsIHBhZ2UudG9TdHJpbmcoKSkudXJpKHRoaXMudXJsKTsNCg0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFycMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybiBjb250YWluZXIuZmluZCgiLmxpc3R1cGQgPiBkaXYiKS5tYXAoeCA9PiBuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5hdHRyKCJzcmMiKS51cmwoKSwgeC5zZWxlY3QoImEiKS50ZXh0KGZhbHNlKSwgIiIsIHguc2VsZWN0KCJhIikuYXR0cigiaHJlZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIpLnVybCgpLCB0aGlzLm5hbWUpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuY3Rpb24gKG5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVXJsKSB7DQoNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgICAgIHZhciBjaGFwdGVycyA9IGNvbnRhaW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5maW5kKCIjY2hhcHRlcmxpc3QgYSIpLm1hcCh4PT4gbmV3IENoYXB0ZXIoeC5zZWxlY3QoIi5jaGFwdGVybnVtIikudGV4dCgpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB4LmF0dHIoImhyZWYiKS51cmwoKSkpDQogICAgICAgICAgICB2YXIgbm92ZWxSZXZpZXdzID0gbmV3IE5vdmVsUmV2aWV3cygpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdHJ5IHsNCg0KICAgICAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5nZW5yZXMgPSBjb250YWluZXIuZmluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgiLndkLWZ1bGwiKS53aGVyZSh4ID0+IHgudGV4dCgpLmluZGV4T2YoIkdlbnJlcyIpICE9IC0xKS5maW5kKCJhIikubWFwKHggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4geC50ZXh0KCkpOw0KICAgICAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5hdXRob3IgPSBjb250YWluZXIuZmluZCgiLndkLWZ1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GwiKS53aGVyZSh4ID0+IHgudGV4dCgpLmluZGV4T2YoIlB1Ymxpc2hlciIpICE9IC0xKS5zZWxlY3QoImEiKS50ZXh0KCk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZCA9IGNvbnRhaW5lci5maW5kKCIud2QtZnVsbCIpLndoZXJlKHggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4geC50ZXh0KCkuaW5kZXhPZigiU3RhdHVzIikgIT0gLTEpLnNlbGVjdCgiYSIpLnRleHQoKSA9PT0gIkNvbXBsZXRlIiA/ICJTdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF0dXM6Q29tcGxldGVkIiA6ICJTdGF0dXM6T25nb2luZyI7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgY29uc29sZS5sb2coZSk7DQogICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhbGlJdGVtKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoIi50aHVtYiBpbWciKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcuZW50cnktdGl0bGUnKS50ZXh0KCkucmVwbGFjZSgiQ29tcmFkZSBNYW8iLCAiIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikucmVwbGFjZSgiLSIsICIiKS50cmltKCksDQogICAgICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoIi53ZC1mdWxsIikud2hlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mUoeCA9PiB4LnRleHQoKS5pbmRleE9mKCJEZXNjcmlwdGlvbiIpICE9IC0xKS5jbGVhbklubmVySFRNTCgpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5vdmVsVXJsLA0KICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKSwNCiAgICAgICAgICAgICAgICBub3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FJldmlld3MsDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICkNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gdGhpcy5jbGVhbmVyLmNsZWFuQ2hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W50KHRoaXMuaWQpLmdldEh0bWwodXJsKSkuc2VsZWN0KCIjY2hhcHRlcmNvbnRlbnQiKSwgdGhpcy5uYW1lKTsNCiAgICAgICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCg0KICAgICAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5sYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRlc3RVcmwucmVwbGFjZSgie3B9IiwgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gY29udGFpbmVyLmZpbmQoIi5saXN0dXBkID4gZGl2IikubWFwKHggPT4gbmV3IExpZ2h0SXRlbSh4LnNlbGVjdCgiaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W1nIikuYXR0cigic3JjIikudXJsKCksIHguc2VsZWN0KCJhIikudGV4dChmYWxzZSksICIiLCB4LnNlbGVjdCgiYSIpLmF0dHIoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mhyZWYiKS51cmwoKSwgdGhpcy5uYW1lKSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ts=&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKXsNCiAgICAgICAgdGhpcy5pZCA9ICIxLmxpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02h0bm92ZWxwdWIiOw0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMucGFyc2VyTGFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnTGlnaHROb3ZlbFB1Yic7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuZGlzcGxheU5hbWUgPSAiTGlnaHQtTm92ZWwiOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL3d3dy5saMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WdodG5vdmVscHViLmNvbS9icm93c2UvYWxsL3VwZGF0ZWQvYWxsL3twfSc7DQogICAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03d3LmxpZ2h0bm92ZWxwdWIuY29tJzsNCiAgICAgICAgdGhpcy5zZWFyY2hVcmwgPSAnaHR0cHM6Ly93d3cubGlnaHRub3ZlbHB1YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5jb20vbG5zZWFyY2hsaXZlJzsNCiAgICAgICAgdGhpcy5wYW5pbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WdpbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5pY29uID0gJ2h0dHBzOi8vc3RhdGljLmxpZ2h0bm92ZWxwdWIuY29tL2NvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRlbnQvaW1nL2xpZ2h0bm92ZWxwdWIvYXBwbGUtdG91Y2gtaWNvbi5wbmcnOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldHRpbmdzKCk7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MubXVsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlTZWxlY3Rpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG11bHRpU2VsZWN0aW9uOiB0cnVlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoIkFjdGlvbiIsIDEpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBZHVsdCIsIDQ4KSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWR2ZW50dXJlIiwgMiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WVkeSIsIDEyKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQ29udGVtcG9yYXJ5IFJvbWFuY2UiLCA1OSksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkRyYW1hIiwgMyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kVhc3Rlcm4gRmFudGFzeSIsIDU4KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRWNjaGkiLCAxMSksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkZhbnRhc3kiLCA0KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFudGFzeSBSb21hbmNlIiwgNjApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJHZW5kZXIgQmVuZGVyIiwgNTIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIYXJlbSIsIDUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJIaXN0b3JpY2FsIiwgNDYpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIb3Jyb3IiLCA0NCksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkpvc2VpIiwgMjMpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJMbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xpY29uIiwgNTEpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNYWdpY2FsIFJlYWxpc20iLCA1NyksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk1hcnRpYWwgQXJ0cyIsIDYpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJNYXR1cmUiLCA3KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTWVjaGEiLCA0NSksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIk15c3RlcnkiLCAxNCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlBzeWNobMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xvZ2ljYWwiLCAxOCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlJvbWFuY2UiLCA4KSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiU2Nob29sIExpZmUiLCAyMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S1maSIsIDE5KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2VpbmVuIiwgNDkpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCJTaG91am8iLCA0NyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNob3VqbyBBaSIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DYxKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2hvdW5lbiIsIDQzKSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiU2hvdW5lbiBBaSIsIDUzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2xpY2Ugb2YgTGlmZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIsIDEzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU211dCIsIDU2KSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiU3BvcnRzIiwgNTApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTdXBlcm5hdHVyYWwiLCAxNMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlRyYWdlZHkiLCA5KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxWYWx1ZSgiVmlkZW8gR2FtZXMiLCA1NSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIld1eGlhIiwgNDIpLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJYaWFueGlhIiwgMjApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJYdWFuaHVhbiIsIDEwKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiWWFvaSIsIDU0KQ0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgXQ0KICAgICAgICB9DQogICAgDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3Muc3RhdHVzZXMgPSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBtdWx0aVNlbGVjdGlvbjogdHJ1ZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCJDb21wbGV0ZWQiLCAxKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiT25nb2luZyIsIDIpLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgXQ0KICAgICAgICB9DQogICAgDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MubGFuZ3VhZ2VzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3Rpb246IHRydWUsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiQ2hpbmVzZSBOb3ZlbCIsIDQpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJLbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JlYW4gTm92ZWwiLCA1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTGlnaHQgTm92ZWwiLCA2KSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTGlnaHQgTm92ZWwgKEpQKSIsIDkpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCJMaWdodCBOb3ZlbCAoS1IpIiwgMTApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJQdWJsaXNoZWQgTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWwgKENOKSIsIDExKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUHVibGlzaGVkIE5vdmVsIChLUikiLCA4KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiV2ViIE5vdmVsIiwgNyksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoIldlYiBOb3ZlbCAoQ04pIiwgMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIldlYiBOb3ZlbCAoSMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lApIiwgMyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIldlYiBOb3ZlbCAoS1IpIiwgMikNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0F0NCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuY2xlYW5lciA9IHBsdWdpbnMuZmluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIpOw0KICAgIH0NCg0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uKGtleMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMpIHsNCiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kxhdGVzdCBVcGRhdGUiLCAiTGF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInJvbWFuY2UiLCAiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m9tYW5jZSIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcihbOF0pKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigiYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uIiwgIkFjdGlvbiIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcihbMV0pKSwNCiAgICAgICAgICAgICAgICBuZXcgUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VjdGlvbigibXlzdGVyeSIsICJNeXN0ZXJ5IiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsxNF0pKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIF0NCiAgICANCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLmluY2x1ZGVzKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HgubmFtZSkpOw0KICAgICAgICB9LA0KICAgIA0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbihzZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uLCBwYWdlKSAgew0KICAgICAgICAgICAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocGFnZSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfSwNCiAgICANCiAgICAgICAgZGVmYXVsdEZpbHRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICByZXR1cm4gbmV3IEZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcigpOw0KICAgICAgICB9LA0KICAgIA0KICAgICAgICBnZXRHZW5yZXM6IGFzeW5jIGZ1bmN0aW9uKGZpbHRlciwgcGFnZSkgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwczovL3d3dy5saWdodG5vdmVscHViLmNvbS9zZWFyY2hhZHY/Y3RnY29uPWFuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CZ0YWdjb249YW5kJnJhdGNvbj1taW4mcmF0aW5nPTAmc29ydD1zZGF0ZSZwYWdlTm89IiArIHBhZ2U7DQogICAgICAgICAgICBpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAoZmlsdGVyLmFjdGl2ZSkNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAiJnN0YXR1cz0iICsgZmlsdGVyLmFjdGl2ZTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIGlmIChmaWx0ZXIubGFuZ3VhZ2UgJiYgZmlsdGVyLmxhbmd1YWdlICE9ICIiKQ0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybCA9IHVybCArICImZ2VucmV0eXBlcz0iICsgZmlsdGVyLmxhbmd1YWdlOw0KICAgIA0KICAgICAgICAgICAgaWYgKGZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5nZW5yZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAiJmNhdGVnb3JpZXM9IiArIGZpbHRlci5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5yZXMuam9pbigiJTJDIik7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgY29udGFpbmVyLmZpbmQoIi5ub3ZlbC1pdGVtIikuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICByZXN1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HQucHVzaChuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKS5hdHRyKCJkYXRhLXNyYyB8IHNyYyIpLnVybCgpLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICB4LnNlbGVjdCgiLm5vdmVsLXRpdGxlIGEiKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIsDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCIubm92ZWwtdGl0bGUgYSIpLmF0dHIoImhyZWYiKS51cmwoKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgdGhpcy5uYW1lKSk7DQogICAgICAgICAgICB9KTsNCiAgICANCiAgICAgICAgICAgIHJldHVybiByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQ7DQogICAgICAgIH0sDQogICAgDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24oZmlsdGVyLCBwYWdlKSB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBpZiAoIWZpbHRlci50aXRsZSkNCiAgICAgICAgICAgICAgICBmaWx0ZXIudGl0bGUgPSAiIjsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciB1cmwgPSB0aGlzLnNlYXJjaFVybDsNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzLmxlbmd0aCA+IDAgfHwgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyLmxhbmd1YWdlICE9ICIiIHx8IGZpbHRlci5hY3RpdmUpDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V0R2VucmVzKGZpbHRlciwgcGFnZSk7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gYXdhaXQgdGhpcy5jbGVhbmVyLmdldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ENsaWVudCh0aGlzLmlkKS5wb3N0RW5jb2RlZEZvcm0odXJsLCB7IGlucHV0Q29udGVudDogZmlsdGVyLnRpdGxlIH0pOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnBhcnNlci5qcShjb250YWluZXIucmVzdWx0dmlldy50b0h0bWwoKSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBodG1sLmZpbmQoIi5ub3ZlbC1pdGVtIikuZm9yRWFjaCh4ID0+IHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKS5hdHRyKCJkYXRhLXNyYyB8IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiLm5vdmVsLXRpdGxlIikudGV4dChmYWxzZSksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiYSIpLmF0dHIoImhyZWYiKS51cmwoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lKSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQ7DQogICAgICAgIH0sDQogICAgDQogICAgDQogICAgICAgIGdldENoYXB0ZXJzOiBhc3luYyBmdW5jdGlvbihub3ZlbFVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkgIHsNCiAgICAgICAgICAgIHZhciBwYWdlID0gMTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICAgICAgdmFyIHVybCA9IG5vdmVsVXJsICsgIi9wYWdlLXtwYWdlfSI7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnBhcnNlci5yZW5kZXJDb3VudGVyQ2FsbHMocGFnZSwgdXJsKTsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBwYWdlID0gaXRlbS5wYWdlOw0KICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVtLnByb21pc2VzKTsNCiAgICAgICAgICAgICAgICB2YXIgYnJlYWtJdCA9IGZhbHNlOw0KICAgIA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZhbHVlcy5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAoIWJyZWFrSXQpIHsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMucGFyc2VyLmpxKHgpLmZpbmQoIi5jaGFwdGVyLWxpc3QgYSIpOw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgaWYgKCFpdGVtcy5oYXNFbGVtZW50cygpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WtJdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzdWx0QSA9IGl0ZW1zLnJlZHVjZSgoYXJyLCB4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW3guYXR0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0igidGl0bGUiKS50ZXh0KCkgKyB4LmF0dHIoImhyZWYiKS51cmwoKV0gPSBuZXcgQ2hhcHRlcih4LmF0dHIoInRpdGxlIikudGV4dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgpLCB4LmF0dHIoImhyZWYiKS51cmwoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSk7DQogICAgDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJzZXIudmFsaWRhdGVDaGFwdGVycyhyZXN1bHRBLCByZXN1bHQpID09IGZhbHNlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtJdCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgICAgICB9KQ0KICAgIA0KICAgICAgICAgICAgICAgIGlmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ChicmVha0l0KQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIHJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybiBPYmplY3QudmFsdWVzKHJlc3VsdCk7DQogICAgDQogICAgICAgIH0sDQogICAgDQogICAgICAgIGdldE5vdmVsOiBhc3luYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBmdW5jdGlvbihub3ZlbFVybCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybCkpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJVcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mwgPSBjb250YWluZXIuc2VsZWN0KCIuY2hhcHRlci1sYXRlc3QtY29udGFpbmVyIikuYXR0cigiaHJlZiIpLnVybCgpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgaWYgKCFjaGFwdGVyVXJsIHx8IGNoYXB0ZXJVcmwgPT0gIiIpDQogICAgICAgICAgICAgICAgY2hhcHRlclVybCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5vdmVsVXJsOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5nZXRDaGFwdGVycyhjaGFwdGVyVXJsKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIHZhciBub3ZlbFJldmlld3MgPSBuZXcgTm92ZWxSZXZpZXdzKCk7DQogICAgICAgICAgICB2YXIgaW5mbyA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNvbnRhaW5lci5zZWxlY3QoIi5ub3ZlbC1pbmZvIik7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuZ2VucmVzID0gaW5mby5maMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5kKCIuY2F0ZWdvcmllcyBhIikudGV4dEFycmF5KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuYXV0aG9yID0gaW5mby5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoIi5hdXRob3IgYSIpLnRleHQoZmFsc2UpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLnV2b3RlcyA9ICJSYXRpbmc6IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iArIGNvbnRhaW5lci5zZWxlY3QoIi5yYXRpbmctc3RhciBzdHJvbmciKS50ZXh0KGZhbHNlKSArICIvNSI7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBub3ZlbFJldmlld3MuZGVzY3JpcHRpb24gPSBjb250YWluZXIuc2VsZWN0KCIjaW5mbyAuc3VtbWFyeSIpLmNsZWFuSW5uZXJIVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0E1MKCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuY29tcGxldGVkID0gaW5mby50ZXh0KGZhbHNlKSA9PT0gIkNvbXBsZXRlZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIgPyAiU3RhdHVzOkNvbXBsZXRlZCIgOiAiU3RhdHVzOk9uZ29pbmciOw0KICAgIA0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRhbGlJdGVtKA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoIi5jb3ZlciBpbWciKS5hdHRyKCJkYXRhLXNyYyB8IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoIi5ub3ZlbC10aXRsZSIpLnRleHQoZmFsc2UpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5kZXNjcmlwdGlvbiwNCiAgICAgICAgICAgICAgICBub3ZlbFVybCwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBjaGFwdGVycywNCiAgICAgICAgICAgICAgICBub3ZlbFJldmlld3MsDQogICAgICAgICAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgICAgICkNCiAgICAgICAgfSwNCiAgICANCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgZ2V0Q2hhcHRlcjogYXN5bmMgZnVuY3Rpb24odXJsKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbmVyLmNsZWFuQMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSkucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VsZWN0KCIjY2hhcHRlci1jb250YWluZXIiKSwgdGhpcy5uYW1lKTsNCiAgICAgICAgfSwNCiAgICANCiAgICAgICAgbGF0ZXN0OMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBhc3luYyBmdW5jdGlvbihwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5sYXRlc3RVcmwucmVwbGFjZSgie3B9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjb250YWluZXIuZmluZCgiLm5vdmVsLWl0ZW0iKS5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgIHJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VsdC5wdXNoKG5ldyBMaWdodEl0ZW0oeC5zZWxlY3QoIi5ub3ZlbC1jb3ZlciBpbWciKS5hdHRyKCJkYXRhLXNyYyB8IHNyYyIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVybCgpLA0KICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiLm5vdmVsLXRpdGxlIikudGV4dCgpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAiIiwNCiAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoIi5jb3Zlci13cmFwIGEiKS5hdHRyKCJocmVmIikudXJsKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CksDQogICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzdWx0Ow0KICAgICAgICB9DQogICAgfQ0KDQoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KDQp9Ow==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmlkID0gIjEubWFuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02FuZWxvIjsNCiAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldGFsaUl0ZW1UeXBlLk1hbmFnYTsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYXJzZXJMYW5ndWFnZSA9ICJlbiI7DQogICAgICAgIHRoaXMubmFtZSA9ICdNYW5nYW5FbG8nOw0KICAgICAgICB0aGlzLmRpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03BsYXlOYW1lID0gIk1hbmdhLVNlY3RvciI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vbWFuZ2FuZWxvLmNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S9nZW5yZS1hbGwve3B9JzsNCiAgICAgICAgdGhpcy51cmwgPSAnaHR0cHM6Ly9tYW5nYW5lbG8uY29tLyc7DQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuc2VhcmNoVXJsID0gJ2h0dHBzOi8vbWFuZ2FuZWxvLmNvbS9hZHZhbmNlZF9zZWFyY2g/cz1hbGwmcGFnZT17cH0nOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpb24gPSB0cnVlOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLmljb24gPSAnaHR0cHM6Ly9tYW5nYW5lbG8uY29tL2Zhdmljb24ucG5nJzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m11bHRpU2VsZWN0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgnQWN0aW9uJywgMiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0FkdWx0JywgMyksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0FkdmVudHVyZScsIDQpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdDb21lZHknLCA2KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQ29va2luZycsIDcpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdEb3VqaW5zaGknLCA5KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRHJhbWEnLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAxMCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0VjY2hpJywgMTEpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdGYW50YXN5JywgMTIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdHZW5kZXIgYmVuZGVyJywgMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TMpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIYXJlbScsIDE0KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxWYWx1ZSgnSGlzdG9yaWNhbCcsIDE1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSG9ycm9yJywgMTYpLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdJc2VrYWknLCA0NSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ0pvc2VpJywgMTcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNYW5odWEnLCA0NCksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoJ01hbmh3YScsIDQzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTWFydGlhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBhcnRzJywgMTkpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNYXR1cmUnLCAyMCksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ01lY2hhJywgMjEpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNZWRpY2FsJywgMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdNeXN0ZXJ5JywgMjQpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdPbmUgc2hvdCcsIDI1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUHN5Y2hvbG9naWNhbCcsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DI2KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUm9tYW5jZScsIDI3KSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgnU2Nob29sIGxpZmUnLCAyOCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NjaSBmaScsIDI5KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2VpbmVuJywgMzApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCdTaG91am8nLCAzMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1Nob3VqbyBhaScsIDMyKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2hvdW5lbicsIDMzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgnU2hvdW5lbiBhaScsIDM0KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2xpY2Ugb2YgbGlmZScsIDM1KSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU211dCcsIDM2KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgnU3BvcnRzJywgMzcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTdXBlcm5hdHVyYWwnLCAzOCksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1RyYWdlZHknLCAzOSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU01dlYnRvb25zJywgNDApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdZYW9pJywgNDEpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdZdXJpJywgNDIpLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgfTsNCg0KICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlclNlYXJjaFNldHRpbmdzLnNvcnRUeXBlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdMYXRlc3QgUmVsZWFzZScsICcnKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTmV3ZXN0JywgJ25ld2VzdCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdUb3AgdmlldycsICd0b3B2aWV3JyksDQogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMucGFyc2VyU2VhcmNoU2V0dGluZ3Muc3RhdHVzZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQ29tcGxldGVkIiwgImNvbXBsZXRlZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJvbmdvaW5nIiwgIm9uZ29pbmciKQ0KICAgICAgICAgICAgXQ0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9DQoNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJDbGVhbmVyIik7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICB9DQoNCiAgICBQYXJzZXIucHJvdG90eXBlID0gew0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3Rpb24gKGtleXMpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HsNCiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIkxhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVzdCBVcGRhdGUiLCAiTGF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImhvdCIsICJOZXdlc3QiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCAibmV3ZXN0IikpLA0KICAgICAgICAgICAgICAgIG5ldyBTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uKCJjb21wbGV0ZWQiLCAiQ29tcGxldGVkIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgdW5kZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WZpbmVkLCB1bmRlZmluZWQsICJjb21wbGV0ZWQiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInBvcHVsYXIiLCAiTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9zdCBQb3B1bGFyIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgInRvcHZpZXciKSkNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIF0NCg0KICAgICAgICAgICAgcmV0dXJuIHNlY3Rpb25zLmZpbHRlcih4ID0+ICFrZXlzIHx8IGtleXMuaW5jbHVkZXMoeC5uYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W1lKSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgdHJhbnNsYXRlU2VjdGlvbjogYXN5bmMgZnVuY3Rpb24gKHNlY3Rpb24sIHBhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UpIHsNCiAgICAgICAgICAgIGlmIChzZWN0aW9uLmlkZW50aWZpZXIgPT0gIkxhdGVzdCIpDQogICAgICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuIGF3YWl0IHRoaXMubGF0ZXN0KHBhZ2UpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLnNlYXJjaChzZWN0aW9uLmZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXIoKSwgcGFnZSk7DQogICAgICAgIH0sDQoNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgZGVmYXVsdEZpbHRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAoZmlsdGVyLCBwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5zZWFyY2hVcmwucmVwbGFjZSgie3B9IiwgcGFnZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S50b1N0cmluZygpKTsNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzLmxlbmd0aCA+IDApDQogICAgICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsID0gKCImZ19pPV8iICsgZmlsdGVyLmdlbnJlcy5qb2luKCJfIikpLnVyaSh1cmwpOw0KICAgICAgICAgICAgaWYgKGZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5zb3J0VHlwZSAmJiBmaWx0ZXIuc29ydFR5cGUgIT0gIiIpDQogICAgICAgICAgICAgICAgdXJsID0gKCImb3JieT0iICsgZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLnNvcnRUeXBlKS51cmkodXJsKTsNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuYWN0aXZlICYmIGZpbHRlci5hY3RpdmUgIT0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIpDQogICAgICAgICAgICAgICAgdXJsID0gKCImc3RzPSIgKyBmaWx0ZXIuYWN0aXZlKS51cmkodXJsKTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlmIChmaWx0ZXIudGl0bGUgJiYgZmlsdGVyLnRpdGxlLnRyaW0oKS5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgIHVybCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgiJmtleXc9IiArIGZpbHRlci50aXRsZS5yZXBsYWNlKC9bIF0vZywgIl8iKSkudXJpKHVybCk7DQogICAgICAgICAgICB2YXIgYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJy5jb250ZW50LWdlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nJlcy1pdGVtJykuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICh4LnNlbGVjdCgnLmdlbnJlcy1pdGVtLWltZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBpbWcnKS5hdHRyKCJzcmMiKS5oYXNWYWx1ZSgpKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIG5ldyBMaWdodEl0ZW0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoJy5nZW5yZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMtaXRlbS1pbWcgaW1nJykuYXR0cigic3JjIikudXJsKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5nZW5yZXMtaXRlbS1pbWcnKS5hdHRyKCJ0aXRsZSIpLnRleHQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLmdlbnJlcy1pdGVtLWltZycpLmF0dHIoImhyZWYiKS51cmwoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsKSB7DQogICAgICAgICAgICB2YXIgY29udGFpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKG5vdmVsVXJsKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sk7DQoNCiAgICAgICAgICAgIHZhciBpdGVtID0gbmV3IE5vdmVsUmV2aWV3cygpOw0KICAgICAgICAgICAgdmFyIHRiSW5mbyA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNvbnRhaW5lci5maW5kKCIudmFyaWF0aW9ucy10YWJsZUluZm8gdHIiKQ0KICAgICAgICAgICAgaWYgKHRiSW5mby5sZW5ndGgoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA+IDMpDQogICAgICAgICAgICAgICAgaXRlbS5nZW5yZXMgPSB0YkluZm8uZXEoMykuZmluZCgiLnRhYmxlLXZhbHVlIGEiKS5tYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XAoeCA9PiB4LnRleHQoZmFsc2UpKTsNCiAgICAgICAgICAgIGVsc2UgaWYgKHRiSW5mby5sZW5ndGgoKSA9PSAzKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGl0ZW0uZ2VucmVzID0gdGJJbmZvLmVxKDIpLmZpbmQoIi50YWJsZS12YWx1ZSBhIikubWFwKHggPT4geC50ZXh0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlKSk7DQogICAgICAgICAgICBpdGVtLmRlc2NyaXB0aW9uID0gY29udGFpbmVyLnNlbGVjdCgiLnBhbmVsLXN0b3J5LWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m8tZGVzY3JpcHRpb24iKS50ZXh0KGZhbHNlKQ0KDQogICAgICAgICAgICBpdGVtLnV2b3RlcyA9IGNvbnRhaW5lci5zZWxlY3QoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVtW3R5cGVvZj0ndjpSYXRpbmcnXSIpLnRleHQoZmFsc2UpLnJlbW92ZU5ld0xpbmUoIiAiKTsNCiAgICAgICAgICAgIGl0ZW0uYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXJuYXRpdmVOYW1lcyA9IHRiSW5mby5sZW5ndGgoKSA+IDMgPyB0YkluZm8uZXEoMCkuc2VsZWN0KCIjZWRpdGFzc29jaWF0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WQiKS50ZXh0KGZhbHNlKSA6ICIiOw0KICAgICAgICAgICAgaWYgKHRiSW5mby5sZW5ndGgoKSA+IDMpDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgaXRlbS5hdXRob3IgPSB0YkluZm8uZXEoMSkuc2VsZWN0KCIudGFibGUtdmFsdWUiKS50ZXh0KGZhbHNlKTsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGVsc2UgaWYgKHRiSW5mby5sZW5ndGgoKSA+IDApDQogICAgICAgICAgICAgICAgaXRlbS5hdXRob3IgPSB0YkluZm8uZXEoMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ckuc2VsZWN0KCIudGFibGUtdmFsdWUiKS50ZXh0KGZhbHNlKTsNCiAgICAgICAgICAgIGl0ZW0ubGFuZyA9ICIiOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgaWYgKHRiSW5mby5sZW5ndGgoKSA+IDMpDQogICAgICAgICAgICAgICAgaXRlbS5jb21wbGV0ZWQgPSB0YkluZm8uZXEoMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikudGV4dChmYWxzZSkucmVtb3ZlTmV3TGluZSgiICIpOw0KICAgICAgICAgICAgZWxzZSBpZiAodGJJbmZvLmxlbmd0aCgpID09IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DMpDQogICAgICAgICAgICAgICAgaXRlbS5jb21wbGV0ZWQgPSB0YkluZm8uZXEoMSkudGV4dChmYWxzZSkucmVtb3ZlTmV3TGluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgiICIpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gY29udGFpbmVyLmZpbmQoIi5yb3ctY29udGVudC1jaGFwdGVyIGEiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5tYXAoeCA9PiBuZXcgQ2hhcHRlcih4LnRleHQoZmFsc2UpLCB4LmF0dHIoImhyZWYiKS51cmwoKSkpOw0KICAgICAgICAgICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIG5ldyBEZXRhbGlJdGVtKA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5pbmZvLWltYWdlIGltZycpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5zdG9yeS1pbmZvLXJpZ2h0IGgxJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ykudGV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgaXRlbS5kZXNjcmlwdGlvbiwNCiAgICAgICAgICAgICAgICBub3ZlbFVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CwNCiAgICAgICAgICAgICAgICBjaGFwdGVycy5yZXZlcnNlKCksDQogICAgICAgICAgICAgICAgaXRlbSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgdW5kZWZpbmVkLA0KICAgICAgICAgICAgKTsNCiAgICAgICAgfSwNCg0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZXIuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpLmZpbmQoIi5jb250YWluZXItY2hhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlci1yZWFkZXIgaW1nIikubWFwKHggPT4geC5hdHRyKCJzcmMiKS51cmwoKSkuZmlsdGVyKHggPT4geCAmJiB4ICE9ICIiKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgfSwNCg0KICAgICAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gdGhpcy5sYXRlc3RVcmwucmVwbGFjZSgne3B9JywgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhciBjb250YWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgnLmNvbnRlbnQtZ2VucmVzLWl0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W0nKS5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgIGlmICh4LnNlbGVjdCgnLmdlbnJlcy1pdGVtLWltZyBpbWcnKS5hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRyKCJzcmMiKS5oYXNWYWx1ZSgpKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBMaWdodEl0ZW0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoIi5nZW5yZXMtaXRlbS1pbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WcgaW1nIikuYXR0cigic3JjIikudGV4dCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCIuZ2VucmVzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wl0ZW0taW1nIikuYXR0cigidGl0bGUiKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJywNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLmdlbnJlcy1pdGVtLWltZycpLmF0dHIoImhyZWYiKS51cmwoKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIH0NCg0KICAgIHJldHVybiBuZXcgUGFyc2VyKCk7DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQogICAgICAgIHRoaXMuaWQgPSAiMS5tdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Gxub3ZlbCI7DQogICAgICAgIHRoaXMuZGV0YWxpSXRlbVR5cGUgPSBEZXRhbGlJdGVtVHlwZS5Ob3ZlbDsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYXJzZXJMYW5ndWFnZSA9ICJlbiI7DQogICAgICAgIHRoaXMubmFtZSA9ICdNdGxOb3ZlbCc7DQogICAgICAgIHRoaXMuZGlzcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxheU5hbWUgPSB0aGlzLm5hbWU7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vd3d3Lm10bG5vdmVsLmNvbS93cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C1hZG1pbi9hZG1pbi1hamF4LnBocD9hY3Rpb249cmNudF91cGRhdGUmdmlld19hbGw9eWVzJm1vcmVJdGVtc1BhZ2VJbmRleD17cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0mX19hbXBfc291cmNlX29yaWdpbj1odHRwcyUzQSUyRiUyRnd3dy5tdGxub3ZlbC5jb20nOw0KICAgICAgICB0aGlzLnVybCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdodHRwczovL3d3dy5tdGxub3ZlbC5jb20nOw0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICdodHRwczovL3d3dy5tdGxub3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5jb20vd3AtYWRtaW4vYWRtaW4tYWpheC5waHA/YWN0aW9uPWF1dG9zdWdnZXN0JnE9e3F9Jm1vcmVJdGVtc1BhZ2VJbmRleD17cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0mX19hbXBfc291cmNlX29yaWdpbj1odHRwcyUzQSUyRiUyRnd3dy5tdGxub3ZlbC5jb20nOw0KICAgICAgICB0aGlzLnBhbmluYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLmljb24gPSAnaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HR0cHM6Ly93d3cubXRsbm92ZWwubmV0L3RoZW1lcy9tdGxub3ZlbC9pbWFnZXMvbXRsbm92ZWwtMzIuaWNvJzsNCiAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lNlYXJjaFNldHRpbmdzLm11bHRpU2VsZWN0aW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VucmVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0FjdGlvbicpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdBZHVsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdDb21lZHknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnQWR2ZW50dXJlJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0RyYW1hJyksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ0VjY2hpJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0VyY2l5dWFuJyksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0Zhbi1GaWN0aW9uJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ0ZhbnRhc3knKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnR2FtZScpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCdHZW5kZXIgQmVuZGVyJywgImdlbmRlci1iZW5kZXIiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnSGFyZW0nKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSGlzdG9yaWNhbCcpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdIb3Jyb3InKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSm9zZWknKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTWFydGlhbCBBcnRzJywgIm1hcnRpYWwtYXJ0cyIpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdNYXR1cmUnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTWVjaGEnKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTWlsaXRhcnknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XlzdGVyeScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdQc3ljaG9sb2dpY2FsJyksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ1JvbWFuY2UnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2Nob29sIExpZmUnLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAnc2Nob29sLWxpZmUnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2NpLWZpJyksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ1NlaW5lbicpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTaG91am8nKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2hvdWpvIEFpJywgInNob3Vqby1haSIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCdTaG91bmVuJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1Nob3VuZW4gQWknLCAic2hvdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lbi1haSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTbGljZSBvZiBMaWZlJywgInNsaWNlLW9mLWxpZmUiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU211dCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdTcG9ydHMnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU3VwZXJuYXR1cmFsJyksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ1RyYWdlZHknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnVHdvLWRpbWVuc2lvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsJywgInR3by1kaW1lbnNpb25hbC1ub3ZlbCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdVcmJhbiBMaWZlJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ywgInVyYmFuLWZpY3Rpb24iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnV3V4aWEnKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgnWGlhbnhpYScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdYdWFuaHVhbicpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdZYW9pJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU01l1cmknKSwNCg0KICAgICAgICAgICAgXSwNCiAgICAgICAgfTsNCg0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nN0YXR1c2VzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0NvbXBsZXRlZCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdEcm9wcGVkJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0hpYXR1cycpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCdJbmNvbXBsZXRlJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ09uZ29pbmcnKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIF0sDQogICAgICAgIH07DQoNCg0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbHVnaW5zLmZpbmQoeCA9PiB4Lm5hbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUgPT0gIkNsZWFuZXIiKTsNCiAgICB9DQoNCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQogICAgICAgIGdldFNlY3Rpb25zOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBmdW5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uKCJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0igiY29tcGxldGVkIiwgIkNvbXBsZXRlZCBOb3ZlbCIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsIHVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVmaW5lZCwgdW5kZWZpbmVkLCAiY29tcGxldGVkIikpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJvbmdvaW5nIiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0k9uZ29pbmcgTm92ZWwiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CwgIm9uZ29pbmciKSksDQogICAgICAgICAgICBdDQoNCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V5cyB8fCBrZXlzLmluY2x1ZGVzKHgubmFtZSkpOw0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zbGF0ZVNlY3Rpb246IGFzeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5jIGZ1bmN0aW9uIChzZWN0aW9uLCBwYWdlKSB7DQogICAgICAgICAgICBpZiAoc2VjdGlvbi5pZGVudGlmaWVyID09ICJMYXRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QiKQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxhdGVzdChwYWdlKTsNCiAgICAgICAgICAgIGVsc2UNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcy5kZWZhdWx0RmlsdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CksIHBhZ2UpOw0KICAgICAgICB9LA0KDQogICAgICAgIGRlZmF1bHRGaWx0ZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZhciBmaWx0ZXIgPSBuZXcgRmlsdGVyKCk7DQogICAgICAgICAgICByZXR1cm4gZmlsdGVyOw0KICAgICAgICB9LA0KDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGdldEJ5R2VucmVzOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gWMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0107DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHZhciBnZW5yZVVybCA9ICJnZW5yZS97Z30vcGFnZS97cH0vIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i51cmkodGhpcy51cmwpLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgICAgICAgdmFyIHN0YXR1cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU01VybCA9ICJzdGF0dXMve3N9L3BhZ2Uve3B9LyIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLCBwYWdlLnRvU3RyaW5nKCkpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgICAgIHZhciBxID0NCiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmdlbnJlcy5sZW5ndGggPiAwID8NCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgICAgIGdlbnJlVXJsLnJlcGxhY2UoIntnfSIsIGZpbHRlci5nZW5yZXNbMF0udG9Mb3dlckNhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UoKSkgOg0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLmFjdGl2ZSAmJiBmaWx0ZXIuYWN0aXZlICE9ICcnID8NCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNVcmwucmVwbGFjZSgie3N9IiwgZmlsdGVyLmFjdGl2ZS50b0xvd2VyQ2FzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgpKSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIHZhciBjb250YWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwocSB8fCAiIikpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgICAgIHZhciBkYXRhID0gY29udGFpbmVyLmZpbmQoJy5ib3gnKTsNCiAgICAgICAgICAgICAgICB2YXIgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzdWx0ID0gW107DQogICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBocmVmID0geC5zZWxlY3QoIi5saXN0LWEiKS5hdHRyKCJocmVmIikudGV4dCgpDQogICAgICAgICAgICAgICAgICAgIHZhciB0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRsZSA9IHguZmluZCgiLmxpc3QtdGl0bGUiKS50ZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgbmV3IExpZ2h0SXRlbSh4LnNlbGVjdCgnLmxpc3QtaW1nJykuYXR0cignc3JjJykudXJsKCksIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpdGxlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWYudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJpKHRoaXMudXJsKSwgdGhpcy5uYW1lDQogICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICApOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xlLmxvZyhlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQoNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQoNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mxlbmd0aCA+IDAgfHwgKGZpbHRlci5hY3RpdmUgJiYgZmlsdGVyLmFjdGl2ZSAhPSAiIikpDQogICAgICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuIGF3YWl0IHRoaXMuZ2V0QnlHZW5yZXMoZmlsdGVyLCBwYWdlKTsNCg0KICAgICAgICAgICAgaWYgKCFmaWx0ZXIudGl0bGUgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HwgZmlsdGVyLnRpdGxlLmxlbmd0aCA8PSAwKQ0KICAgICAgICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgICAgIHZhciBqcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029uRGF0YSA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuR2V0SnNvbih0aGlzLnNlYXJjaFVybC5yZXBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WNlKCJ7cX0iLCBmaWx0ZXIudGl0bGUgfHwgIiIpLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbmcoKSkpOw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgaWYgKGpzb25EYXRhLml0ZW1zICYmIGpzb25EYXRhLml0ZW1zLmxlbmd0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA+IDApDQogICAgICAgICAgICAgICAganNvbkRhdGEuaXRlbXMuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYgKHgucmVzdWx0cyAmJiB4LnJlc3VsdHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgeC5yZXN1bHRzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgIG5ldyBMaWdodEl0ZW0oaXRlbS50aHVtYm5haWwsIGl0ZW0udGl0bGUuaHRtbFRleHQoZmFsc2UpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiIiwgaXRlbS5wZXJtYWxpbmsudXJpKHRoaXMudXJsKSB8fCAiIiwgdGhpcy5uYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9KQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRDaGFwdGVyczogYXN5bmMgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVuY3Rpb24gKG5vdmVsVXJsKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gImNoYXB0ZXItbGlzdC8iLnVyaShub3ZlbFVybCk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLmlkKS5nZXRIdG1sKHVybCkpOw0KICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5maW5kKCIuY2gtbGlzdCBhIikubWFwKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HggPT4gbmV3IENoYXB0ZXIoeC50ZXh0KGZhbHNlKSwgeC5hdHRyKCJocmVmIikudXJsKCkpKS5yZXZlcnNlKCk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0sDQoNCiAgICAgICAgZ2V0Tm92ZWw6IGFzeW5jIGZ1bmN0aW9uIChub3ZlbFVybCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5nZXRDaGFwdGVycyhub3ZlbFVybCk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgbm92ZWxSZXZpZXdzID0gbmV3IE5vdmVsUmV2aWV3cygpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmdlbnJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yA9IGNvbnRhaW5lci5maW5kKCIjY3VycmVudGdlbiBhIikudGV4dEFycmF5KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XZvdGVzID0gY29udGFpbmVyLnNlbGVjdCgiLnJhdGluZy1pbmZvIHN0cm9uZyIpLnRleHQoZmFsc2UpICsgIiAvIDUiOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZCA9IGNvbnRhaW5lci5zZWxlY3QoIiNjdXJyZW50c3RhdHVzIikudGV4dChmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSkgPT09ICJDb21wbGV0ZWQiID8gIlN0YXR1czpDb21wbGV0ZWQiIDogIlN0YXR1czoiICsgY29udGFpbmVyLnNlbGVjdCgiIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02N1cnJlbnRzdGF0dXMiKS50ZXh0KGZhbHNlKTsNCiAgICAgICAgICAgIHZhciB0ciA9IGNvbnRhaW5lci5zZWxlY3QoIiNwYW5lbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5vdmVsaW5mbyAuaW5mbyIpLmZpbmQoInRyIik7DQogICAgICAgICAgICBpZiAodHIgIT09IG51bGwgJiYgdHIgJiYgdHIubGVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03RoKCkgPiAwKQ0KICAgICAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5hdXRob3IgPSB0ci5lcSh0ci5sZW5ndGgoKSAtIDEpLnNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdCgiYSIpLnRleHRBcnJheSgpLmpvaW4oIiwiKTsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWxpSXRlbSgNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcubWFpbi10bWInKS5hdHRyKCdzcmMnKS51cmwoKSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBjb250YWluZXIuc2VsZWN0KCcuZW50cnktdGl0bGUnKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICBjb250YWluZXIucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VsZWN0KCcuZGVzYycpLmNsZWFuSW5uZXJIVE1MKCksDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgY2hhcHRlcnMsDQogICAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIHRoaXMubmFtZSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICB1bmRlZmluZWQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZXI6IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFzeW5jIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyLmNsZWFuQ2hhcHRlcihjb250YWluZXIuc2VsZWN0KCcucG9zdC1jb250ZW50IC5wYXInKSwgdGhpcy5uYW1lKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9LA0KDQogICAgICAgIGxhdGVzdDogYXN5bmMgZnVuY3Rpb24gKHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mxhdGVzdFVybC5yZXBsYWNlKCd7cH0nLCBwYWdlLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgdmFyIGpzb25EYXRhID0gYXdhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5HZXRKc29uKHVybCk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gWMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0107DQogICAgICAgICAgICBpZiAoanNvbkRhdGEuaXRlbXMgJiYganNvbkRhdGEuaXRlbXMubGVuZ3RoID4gMCkNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBqc29uRGF0YS5pdGVtcy5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgICAgICB2YXIgbG5rID0gKHgubm92ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxfcGVybWFsaW5rIHx8ICIiKS50b0h0bWwoKS5xdWVyeVNlbGVjdG9yKCJhIik7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExpZ2h0SXRlbSh4LnRtYiwgKGxuay5pbm5lclRleHQgfHwgIiIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiIiwgbG5rLmdldEF0dHJpYnV0ZSgiaHJlZiIpLnVyaSh0aGlzLnVybCksIHRoaXMubmFtZSkNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9DQogICAgfQ0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJldHVybiBuZXcgUGFyc2VyKCk7DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQoNCg0KICAgICAgICB0aGlzLmlkID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jEubm92ZWw4NCI7DQogICAgICAgIHRoaXMuZGV0YWxpSXRlbVR5cGUgPSBEZXRhbGlJdGVtVHlwZS5Ob3ZlbDsNCiAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5wYXJzZXJMYW5ndWFnZSA9ICJlbiI7DQogICAgICAgIHRoaXMubmFtZSA9ICdOb3ZlbDg0JzsNCiAgICAgICAgdGhpcy5kaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNwbGF5TmFtZSA9ICJOb3ZlbC04WCI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vbm92ZWw4NC5jb20vc29ydMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C9sYXRlc3Q/cGFnZT17cH0nOw0KICAgICAgICB0aGlzLnVybCA9ICdodHRwczovL25vdmVsODQuY29tJzsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5zZWFyY2hVcmwgPSAnaHR0cHM6Ly9ub3ZlbDg0LmNvbS9zZWFyY2g/a2V5d29yZD17cX0mcGFnZT17cH0nOw0KICAgICAgICB0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mljb24gPSAnaHR0cHM6Ly9ub3ZlbDg0LmNvbS9pbWcvZmF2aWNvbi5pY28nOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldHRpbmdzKCk7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZ2VucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFjdGlvbiIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBZHVsdCIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTaG91bmVuJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ0hhcmVtJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0NvbWVkeScpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCdNYXJ0aWFsIEFydHMnLCAnTWFydGlhbCtBcnRzJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ1NjaG9vbCBMaWZlJywgJ1NjaG9vbCtMaWZlJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ015c3RlcnknKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2hvdWpvJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ1JvbWFuY2UnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2NpLWZpJyksDQogICAgICAgICAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV3IGxhYmVsVmFsdWUoJ0dlbmRlciBCZW5kZXInLCAnR2VuZGVyK0JlbmRlcicpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCdNYXR1cmUnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRmFudGFzeScpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdIb3Jyb3InKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRHJhbWEnKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnVHJhZ2VkeScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XBlcm5hdHVyYWwnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRWNjaGknKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgnWHVhbmh1YW4nKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQWR2ZW50dXJlJyksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1BzeWNob2xvZ2ljYWwnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnWGlhbnhpYScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdXdXhpYScpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCdIaXN0b3JpY2FsJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NsaWNlIG9mIExpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mUnLCAnU2xpY2Urb2YrTGlmZScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdMb2xpY29uJyksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0FkdWx0JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0pvc2VpJyksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1Nwb3J0cycpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdTbXV0JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ01lY2hhJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoJ1lhb2knKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2hvdW5lbiBBaScsICdTaG91bmVuK0FpJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk1vZGVybiBMaWZlIiwgIm1vZGVybitsaWZlIikNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIF0sDQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLnNvcnRUeXBlcyA9IHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdMYXRlc3QgUmVsZWFzZSBOb3ZlbCcsICdsYXRlc3QnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgnSG90IE5vdmVsJywgJ2hvdCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdDb21wbGV0ZWQgTm92ZWwnLCAnYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029tcGxldGVkJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ01vc3QgUG9wdWxhcicsICdwb3B1bGFyLW5vdmVscMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ycpLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1Z2lucy5maW5kKHggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4geC5uYW1lID09ICJDbGVhbmVyIik7DQogICAgfQ0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgICAgICAgZ2V0U2VjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBbDQogICAgICAgICAgICAgICAgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIkxhdGVzdCIsIHRydWUpLA0KICAgICAgICAgICAgICAgIG5ldyBTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uKCJob3QiLCAiSG90IE5vdmVsIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgImhvdCIpKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigiY29tcGxldGVkIiwgIkNvbXBsZXRlZCBOb3ZlbCIsICJTZWFyY2giLCBmYWxzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwgbmV3IEZpbHRlcih1bmRlZmluZWQsICJjb21wbGV0ZWQiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInBvcHVsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIiLCAiTW9zdCBQb3B1bGFyIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgInBvcHVsYXItbm92ZWxzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikpDQogICAgICAgICAgICBdDQoNCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mluY2x1ZGVzKHgubmFtZSkpOw0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zbGF0ZVNlY3Rpb246IGFzeW5jIGZ1bmN0aW9uIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ChzZWN0aW9uLCBwYWdlKSB7DQogICAgICAgICAgICBpZiAoc2VjdGlvbi5pZGVudGlmaWVyID09ICJMYXRlc3QiKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxhdGVzdChwYWdlKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcy5kZWZhdWx0RmlsdGVyKCksIHBhZ2UpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9LA0KDQogICAgICAgIGRlZmF1bHRGaWx0ZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyKCk7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgZ2VucmVVcmwgPSAiZ2VucmVzL3tnfT9wYWdlPXtwfSIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBwYWdlLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgdmFyIHNvcnRUeXBlVXJsID0gInNvcnQve3N9P3BhZ2U9e3B9Ii51cmkodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy51cmwpLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB2YXIgcSA9IGZpbHRlci5nZW5yZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMubGVuZ3RoID4gMCA/IGdlbnJlVXJsLnJlcGxhY2UoIntnfSIsIGZpbHRlci5nZW5yZXNbMF0pIDogKChmaWx0ZXIuc29ydFR5cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUgJiYgZmlsdGVyLnNvcnRUeXBlICE9ICcnID8gc29ydFR5cGVVcmwucmVwbGFjZSgie3N9IiwgZmlsdGVyLnNvcnRUeXBlKSA6IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVuZGVmaW5lZCkpOw0KICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gcSB8fCB0aGlzLnNlYXJjaFVybC5yZXBsYWNlKCd7cX0nLCBmaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXIudGl0bGUgfHwgIiIpLnJlcGxhY2UoJ3twfScsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB2YXIgY29udGFpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHF1ZXJ5KSk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgnLmxpc3Qtbm92ZWwgLnJvdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ycpLmZvckVhY2goKHgpID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoeC5zZWxlY3QoJ2ltZycpLmF0dHIoInNyYyIpLmhhc1ZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCkpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3IExpZ2h0SMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRlbSh0aGlzLmNsZWFuZXIuaW1hZ2UodGhpcy51cmwsIHguc2VsZWN0KCcubm92ZWwtdGl0bGUgYScpLmF0dHIoImhyZWYiKS51cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mwoKSwgIi5ib29rIGltZyIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCcubm92ZWwtdGl0bGUgYScpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Hguc2VsZWN0KCcubm92ZWwtdGl0bGUgYScpLmF0dHIoImhyZWYiKS51cmwoKSwgdGhpcy5uYW1lDQogICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2hhcHRlcnM6IGFzeW5jIGZ1bmN0aW9uIChub3ZlbFVybCwgaHRtbENvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRhaW5lcikgew0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gW107DQogICAgICAgICAgICB2YXIgdXJsID0gImh0dHBzOi8vbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWw4NC5jb20vYWpheC9jaGFwdGVyLWFyY2hpdmU/bm92ZWxJZD17aWR9Ii5yZXBsYWNlKCJ7aWR9IiwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBodG1sQ29udGFpbmVyLnNlbGVjdCgiI3JhdGluZyIpLmF0dHIoImRhdGEtbm92ZWwtaWQiKS5oYXNWYWx1ZSgpID8NCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zZWxlY3QoIiNyYXRpbmciKS5hdHRyKCJkYXRhLW5vdmVsLWlkIikudGV4dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgpIDoNCiAgICAgICAgICAgICAgICAgICAgaHRtbENvbnRhaW5lci5zZWxlY3QoIltkYXRhLW5vdmVsLWlkXSIpLmF0dHIoImRhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GEtbm92ZWwtaWQiKS50ZXh0KCkpOw0KDQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KDQogICAgICAgICAgICBjb250YWluZXIuZmluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgnLmxpc3QtY2hhcHRlciBhJykuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICBjaGFwdGVycy5wdXNoKG5ldyBDaGFwdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyKHgudGV4dChmYWxzZSksIHguYXR0cigiaHJlZiIpLnVybCgpKSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuIGNoYXB0ZXJzOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldE5vdmVsOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgICAgIHZhciBjaGFwdGVycyA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nMobm92ZWxVcmwsIGNvbnRhaW5lcik7DQogICAgICAgICAgICB2YXIgbm92ZWxSZXZpZXdzID0gbmV3IE5vdmVsUmV2aWV3cygpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdmFyIGluZm9zID0gY29udGFpbmVyLmZpbmQoIi5pbmZvID4gbGkiKTsNCiAgICAgICAgICAgIG5vdmVsUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV2aWV3cy5nZW5yZXMgPSBpbmZvcy5lcSgyKS5maW5kKCJhIikubWFwKHggPT4geC50ZXh0KGZhbHNlKSk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBub3ZlbFJldmlld3MuYXV0aG9yID0gaW5mb3MuZXEoMSkuZmluZCgiYSIpLnRleHQoZmFsc2UpOw0KICAgICAgICAgICAgbm92ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxSZXZpZXdzLnV2b3RlcyA9IGNvbnRhaW5lci5zZWxlY3QoIi5jb2wtaW5mby1kZXNjID4gLmRlc2MgPiAuc21hbGwgc3Ryb25nOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZpcnN0LWNoaWxkIHNwYW4iKS50ZXh0KGZhbHNlKSArICIgLyAxMCI7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuY29tcGxldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVkID0gaW5mb3MubGFzdCgpLnNlbGVjdCgiYSIpLnRleHQoZmFsc2UpID09PSAiQ29tcGxldGVkIiA/ICJTdGF0dXM6Q29tcGxldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVkIiA6ICJTdGF0dXM6T25nb2luZyI7DQoNCiAgICAgICAgICAgIHJldHVybiBuZXcgRGV0YWxpSXRlbSgNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBjb250YWluZXIuc2VsZWN0KCcuYm9vayBpbWcnKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICBjb250YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WluZXIuc2VsZWN0KCcudGl0bGUnKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcuZGVzYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y10ZXh0JykuY2xlYW5Jbm5lckhUTUwoKSwNCiAgICAgICAgICAgICAgICBub3ZlbFVybCwNCiAgICAgICAgICAgICAgICBjaGFwdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVycywNCiAgICAgICAgICAgICAgICBub3ZlbFJldmlld3MsDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgICAgICk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2hhcHRlcjogYXN5bmMgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVuY3Rpb24gKHVybCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW5lci5jbGVhbkNoYXB0ZXIodGhpcy5wYXJzZXIuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpLnNlbGVjdCgnI2Noci1jb250ZW50JMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yksIHRoaXMubmFtZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgbGF0ZXN0OiBhc3luYyBmdW5jdGlvbiAocGFnZSkgew0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIHVybCA9IHRoaXMubGF0ZXN0VXJsLnJlcGxhY2UoJ3twfScsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRIdG1sKHVybCkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJy5saMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN0LW5vdmVsIC5yb3cnKS5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHguc2VsZWN0KCdpbWcnKS5hdHRyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJzcmMiKS5oYXNWYWx1ZSgpKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBMaWdodEl0ZW0oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhbmVyLmltYWdlKHRoaXMudXJsLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB4LnNlbGVjdCgnLm5vdmVsLXRpdGxlIGEnKS5hdHRyKCJocmVmIikudXJsKCksICIuYm9vayBpbWciKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLm5vdmVsLXRpdGxlIGEnKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLm5vdmVsLXRpdGxlIGEnKS5hdHRyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJocmVmIikudXJsKCksIHRoaXMubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSk7DQogICAgICAgICAgICB9KTsNCg0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KDQp9Ow==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQoNCg0KICAgICAgICB0aGlzLmlkID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jEubm92ZWxmdWxsIjsNCiAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldGFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLnBhcnNlckxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ05vdmVsRnVsbCc7DQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuZGlzcGxheU5hbWUgPSAiTm92ZWwtRnVsbHkiOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL25vdmVsZnVsbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5jb20vbGF0ZXN0LXJlbGVhc2Utbm92ZWw/cGFnZT17cH0nOw0KICAgICAgICB0aGlzLnVybCA9ICdodHRwczovL25vdmVsZnVsbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5jb20nOw0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICdodHRwczovL25vdmVsZnVsbC5jb20vc2VhcmNoP2tleXdvcmQ9e3F9JMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhZ2U9e3B9JzsNCiAgICAgICAgdGhpcy5jaGFwdGVyc1VybCA9ICdodHRwczovL25vdmVsZnVsbC5jb20vYWpheC1jaGFwdGVyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9wdGlvbj9ub3ZlbElkPXtpZH0nOw0KICAgICAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FBhZ2luYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLmljb24gPSAnaHR0cHM6Ly9ub3ZlbGZ1bGwuY29tL3dlYi9pbWFnZXMvZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mF2aWNvbi5pY28nOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldHRpbmdzKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ck7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZ2VucmVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1Nob3VuZW4nKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSGFyZW0nKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgnQ29tZWR5JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ01hcnRpYWwgQXJ0cycsICdNYXJ0aWFsK0FydHMnKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2Nob29sIExpZmUnLCAnU2Nob29sK0xpZmUnKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTXlzdGVyeScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTaG91am8nKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUm9tYW5jZScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCdTY2ktZmknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnR2VuZGVyIEJlbmRlcicsICdHZW5kZXIrQmVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ01hdHVyZScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCdGYW50YXN5JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0hvcnJvcicpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdEcmFtYScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdUcmFnZWR5JyksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1N1cGVybmF0dXJhbCcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCdFY2NoaScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdYdWFuaHVhbicpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCdBZHZlbnR1cmUnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUHN5Y2hvbG9naWNhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdYaWFueGlhJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoJ1d1eGlhJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0hpc3RvcmljYWwnKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgnU2xpY2Ugb2YgTGlmZScsICdTbGljZStvZitMaWZlJyksDQogICAgICAgICAgICAgICAgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxhYmVsVmFsdWUoJ0xvbGljb24nKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQWR1bHQnKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSm9zZWknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU3BvcnRzJyksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1NtdXQnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WVjaGEnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnWWFvaScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCdTaG91bmVuIEFpJywgJ1Nob3VuZW4rQWknKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnS+G7syBUwMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU061jaCBWxrDGoW5nIFThu41hJywgJ0vhu7MrVMOtY2grVsawxqFuZytU4buNYScpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCdNVCcpLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Muc29ydFR5cGVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlY3Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0xhdGVzdCBSZWxlYXNlIE5vdmVsJywgJ2xhdGVzdC1yZWxlYXNlLW5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsJyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0hvdCBOb3ZlbCcsICdob3Qtbm92ZWwnKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQ29tcGxldGVkIE5vdmVsJywgJ2NvbXBsZXRlZC1ub3ZlbCcpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdNb3N0IFBvcHVsYXInLCAnbW9zdC1wb3B1bGFyJyksDQogICAgICAgICAgICBdLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9DQoNCg0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbHVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPT0gIkNsZWFuZXIiKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9DQoNCiAgICBQYXJzZXIucHJvdG90eXBlID0gew0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3Rpb24gKGtleXMpIHsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIkxhdGVzdCBVcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GRhdGUiLCAiTGF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImhvdCIsICJIb3QgTm92ZWwiLCAiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCAiaG90LW5vdmVsIikpLA0KICAgICAgICAgICAgICAgIG5ldyBTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uKCJjb21wbGV0ZWQiLCAiQ29tcGxldGVkIE5vdmVsIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CwgImNvbXBsZXRlZC1ub3ZlbCIpKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigicG9wdWxhciIsICJNb3N0IFBvcHVsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCAibW9zdC1wb3B1bGFyIikpDQogICAgICAgICAgICBdDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLmluY2x1ZGVzKHgubmFtZSkpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zbGF0ZVNlY3Rpb246IGFzeW5jIGZ1bmN0aW9uIChzZWN0aW9uLCBwYWdlKSB7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICBpZiAoc2VjdGlvbi5pZGVudGlmaWVyID09ICJMYXRlc3QiKQ0KICAgICAgICAgICAgICAgIHJldHVybiBhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02FpdCB0aGlzLmxhdGVzdChwYWdlKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcy5kZWZhdWx0RmlsdGVyKCksIHBhZ2UpOw0KICAgICAgICB9LA0KDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGRlZmF1bHRGaWx0ZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsdGVyKCk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0sIA0KDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgICAgdmFyIGdlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nJlVXJsID0gImdlbnJlL3tnfT9wYWdlPXtwfSIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLCBwYWdlLnRvU3RyaW5nKCkpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdmFyIHNvcnRUeXBlVXJsID0gIntzfT9wYWdlPXtwfSIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBwYWdlLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgdmFyIHEgPSBmaWx0ZXIuZ2VucmVzLmxlbmd0aCA+IDAgPyBnZW5yZVVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5yZXBsYWNlKCJ7Z30iLCBmaWx0ZXIuZ2VucmVzWzBdKSA6ICgoZmlsdGVyLnNvcnRUeXBlICYmIGZpbHRlci5zb3J0VHlwZSAhPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAnJyA/IHNvcnRUeXBlVXJsLnJlcGxhY2UoIntzfSIsIGZpbHRlci5zb3J0VHlwZSkgOiB1bmRlZmluZWQpKTsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciBxdWVyeSA9IHEgfHwgdGhpcy5zZWFyY2hVcmwucmVwbGFjZSgne3F9JywgZmlsdGVyLnRpdGxlIHx8ICIiKS5yZXBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WNlKCd7cH0nLCBwYWdlLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChxdWVyeSkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJy5saXN0LXRydXllbiAucm93JykuZm9yRWFjaCgoeCkgPT4gew0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGlmICh4LnNlbGVjdCgnaW1nJykuYXR0cigic3JjIikuaGFzVmFsdWUoKSkNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgcmVzdWx0LnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKHRoaXMuY2xlYW5lci5pbWFnZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sh0aGlzLnVybCwgeC5zZWxlY3QoJy50cnV5ZW4tdGl0bGUgYScpLmF0dHIoImhyZWYiKS51cmwoKSwgIi5ib29rIGltZyIpLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCcudHJ1eWVuLXRpdGxlIGEnKS50ZXh0KGZhbHNlKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLnRydXllbi10aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRsZSBhJykuYXR0cigiaHJlZiIpLnVybCgpLCB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICBnZXRDaGFwdGVyczogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsLCBodG1sQ29udGFpbmVyKSB7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgY2hhcHRlcnMgPSBbXTsNCiAgICAgICAgICAgIHZhciB1cmwgPSAiaHR0cHM6Ly9ub3ZlbGZ1bGwuY29tL2FqYXgtYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hhcHRlci1vcHRpb24/bm92ZWxJZD17aWR9Ii5yZXBsYWNlKCJ7aWR9IiwNCiAgICAgICAgICAgICAgICBodG1sQ29udGFpbmVyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlbGVjdCgiI3JhdGluZyIpLmF0dHIoImRhdGEtbm92ZWwtaWQiKS5oYXNWYWx1ZSgpID8NCiAgICAgICAgICAgICAgICAgICAgaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRtbENvbnRhaW5lci5zZWxlY3QoIiNyYXRpbmciKS5hdHRyKCJkYXRhLW5vdmVsLWlkIikudGV4dCgpIDoNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgaHRtbENvbnRhaW5lci5zZWxlY3QoIltkYXRhLW5vdmVsLWlkXSIpLmF0dHIoImRhdGEtbm92ZWwtaWQiKS50ZXh0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkpOw0KDQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KDQogICAgICAgICAgICBjb250YWluZXIuZmluZCgnb3B0aW9uJykuZm9yRWFjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ChhID0+IHsNCiAgICAgICAgICAgICAgICB2YXIgYVVybCA9IGEuYXR0cigidmFsdWUiKS51cmwoKTsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgdGl0bGUgPSBhLnRleHQoZmFsc2UpOw0KICAgICAgICAgICAgICAgIGlmICh1cmwgJiYgdXJsICE9PSAnJykgY2hhcHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nMucHVzaChuZXcgQ2hhcHRlcih0aXRsZSwgYVVybCkpOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHJldHVybiBjaGFwdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyczsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsKSB7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRIdG1sKG5vdmVsVXJsKSk7DQogICAgICAgICAgICB2YXIgY2hhcHRlcnMgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXJzKG5vdmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsLCBjb250YWluZXIpOw0KICAgICAgICAgICAgdmFyIG5vdmVsUmV2aWV3cyA9IG5ldyBOb3ZlbFJldmlld3MoKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHZhciBpbmZvcyA9IGNvbnRhaW5lci5maW5kKCIuaW5mbyA+IGRpdiIpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdlbnJlcyA9IGluZm9zLmVxKDIpLmZpbmQoImEiKS5tYXAoeCA9PiB4LnRleHQoZmFsc2UpKTsNCiAgICAgICAgICAgIG5vdmVsUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV2aWV3cy5hdXRob3IgPSBpbmZvcy5lcSgwKS5maW5kKCJhIikudGV4dChmYWxzZSk7DQogICAgICAgICAgICBub3ZlbFJldmlldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03MudXZvdGVzID0gY29udGFpbmVyLnNlbGVjdCgiLmNvbC1pbmZvLWRlc2MgPiAuZGVzYyA+IC5zbWFsbCBzdHJvbmc6Zmlyc3QtYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hpbGQgc3BhbiIpLnRleHQoZmFsc2UpICsgIiAvIDEwIjsNCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5jb21wbGV0ZWQgPSBpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZvcy5sYXN0KCkuc2VsZWN0KCJhIikudGV4dChmYWxzZSkgPT09ICJDb21wbGV0ZWQiID8gIlN0YXR1czpDb21wbGV0ZWQiIDogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lN0YXR1czpPbmdvaW5nIjsNCg0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhbGlJdGVtKA0KICAgICAgICAgICAgICAgIGNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRhaW5lci5zZWxlY3QoJy5ib29rIGltZycpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoJy50aXRsZScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5kZXNjLXRleHQnKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5jbGVhbklubmVySFRNTCgpLA0KICAgICAgICAgICAgICAgIG5vdmVsVXJsLA0KICAgICAgICAgICAgICAgIGNoYXB0ZXJzLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIG5vdmVsUmV2aWV3cywNCiAgICAgICAgICAgICAgICB0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5kZWZpbmVkLA0KICAgICAgICAgICAgKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAodXJsKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbmVyLmNsZWFuQ2hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSkuc2VsZWN0KCcjY2hhcHRlci1jb250ZW50JyksIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMubmFtZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgbGF0ZXN0OiBhc3luYyBmdW5jdGlvbiAocGFnZSkgew0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdmFyIHVybCA9IHRoaXMubGF0ZXN0VXJsLnJlcGxhY2UoJ3twfScsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G1sKHVybCkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJy5saXN0LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRydXllbiAucm93JykuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgICAgICAgIGlmICh4LnNlbGVjdCgnaW1nJykuYXR0cigicMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JjIikuaGFzVmFsdWUoKSkNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5lci5pbWFnZSh0aGlzLnVybCwgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5zZWxlY3QoJy50cnV5ZW4tdGl0bGUgYScpLmF0dHIoImhyZWYiKS51cmwoKSwgIi5ib29rIGltZyIpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIHguc2VsZWN0KCcudHJ1eWVuLXRpdGxlIGEnKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnLnRydXllbi10aXRsZSBhJykuYXR0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0igiaHJlZiIpLnVybCgpLCB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICkpOw0KICAgICAgICAgICAgfSk7DQoNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICB9DQoNCg0KDQogICAgcmV0dXJuIG5ldyBQYXJzZXIoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCg0KfTs=&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KDQogICAgICAgIHRoaXMuY2xlYW5lciA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HBsdWdpbnMuZmluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KDQogICAgICAgIHRoaXMuaWQgPSAiMS5ub3ZlbGhhbGwiOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLnBhcnNlckxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ05vdmVsSGFsbCc7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSAiTm92ZWwtQ2hhbm5lbCINCiAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL3d3dy5ub3ZlbGhhbGwuY29tL2xhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03R1cGRhdGUte3B9Lmh0bWwnOw0KICAgICAgICB0aGlzLnVybCA9ICdodHRwczovL3d3dy5ub3ZlbGhhbGwuY29tLyc7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHRoaXMuc2VhcmNoVXJsID0gJ2h0dHBzOi8vd3d3Lm5vdmVsaGFsbC5jb20vaW5kZXgucGhwP3M9c28mbW9kdWxlPWJvb2smaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V5d29yZD17cX0nOw0KICAgICAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024gPSB0cnVlOw0KICAgICAgICB0aGlzLmljb24gPSAnaHR0cHM6Ly93d3cubm92ZWxoYWxsLmNvbS9mYXZpY29uLmljbyc7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MgPSBuZXcgUGFyc2VyU2VhcmNoU2V0dGluZ3MoKTsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgIF0sDQogICAgICAgIH07DQoNCg0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNldHRpbmdzLnNvcnRUeXBlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdDb21wbGV0ZWQnLCAnY29tcGxldGVkLXtwfS5odG1sJyksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQoNCiAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9hZFNldHRpbmdzOiBhc3luYyBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmICh0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcy52YWx1ZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICAgICAgcmV0dMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJuOw0KICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh0aGlzLnVybCkudGhlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ihodG1sID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGh0bWwpDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCIuZHJvcGRvd24tbWVudSBhIikud2hlcmUoeCA9PiB4LmF0dHIoImhyZWYiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5hdHRWYWx1ZSgpLmluZGV4T2YoImdlbnJlIikgIT09IC0xKS5mb3JFYWNoKGEgPT4gew0KICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMudmFsdWVzLnB1c2gobmV3IGxhYmVsVmFsdWUoYS50ZXh0KGZhbHNlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwgYS5hdHRyKCJocmVmIikudXJsKCkpKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSkNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygpOw0KICAgICAgICAgICAgfQ0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB9LA0KDQoNCiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgICAgICAgICB2YXIgc2VjdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nMgPSBbDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIkxhdGVzdCIsIHRydMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJjb21wbGV0ZWQiLCAiQ29tcGxldGVkIE5vdmVsIiwgIlNlYXJjaCIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgJ2NvbXBsZXRlZC17cH0uaHRtbCcpKSwNCiAgICAgICAgICAgIF0NCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHJldHVybiBzZWN0aW9ucy5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLmluY2x1ZGVzKHgubmFtZSkpOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9LA0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikgcmV0dXJuIGF3YWl0IHRoaXMubGF0ZXN0KHBhZ2UpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgZWxzZSByZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcy5kZWZhdWx0RmlsdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CksIHBhZ2UpOw0KICAgICAgICB9LA0KICAgICAgICBkZWZhdWx0RmlsdGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgZmlsdGVyID0gbmV3IEZpbHRlcigpOw0KICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjsNCiAgICAgICAgfSwNCg0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBnZXRHZW5yZXM6IGFzeW5jIGZ1bmN0aW9uIChmaWx0ZXIpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSBmaWx0ZXIuZ2VucmVzWMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zBdOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHJldHVybiBjb250YWluZXIuZmluZCgnLmJvb2staW5mbycpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m1hcCgoeCkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlnaHRJdGVtKHguY2xvc2VzdCgibGkiKS5zZWxlY3QoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5ib29rLWltZyBpbWciKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoJ2EnKS50ZXh0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlKSwNCiAgICAgICAgICAgICAgICAgICAgJycsDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCdhJykuYXR0cigiaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJlZiIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQoNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGlmIChmaWx0ZXIuZ2VucmVzICYmIGZpbHRlci5nZW5yZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJldHVybiBhd2FpdCB0aGlzLmdldEdlbnJlcyhmaWx0ZXIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHVybCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuc2VhcmNoVXJsOw0KICAgICAgICAgICAgaWYgKGZpbHRlci5zb3J0VHlwZSAmJiBmaWx0ZXIuc29ydFR5cGUubGVuZ3RoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D4gMCkNCiAgICAgICAgICAgICAgICB1cmwgPSBmaWx0ZXIuc29ydFR5cGUudXJpKHRoaXMudXJsKTsNCg0KICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFyIHVybCA9IHVybC5yZXBsYWNlKCJ7cX0iLCBmaWx0ZXIudGl0bGUgfHwgIiIpLnJlcGxhY2UoIntwfSIsIHBhZ2UpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CcuY29udGFpbmVyIHRhYmxlIHRyJykuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgICAgICAgIHZhciBhID0geC5maW5kKCJ0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIpLmVxKDApLnNlbGVjdCgiYSIpLmF0dHIoImhyZWYiKS50ZXh0KCkuaW5kZXhPZigiZ2VucmUiKSA9PT0gLTEgPyB4LmZpbmQoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRkIikuZXEoMCkuc2VsZWN0KCJhIikgOiB4LmZpbmQoInRkIikuZXEoMSkuc2VsZWN0KCJhIik7DQogICAgICAgICAgICAgICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzdWx0LnB1c2gobmV3IExpZ2h0SXRlbSh0aGlzLmNsZWFuZXIuaW1hZ2UodGhpcy51cmwsIGEuYXR0cigiaHJlZiIpLnVybCgpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiLmJvb2staW1nIGltZyIpLCBhLnRleHQoZmFsc2UpLCAnJywgYS5hdHRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZSkpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KDQogICAgICAgIGdldE5vdmVsOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgICAgIHZhciBjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFwdGVycyA9IGNvbnRhaW5lci5maW5kKCIjbW9yZWxpc3QgbGkgYSIpLm1hcCh4ID0+IG5ldyBDaGFwdGVyKHgudGV4dChmYWxzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SksIHguYXR0cigiaHJlZiIpLnVybCgpKSk7DQogICAgICAgICAgICB2YXIgaXRlbSA9IG5ldyBOb3ZlbFJldmlld3MoKTsNCg0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgaXRlbS5nZW5yZXMgPSBjb250YWluZXIuZmluZCgiLmJvb2staW5mbyAucmVkIikudGV4dEFycmF5KCk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBpdGVtLmF1dGhvciA9IGNvbnRhaW5lci5maW5kKCIuYm9vay1pbmZvIC5ibHVlIikud2hlcmUoeCA9PiB4LmlubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVySFRNTCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYXV0aG9yIikgIT0gLTEpLmVxKDApLnJlbW92ZSgicCIpLnRleHQoZmFscMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UpLnJlcGxhY2UoL2F1dGhvcjovZ2ksICIiKTsNCiAgICAgICAgICAgIGl0ZW0uY29tcGxldGVkID0gY29udGFpbmVyLmZpbmQoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5ib29rLWluZm8gLmJsdWUiKS53aGVyZSh4ID0+IHguaW5uZXJIVE1MKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJzdGF0dXMiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAhPSAtMSkudGV4dChmYWxzZSkucmVwbGFjZSgvc3RhdHVzOi9naSwgIiIpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlJdGVtKGNvbnRhaW5lci5zZWxlY3QoJy5ib29rLWltZyBpbWcnKS5hdHRyKCJzcmMiKS51cmwoKQ0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CwgY29udGFpbmVyLnNlbGVjdCgnLmJvb2staW5mbyBoMScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5maW5kKCcuaW50cm8gPiBzcGFuJykucmVtb3ZlKCIuYmx1ZSIpLmxhc3QoKS5jbGVhbklubmVySFRNTCgpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5vdmVsVXJsLA0KICAgICAgICAgICAgICAgIGNoYXB0ZXJzLA0KICAgICAgICAgICAgICAgIGl0ZW0sDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCk7DQogICAgICAgIH0sDQogICAgICAgIGdldENoYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XB0ZXI6IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYW5DaGFwdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKS5zZWxlY3QoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5lbnRyeS1jb250ZW50JyksIHRoaXMubmFtZSk7DQogICAgICAgIH0sDQogICAgICAgIGxhdGVzdDogYXN5bmMgZnVuY3Rpb24gKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HBhZ2UpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmxhdGVzdFVybC5yZXBsYWNlKCd7cH0nLCBwYWdlLnRvU3RyaW5nKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIHZhciByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQgPSBbXTsNCiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCcuY29udGFpbmVyIHRhYmxlIHRyJykuZm9yRWFjaCgoeCkgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4gew0KICAgICAgICAgICAgICAgIHZhciBhID0geC5maW5kKCJ0ZCIpLmVxKDEpLnNlbGVjdCgiYSIpOw0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHJlc3VsdC5wdXNoKG5ldyBMaWdodEl0ZW0odGhpcy5jbGVhbmVyLmltYWdlKHRoaXMudXJsLCBhLmF0dHIoImhyZWYiKS51cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mwoKSwgIi5ib29rLWltZyBpbWciKSwgYS50ZXh0KGZhbHNlKSwgJycsIGEuYXR0cigiaHJlZiIpLnVybCgpLCB0aGlzLm5hbWUpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQogICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIG5ldyBQYXJzZXIoKTsNCn07&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KICAgIGZ1bmN0aW9uIFBhcnNlcigpIHsNCiAgICAgICAgdGhpcy5yb290ID0gImh0dHBzOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i8vd3d3Lm5vdmVsdXBkYXRlcy5jb20iOw0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbHVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T0gIkNsZWFuZXIiKTsNCiAgICAgICAgdGhpcy5jbGllbnROYW1lID0iaW5mb3JtYXRpb24iOw0KICAgIH0NCg0KICAgIFBhcnNlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5wcm90b3R5cGUgPSB7DQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKG5hbWUpIHsNCiAgICAgICAgICAgIHRyeSB7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgaWYgKCFuYW1lKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIGh0bWwgPSBhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuY2xpZW50TmFtZSkucG9zdEZvcm0oIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mh0dHBzOi8vd3d3Lm5vdmVsdXBkYXRlcy5jb20vd3AtYWRtaW4vYWRtaW4tYWpheC5waHAiLCB7IGFjdGlvbjogIm5kX2FqYXhzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2htYWluIiwgc3RyVHlwZTogImRlc2t0b3AiLCBzdHJPbmU6IG5hbWUsIHN0clNlYXJjaFR5cGU6ICJzZXJpZXMiIH0pOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBwYXJzZUh0bWwoaHRtbCwgdGhpcy5yb290KS5maW5kKCJhIik7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci53aGVyZSh4ID0+IG5hbWUudHJpbSgpLmxlbmd0aCA+PSAoeC5zZWxlY3QoIi5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hfaGwiKS5oYXNFbGVtZW50KCkgPyB4LnNlbGVjdCgiLnNlYXJjaF9obCIpIDogeC5zZWxlY3QoInNwYW4iKSkudGV4dChmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSkudHJpbSgpLmxlbmd0aCAmJiAoKHguc2VsZWN0KCIuc2VhcmNoX2hsIikuaGFzRWxlbWVudCgpID8geC5zZWxlY3QoIi5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hfaGwiKSA6IHguc2VsZWN0KCJzcGFuIikpLnRleHQoZmFsc2UpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihuYW1lLnRvTG93ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJDYXNlKCkpICE9IC0xKSkuYXR0cigiaHJlZiIpLnVybCgpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRCeUF1dGhvcjogYXN5bmMgZnVuY3Rpb24gKHVybCkgew0KICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFyIGNvbnRhaW5lciA9IHBhcnNlSHRtbCgoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmNsaWVudE5hbWUpLmdldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Eh0bWwodXJsKSksIHRoaXMucm9vdCk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIuZmluZCgiLnNlYXJjaF9tYWluX2JveF9udSIpLmZvckVhY2goeCA9PiB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgIG5ldyBMaWdodEl0ZW0oeC5zZWxlY3QoIi5zZWFyY2hfaW1nX251IGltZyIpLmF0dHIoInNyYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yIpLnVybCgpLCB4LnNlbGVjdCgiLnNlYXJjaF90aXRsZSBhIikudGV4dChmYWxzZSksICIiLCB4LnNlbGVjdCgiLnNlYXJjaF90aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRsZSBhIikuYXR0cigiaHJlZiIpLnVybCgpLCAiIikNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICB9KTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0RGV0YWxpSXRlbTogYXN5bmMgZnVuY3Rpb24gKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5vdmVsTmFtZSkgew0KICAgICAgICAgICAgdmFyIHVybCA9IGF3YWl0IHRoaXMuc2VhcmNoKG5vdmVsTmFtZSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBpZiAoIXVybCkNCiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgY29udGFpbmVyID0gcGFyc2VIdG1sKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5jbGllbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nROYW1lKS5nZXRIdG1sKHVybCksIHRoaXMucm9vdCk7DQogICAgICAgICAgICAgICAgdmFyIHRpdGVtID0gbmV3IE5vdmVsUmV2aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WV3cygpOw0KDQogICAgICAgICAgICAgICAgdGl0ZW0uZ2VucmVzID0gY29udGFpbmVyLmZpbmQoIiNzZXJpZXNnZW5yZSBhIikudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV4dEFycmF5KCk7DQogICAgICAgICAgICAgICAgdGl0ZW0uZGVzY3JpcHRpb24gPSBjb250YWluZXIuc2VsZWN0KCIjZWRpdGRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02NyaXB0aW9uIikudGV4dCh0cnVlKTsNCiAgICAgICAgICAgICAgICB0aXRlbS51dm90ZXMgPSBjb250YWluZXIuc2VsZWN0KCIudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XZvdGVzIikudGV4dChmYWxzZSk7DQogICAgICAgICAgICAgICAgdGl0ZW0uYWx0ZXJuYXRpdmVOYW1lcyA9IGNvbnRhaW5lci5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoIiNlZGl0YXNzb2NpYXRlZCIpLnRleHQoZmFsc2UpLnJlcGxhY2UoLzxicj4vLCAiLCIpOw0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpdGVtLmF1dGhvciA9IGNvbnRhaW5lci5maW5kKCJkaXYjc2hvd2F1dGhvcnMgPiBhIikudGV4dChmYWxzZSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdGl0ZW0ubGFuZyA9IGNvbnRhaW5lci5zZWxlY3QoIiNzaG93bGFuZyA+IGEiKS50ZXh0KGZhbHNlKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHRpdGVtLmNvbXBsZXRlZCA9IGNvbnRhaW5lci5zZWxlY3QoIiNzaG93dHJhbnNsYXRlZCA+IGEiKS50ZXh0KGZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlKSA9PT0gIlllcyIgPyAiU3RhdHVzOiBDb21wbGV0ZWQiIDogIlN0YXR1czogT25nb2luZyI7DQogICAgICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Gl0ZW0uYXV0aG9yVXJsID0gY29udGFpbmVyLnNlbGVjdCgiZGl2I3Nob3dhdXRob3JzID4gYSIpLmF0dHIoImhyZWYiKS50ZXh0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlKTsNCiAgICAgICAgICAgICAgICB0aXRlbS5yZWN1bW1lbmRhdGlvbnMgPSBjb250YWluZXIuZmluZCgiLndwYl93cmFwcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyIC5nZW5yZSIpLndoZXJlKHggPT4gKHguYXR0cigidGl0bGUiKS50ZXh0KGZhbHNlKSkuaW5kZXhPZigiUmVjb21tZW5kZWQiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA+IC0xKS5tYXAoeCA9PiB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlnaHRJdGVtKHRoaXMuY2xlYW5lci5pbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFnZSh0aGlzLnJvb3QsIHguYXR0cigiaHJlZiIpLnRleHQoZmFsc2UpLnVyaSh0aGlzLnJvb3QpLCAiLnNlcmllc2ltZyBpbWciLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAic3JjIiksIHgudGV4dChmYWxzZSksICIiLCB4LmF0dHIoImhyZWYiKS50ZXh0KCkudXJpKHRoaXMucm9vdCksICIiKQ0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgaWYgKCF0aXRlbS5nZW5yZXMgfHwgdGl0ZW0uZ2VucmVzLmxlbmd0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA8PSAwKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIHRpdGVtLnVybCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybDsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGl0ZW07DQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KfQ0K&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KICAgIGZ1bmN0aW9uIFBhcnNlcigpIHsNCiAgICAgICAgdGhpcy5jbGVhbmVyID0gcGx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02lucy5maW5kKHggPT4geC5uYW1lID09ICJDbGVhbmVyIik7DQogICAgICAgIHRoaXMuaWQgPSAiMS5ub3ZlbG9ubGluZWZ1bGwiOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIHRoaXMucGFyc2VyTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnTm92ZWxPbmxpbmVGdWxsJzsNCiAgICAgICAgdGhpcy5kaXNwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF5TmFtZSA9ICJOb3ZlbC1PbmxpbmUiDQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vbm92ZWxvbmxpbmVmdWxsLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNvbS9ub3ZlbF9saXN0P3R5cGU9bGF0ZXN0JmNhdGVnb3J5PWFsbCZzdGF0ZT1hbGwmcGFnZT17cH0nOw0KICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVybCA9ICdodHRwczovL25vdmVsb25saW5lZnVsbC5jb20vJzsNCiAgICAgICAgdGhpcy5zZWFyY2hVcmwgPSAnaHR0cHM6Ly9ubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZlbG9ubGluZWZ1bGwuY29tL3NlYXJjaF9ub3ZlbHMve3F9P3BhZ2U9e3B9JzsNCiAgICAgICAgdGhpcy5wYW5pbmF0aW9uID0gdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMuaWNvbiA9ICdodHRwczovLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU025vdmVsb25saW5lZnVsbC5jb20vdGhlbWVzL2hvbWUvaW1hZ2VzL2Zhdmljb24ucG5nJzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdzLm11bHRpU2VsZWN0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgiQWxsIiwgImFsbCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDaGluZXNlIiwgMyksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkVuZ2xpc2giLCA2KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgiS29yZWFuIiwgMTMpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJPcmlnaW5hbCIsIDE5KSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWN0aW9uIiwgMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFkdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVudHVyZSIsIDIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb21lZHkiLCA0KSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBuZXcgbGFiZWxWYWx1ZSgiRHJhbWEiLCA1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRmFudGFzeSIsIDcpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJHZW5kZXIgQmVuZGVyIiwgOCksDQogICAgICAgICAgICAgICAgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxhYmVsVmFsdWUoIkhhcmVtIiwgOSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhpc3RvcmljYWwiLCAxMCksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhvcnJvciIsIDExKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgiSm9zZWkiLCAxMiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkxvbGljb24iLCAxNCksDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk1hcnRpYWwgQXJ0cyIsIDE1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgiTWF0dXJlIiwgMTYpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNZWNoYSIsIDE3KSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiTXlzdGVyeSIsIDE4KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUHN5Y2hvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9naWNhbCIsIDIwKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUmVpbmNhcm5hdGlvbiIsIDIxKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUm9tYW5jZSIsIDIyKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02Nob29sIExpZmUiLCAyMyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNjaS1maSIsIDI0KSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2VpbmVuIiwgMjUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTaG90YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WNvbiIsIDI2KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2hvdWpvIiwgMjcpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCJTaG91am8gQWkiLCAyOCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNob3VuZW4iLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAyOSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNob3VuZW4gQWkiLCAzMCksDQogICAgICAgICAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV3IGxhYmVsVmFsdWUoIlNsaWNlIG9mIExpZmUiLCAzMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNtdXQiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAzMiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNwb3J0cyIsIDMzKSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiU3VwZXJuYXR1cmFsIiwgMzQpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJUcmFnZWR5IiwgMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJWaXJ0dWFsIFJlYWxpdHkiLCAzNiksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoIld1eGlhIiwgMzcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJYaWFueGlhIiwgMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zgpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJYdWFuaHVhbiIsIDM5KSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiQXJ0cyIsIDQwKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQmlvZ3JhcGhpZXMiLCA0MSksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkJ1c2luZXNzIiwgNDIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCJDb21wdXRlcnMiLCA0MyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkVkdWNhdGlvbiIsIDQ2KSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRW50ZXJ0YWlubWVudCIsIDQ3KSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiRmljdGlvbiIsIDQ4KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiSHVtb3IiLCA1MSksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkludmVzdGluZyIsIDUyKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgiTGl0ZXJhdHVyZSIsIDUzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTWVtb2lycyIsIDU0KQ0KDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBdDQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLnNvcnRUeXBlcyA9IHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCdMYXRlc3QnLCAnbGF0ZXN0JyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ05ld2VzdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CcsICduZXdlc3QnKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnVG9wIHZpZXcnLCAndG9wdmlldycpDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBdLA0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQogICAgICAgIGdldFNlY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU025zOiBmdW5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIG5ldyBTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0aW9uKCJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbigibmV3ZXN0IiwgIk5ld2VzdCBOb3ZlbCIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsICJuZXdlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInRvcCIsICJUb3AgdmlldyIsICJTZWFyY2giLCBmYWxzZSwgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlcih1bmRlZmluZWQsICJ0b3B2aWV3IikpDQogICAgICAgICAgICBdDQoNCiAgICAgICAgICAgIHJldHVybiBzZWN0aW9ucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5maWx0ZXIoeCA9PiAha2V5cyB8fCBrZXlzLmluY2x1ZGVzKHgubmFtZSkpOw0KICAgICAgICB9LA0KDQogICAgICAgIHRyYW5zbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF0ZVNlY3Rpb246IGFzeW5jIGZ1bmN0aW9uIChzZWN0aW9uLCBwYWdlKSB7DQogICAgICAgICAgICBpZiAoc2VjdGlvbi5pZGVudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlmaWVyID09ICJMYXRlc3QiKQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxhdGVzdChwYWdlKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5kZWZhdWx0RmlsdGVyKCksIHBhZ2UpOw0KICAgICAgICB9LA0KDQogICAgICAgIGRlZmF1bHRGaWx0ZXI6IGZ1bmN0aW9uICgpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HsNCiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsdGVyKFsiYWxsIl0sICJ0b3B2aWV3Iik7DQogICAgICAgIH0sDQoNCg0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBzZWFyY2g6IGFzeW5jIGZ1bmN0aW9uIChmaWx0ZXIsIHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciBzb3J0VHlwZVVyaSA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJodHRwczovL25vdmVsb25saW5lZnVsbC5jb20vbm92ZWxfbGlzdD90eXBlPXtzfSZjYXRlZ29yeT17Z30mc3RhdGU9YWxsJnBhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02U9e3B9Ig0KICAgICAgICAgICAgdmFyIHNvcnRUeXBlVXJsID0gc29ydFR5cGVVcmkucmVwbGFjZSgie3N9IiwgZmlsdGVyLnNvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRUeXBlKS5yZXBsYWNlKCJ7cH0iLCBwYWdlLnRvU3RyaW5nKCkpLnJlcGxhY2UoIntnfSIsIGZpbHRlci5nZW5yZXMubGVuZ3RoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D4gMCA/IGZpbHRlci5nZW5yZXNbMF0gOiAiYWxsIik7DQoNCiAgICAgICAgICAgIHZhciB1cmwgPSAoIWZpbHRlci50aXRsZSB8fMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBmaWx0ZXIudGl0bGUgPT0gIiIpICYmIGZpbHRlci5zb3J0VHlwZSAmJiBmaWx0ZXIuc29ydFR5cGUgIT0gJycgPyBzb3J0VHlwZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0VVybCA6IHRoaXMuc2VhcmNoVXJsLnJlcGxhY2UoJ3txfScsIChmaWx0ZXIudGl0bGUgfHwgIiIpLnJlcGxhY2UoL1sgXS8sICJfIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikpOw0KDQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFpbmVyLmZpbmQoIi51cGRhdGVfaXRlbSwgLml0ZW11cGRhdGUiKS5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgIHJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VsdC5wdXNoKG5ldyBMaWdodEl0ZW0oeC5zZWxlY3QoImltZyIpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB4LnNlbGVjdCgiaW1nIikuYXR0cigiYWx0IHwgdGl0bGUiKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIsDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCJhIikuYXR0cigiaHJlZiIpLnVybCgpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB0aGlzLm5hbWUpKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0sDQoNCiAgICAgICAgZ2V0Tm92ZWw6IGFzeW5jIGZ1bmN0aW9uIChub3ZlbFVybCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkpOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gY29udGFpbmVyLmZpbmQoIi5jaGFwdGVyLWxpc3QgLnJvdyBhIikubWFwKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HggPT4gbmV3IENoYXB0ZXIoeC50ZXh0KGZhbHNlKSwgeC5hdHRyKCJocmVmIikudXJsKCkpKTsNCiAgICAgICAgICAgIHZhciBubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZlbFJldmlld3MgPSBuZXcgTm92ZWxSZXZpZXdzKCk7DQogICAgICAgICAgICB2YXIgaW5mb3MgPSBjb250YWluZXIuZmluZCgiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRydXllbl9pbmZvX3JpZ2h0IGxpIikNCg0KDQogICAgICAgICAgICBub3ZlbFJldmlld3MuZ2VucmVzID0gaW5mb3MuZXEoMikuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mluZCgiYSIpLnRleHRBcnJheSgpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmF1dGhvciA9IGluZm9zLmVxKDEpLmZpbmQoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mEiKS50ZXh0KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gaW5mb3MuZXEoNikudGV4dChmYWxzZSk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBub3ZlbFJldmlld3MuZGVzY3JpcHRpb24gPSBpbmZvcy5zZWxlY3QoIiNub2lkdW5nbSIpLnRleHQoZmFsc2UpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZCA9IGluZm9zLmVxKDMpLnNlbGVjdCgiYSIpLnRleHQoZmFsc2UpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D09PSAiQ29tcGxldGVkIiA/ICJTdGF0dXM6Q29tcGxldGVkIiA6ICJTdGF0dXM6T25nb2luZyI7DQoNCiAgICAgICAgICAgIHJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybiBuZXcgRGV0YWxpSXRlbSgNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCIuaW5mb19pbWFnZSBpbWciKS5hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcudHJ1eWVuX2luZm9fcmlnaHQgaDEnKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcjbm9pZHVuZ20nKS5jbGVhbklubmVySFRNTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgpLA0KICAgICAgICAgICAgICAgIG5vdmVsVXJsLA0KICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBub3ZlbFJldmlld3MsDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lZCwNCiAgICAgICAgICAgICk7DQogICAgICAgIH0sDQoNCg0KICAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbmVyLmNsZWFuQ2hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdCB0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSkuc2VsZWN0KCIudnVuZ19kb2MiKSwgdGhpcy5uYW1lKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgfSwNCg0KICAgICAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsID0gdGhpcy5sYXRlc3RVcmwucmVwbGFjZSgie3B9IiwgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhciBjb250YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgiLnVwZGF0ZV9pdGVtIikuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKS5hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoImltZyIpLmF0dHIoInRpdGxlIikudGV4dChmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSksDQogICAgICAgICAgICAgICAgICAgICIiLA0KICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiYSIpLmF0dHIoImhyZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lKSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KfQ==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQoNCg0KICAgICAgICB0aGlzLmlkID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jEubm92ZWxzdG9kYXkiOw0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHRoaXMucGFyc2VyTGFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnTm92ZWxTdG9kYXknOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB0aGlzLmRpc3BsYXlOYW1lID0gIk5vdmVsLVN0IjsNCiAgICAgICAgdGhpcy5sYXRlc3RVcmwgPSAnaHR0cHM6Ly9ub3ZlbHN0bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02RheS5jb20vbmV3LXJlbGVhc2VzP3BhZ2U9e3B9JzsNCiAgICAgICAgdGhpcy51cmwgPSAnaHR0cHM6Ly9ub3ZlbHN0b2RheS5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU020nOw0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICdodHRwczovL25vdmVsc3RvZGF5LmNvbS9zZWFyY2g/cT17cX0mcGFnZT17cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0nOw0KICAgICAgICB0aGlzLmdlbnJlc1VybCA9ICdodHRwczovL25vdmVsc3RvZGF5LmNvbS9nZW5yZS97Z30/cGFnZT17cH0nDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIHRoaXMucGFuaW5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaXMuc2VhcmNoUGFnaW5hdGlvbiA9IHRydWU7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHRoaXMuaWNvbiA9ICdodHRwczovL25vdmVsc3RvZGF5LmNvbS9pbWcvaWNvL2Zhdmljb24tMTZ4MTYucG5nJzsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdBZHZlbnR1cmUnLCAiYWR2ZW50dXJlIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0NsYXNzaWMnLCAiY2xhc3NpYyIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCdCaWxsaW9uYWlyZScsICJiaWxsaW9uYWlyZSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdDaHJpc3RpYW4nLCAiY2hyaXN0aWFuIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0ZhbnRhc3knLCAiZmFudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFzeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIaXN0b3JpY2FsJywgImhpc3RvcmljYWwiKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnSG9ycm9yJywgImhvcnJvciIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCdNeXN0ZXJ5JywgIm15c3RlcnkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTmV3IEFkdWx0JywgIm5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y1hZHVsdCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdSb21hbmNlJywgInJvbWFuY2UiKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU2NpZW5jZSBGaWN0aW9uJywgInNjaWVuY2UtZmljdGlvbiIpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCdUaHJpbGxlcicsICJ0aHJpbGxlciIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdZb3VuZyBBZHVsdCcsICJ5b3VuZy1hZHVsdCIpLA0KICAgICAgICAgICAgXSwNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmNsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFuZXIgPSBwbHVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPT0gIkNsZWFuZXIiKTsNCiAgICB9DQoNCiAgICBQYXJzZXIucHJvdG90eMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XBlID0gew0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3Rpb24gKGtleXMpIHsNCiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIkxhdGVzdCBVcGRhdGUiLCAiTGF0ZXN0IiwgdHJ1ZSksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImJpbGxpb25haXJlIiwgIkJpbGxpb25haXJlIE5vdmVsIiwgIlNlYXJjaCIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlLCBuZXcgRmlsdGVyKFsiYmlsbGlvbmFpcmUiXSkpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJuZXctYWR1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HQiLCAiTmV3IEFkdWx0IE5vdmVsIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsibmV3LWFkdWx0Il0pKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgU2VjdGlvbigicm9tYW5jZSIsICJSb21hbmNlIFBvcHVsYXIiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXIoWyJyb21hbmNlIl0pKQ0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocGFnZSk7DQogICAgICAgICAgICBlbHNlDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdGVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICByZXR1cm4gbmV3IEZpbHRlcigpOw0KICAgICAgICB9LA0KDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlciwgcGFnZSkgew0KICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuc2VhcmNoVXJsLnJlcGxhY2UoIntwfSIsIHBhZ2UpLnJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxhY2UoIntxfSIsIGZpbHRlci50aXRsZSk7DQogICAgICAgICAgICBpZiAoZmlsdGVyLmdlbnJlcyAmJiBmaWx0ZXIuZ2VucmVzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mxlbmd0aCA+IDApDQogICAgICAgICAgICAgICAgdXJsID0gdGhpcy5nZW5yZXNVcmwucmVwbGFjZSgie3B9IiwgcGFnZSkucmVwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFjZSgie2d9IiwgZmlsdGVyLmdlbnJlcy5sYXN0KCkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQgPSBbXTsNCiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCcudGFibGUudGFidHJ1eWVuIHRyJykuZm9yRWFjaCgoeCkgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0T4gew0KICAgICAgICAgICAgICAgIGlmICh4LnNlbGVjdCgnaW1nJykuYXR0cigic3JjIikuaGFzVmFsdWUoKSkNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgcmVzdWx0LnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WciKS5hdHRyKCJzcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnaDMgYScpLnRleHQoZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsc2UpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WN0KCdoMyBhJykuYXR0cigiaHJlZiIpLnVybCgpLCB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCg0KICAgICAgICBnZXRDaGFwdGVyczogYXN5bmMgZnVuY3Rpb24gKHVybCkgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ht9Ow0KICAgICAgICAgICAgdmFyIHBhZ2UgPSAxOw0KDQogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgew0KDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdmFyIHBVcmwgPSB1cmwgKyAiP3A9e3BhZ2V9I2NoYXB0ZXJMaXN0IjsNCiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMucGFyc2VyLnJlbmRlckNvdW50ZXJDYWxscyhwYWdlLCBwVXJsKTsNCiAgICAgICAgICAgICAgICBwYWdlID0gaXRlbS5wYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WdlOw0KICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChpdGVtLnByb21pc2VzKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgYnJlYWtJdCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goeCA9PiB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgIGlmICghYnJlYWtJdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYXJzZXIuanEoeCkuZmluZCgiI2NoYXB0ZXItbGlzdCBhIik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mhhc0VsZW1lbnRzKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha0l0ID0gdHJ1ZTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdEEgPSBpdGVtcy5yZWR1Y2UoKGFyciwgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyclt4LnRleHQoKSArIHguYXR0cigiaHJlZiIpLnVybCgpXSA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBDaGFwdGVyKHgudGV4dChmYWxzZSksIHguYXR0cigiaHJlZiIpLnVybCgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0H0sIHt9KTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyc2VyLnZhbGlkYXRlQ2hhcHRlcnMocmVzdWx0QMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwgcmVzdWx0KSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrSXQgPSB0cnVlOw0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIGlmIChicmVha0l0KQ0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgfQ0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgcmV0dXJuIE9iamVjdC52YWx1ZXMocmVzdWx0KTsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb24gKG5vdmVsVXJsKSB7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKG5vdmVsVXJsKSk7DQogICAgICAgICAgICB2YXIgY2hhcHRlcnMgPSBhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02FpdCB0aGlzLmdldENoYXB0ZXJzKG5vdmVsVXJsKTsNCiAgICAgICAgICAgIHZhciBub3ZlbFJldmlld3MgPSBuZXcgTm92ZWxSZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XZpZXdzKCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuZ2VucmVzID0gY29udGFpbmVyLmZpbmQoIltpdGVtcHJvcD0nZ2VucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mUnXSIpLm1hcCh4ID0+IHguYXR0cigiY29udGVudCIpLnRleHQoKS5zcGxpdCgiLyIpLmxhc3QoKSk7DQogICAgICAgICAgICBubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZlbFJldmlld3MuYXV0aG9yID0gY29udGFpbmVyLnNlbGVjdCgiW2l0ZW1wcm9wPSdhdXRob3InXSBbaXRlbXByb3A9J25hbWUnXMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIpLmF0dHIoImNvbnRlbnQiKS50ZXh0KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gY29udGFpbmVyLnNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdCgiLnJhdGUgI3JhdGVWYWwiKS5hdHRyKCJ2YWx1ZSIpLnRleHQoKSArICIgLyAxMCI7DQogICAgICAgICAgICBub3ZlbFJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlld3MuY29tcGxldGVkID0gIlN0YXR1czp1bmtub3duIjsNCg0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhbGlJdGVtKA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5ib29rIGltZycpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIGNvbnRhaW5lci5zZWxlY3QoIi5oMXRydXllbiIpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5zZWxlY3QoJy5kZXNjcmlwdGlvbicpLmNsZWFuSW5uZXJIVE1MKCksDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgY2hhcHRlcnMsDQogICAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIHRoaXMubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFtZSwNCiAgICAgICAgICAgICAgICB1bmRlZmluZWQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ENoYXB0ZXI6IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYW5DaGFwdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyKHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKS5zZWxlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QoJy5jaGFwdGVyQ29udGVudCcpLCB0aGlzLm5hbWUpOw0KICAgICAgICB9LA0KDQogICAgICAgIGxhdGVzdDogYXN5bmMgZnVuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb24gKHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmxhdGVzdFVybC5yZXBsYWNlKCd7cH0nLCBwYWdlLnRvUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03RyaW5nKCkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNvbnRhaW5lci5maW5kKCcudGFibGUudGFidHJ1eWVuIHRyJykuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgICAgICAgIGlmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch4LnNlbGVjdCgnaW1nJykuYXR0cigic3JjIikuaGFzVmFsdWUoKSkNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKS5hdHRyKCJzcmMiKS51cmwoKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgnaDMgYScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCdoMyBhJykuYXR0cigiaHJlZiIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVybCgpLCB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgICk7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQoNCiAgICByZXR1cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m4gbmV3IFBhcnNlcigpOw0KDQp9Ow==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmlkID0gIjEucmFubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02Jlc25ldCI7DQogICAgICAgIHRoaXMucGFyc2VyTGFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnUmFub2JlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU005ldCc7DQogICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSAiUmJlc05ldCI7DQogICAgICAgIHRoaXMuZGV0YWxpSXRlbVR5cGUgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SBEZXRhbGlJdGVtVHlwZS5Ob3ZlbDsNCiAgICAgICAgdGhpcy5sYXRlc3RVcmwgPSAnaHR0cHM6Ly9yYW5vYmVzLm5ldC9ub3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HMvcGFnZS97cH0nOw0KICAgICAgICB0aGlzLnVybCA9ICdodHRwczovL3Jhbm9iZXMubmV0JzsNCiAgICAgICAgdGhpcy5zZWFyYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hVcmwgPSAnJzsNCiAgICAgICAgdGhpcy5wYW5pbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gdHJ1ZTsNCiAgICAgICAgdGhpcy5pY29uID0gJ2h0dHBzOi8vYm94bm92ZWwuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE4LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zA0L2JveC1pY29uLTE1MHgxNTAucG5nJzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hTZXR0aW5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgXSwNCiAgICAgICAgfTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3Muc29ydFR5cGVzID0gew0KICAgICAgICAgICAgbXVsdGlTZWxlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICBdLA0KICAgICAgICB9Ow0KDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuY2xlYW5lciA9IHBsdWdpbnMuZmluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KICAgICAgICB0aGlzLnBhZ2VyIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJQYWdlciIpOw0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIGxvYWRTZXR0aW5nczogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMucGFyc2VyU2VhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNoU2V0dGluZ3MuZ2VucmVzLnZhbHVlcy5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCgiaHR0cHM6Ly9yYW5vYmVzLm5ldC9nZW5yZXMuaHRtbCIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRoZW4oaHRtbCA9PiB7DQogICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGh0bWwpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCIuY2F0X2Jsb2NrID4gYSIpLmZvckVhY2goeCA9PiB7DQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZ2VucmVzLnZhbHVlcy5wdXNoKG5ldyBsYWJlbFZhbHVlKHguc2VsZWN0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJoMyIpLnRleHQoKSwgeC5hdHRyKCJocmVmIikudXJsKCkgKyAicGFnZS97cH0iKSk7DQogICAgICAgICAgICAgICAgfSk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3Rpb24gKGtleXMpIHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIkxhdGVzdCBVcGRhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUiLCAiTGF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImFjdGlvbiIsICJBY3Rpb24gTm92ZWxzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsiaHR0cHM6Ly9yYW5vYmVzLm5ldC90YWdzL2dlbnJlL0FjdGlvbi9wYWdlLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03twfSJdKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImRyYW1hIiwgIkRyYW1hIFZpZXdzIiwgIlNlYXJjaCIsIGZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlLCBuZXcgRmlsdGVyKFsiaHR0cHM6Ly9yYW5vYmVzLm5ldC90YWdzL2dlbnJlL0RyYW1hL3BhZ2Uve3B9Il0pKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgU2VjdGlvbigiam9zZWkiLCAiSm9zZWkgVmlld3MiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIoWMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yJodHRwczovL3Jhbm9iZXMubmV0L3RhZ3MvZ2VucmUvSm9zZWkvcGFnZS97cH0iXSkpDQogICAgICAgICAgICBdDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCg0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikgcmV0dXJuIGF3YWl0IHRoaXMubGF0ZXN0KHBhZ2UpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgZWxzZSByZXR1cm4gYXdhaXQgdGhpcy5zZWFyY2goc2VjdGlvbi5maWx0ZXIgfHwgdGhpcy5kZWZhdWx0RmlsdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CksIHBhZ2UpOw0KICAgICAgICB9LA0KDQogICAgICAgIGRlZmF1bHRGaWx0ZXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZhciBmaWx0ZXIgPSBuZXcgRmlsdGVyKCk7DQogICAgICAgICAgICByZXR1cm4gZmlsdGVyOw0KICAgICAgICB9LA0KDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGdldEJ5R2VucmVzOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLmdlbnJlcy5sYXN0KCkucmVwbGFjZSgie3B9IiwgcGFnZSk7DQoNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgnYXJ0aWNsZScpLmZvckVhY2goKHgpID0+IHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICB2YXIgaW1nID0gdGhpcy5nZXRJbWFnZUJ5U3R5bGUoeC5zZWxlY3QoIi5jb3ZlciIpLmF0dHIoInN0eMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlIikudGV4dChmYWxzZSkpOw0KICAgICAgICAgICAgICAgIGlmIChpbWcpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNoKG5ldyBMaWdodEl0ZW0oaW1nLCB4LnNlbGVjdCgnLnRpdGxlIGEnKS5yZW1vdmUoInNwYW4iKS50ZXh0KGZhbHNlKSwgJycsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Hguc2VsZWN0KCcudGl0bGUgYScpLmF0dHIoImhyZWYiKS51cmwoKSwgdGhpcy5uYW1lKSk7DQogICAgICAgICAgICB9KTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLCBwYWdlKSB7DQoNCiAgICAgICAgICAgIHZhciB1cmwgPSBgaHR0cHM6Ly9yYW5vYmVzLm5ldC9pbmRleC5waHA/ZG89c2VhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNoYA0KICAgICAgICAgICAgaWYgKGZpbHRlci5nZW5yZXMgJiYgZmlsdGVyLmdlbnJlcy5sZW5ndGggPiAwKSB7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QnlHZW5yZXMoZmlsdGVyLCBwYWdlKTsNCiAgICAgICAgICAgIH0NCg0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkucG9zdEVuY29kZWRGb3JtKHVybCwgew0KICAgICAgICAgICAgICAgIHN1YmFjdGlvbjogInNlYXJjaCIsDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgc2VhcmNoX3N0YXJ0OiBwYWdlLA0KICAgICAgICAgICAgICAgIGZ1bGxfc2VhcmNoOiAxLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJlc3VsdF9mcm9tOiAyMSwNCiAgICAgICAgICAgICAgICBzdG9yeTogZmlsdGVyLnRpdGxlLA0KICAgICAgICAgICAgICAgICJjYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRsaXN0W10iOiAxLA0KICAgICAgICAgICAgICAgIHRpdGxlb25seTogMywNCiAgICAgICAgICAgICAgICBzb3J0Ynk6ICJ0aXRsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIsDQogICAgICAgICAgICAgICAgcmVzb3JkZXI6ICJkZXNjIiwNCiAgICAgICAgICAgICAgICBzZWFyY2hkYXRlOiAwLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIGJlZm9yZWFmdGVyOiAiYWZ0ZXIiLA0KICAgICAgICAgICAgICAgIHNob3dwb3N0czogMA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfSkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJ2FydGljbGUnKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgICAgICAgICAgdmFyIGltZyA9IHRoaXMuZ2V0SW1hZ2VCeVN0eWxlKHguc2VsZWN0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIuY292ZXIiKS5hdHRyKCJzdHlsZSIpLnRleHQoZmFsc2UpKTsNCiAgICAgICAgICAgICAgICBpZiAoaW1nKQ0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKGltZywgeC5zZWxlY3QoJy50aXRsZSBhJykucmVtb3ZlKCJzcGFuIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikudGV4dChmYWxzZSksICcnLCB4LnNlbGVjdCgnLnRpdGxlIGEnKS5hdHRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZSkpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJzOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRyeSB7DQoNCiAgICAgICAgICAgICAgICBub3ZlbFVybCA9IG5vdmVsVXJsLnJlcGxhY2UoL1wvZmlyc3QvZywgIiIpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIHZhciBwVXJsID0gKCIvcGFnZS97cGFnZX0iKS51cmkobm92ZWxVcmwpOw0KICAgICAgICAgICAgICAgIHZhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBpdGVtID0gYXdhaXQgdGhpcy5wYWdlci5yZW5kZXJDb3VudGVyQ2FsbHMocFVybCwgKHgpID0+IHsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdmFyIG1hdGNoID0geC5tYXRjaCgvd2luZG93Ll9fREFUQV9fLipcfS9nKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ShtYXRjaFswXS50b1N0cmluZygpLnJlcGxhY2UoL3dpbmRvdy5fX0RBVEFfX3w9L2csICIiKS5yZXBsYWNlKC86LC8sICI6bnVsbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CwiKS50cmltKCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIWpzb24gfHwganNvbi5jb3VudF9hbGwgPT09IHVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVmaW5lZCB8fCBqc29uLmxpbWl0ID09PSB1bmRlZmluZWQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0E1hdGguY2VpbChqc29uLmNvdW50X2FsbCAvIGpzb24ubGltaXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICAgICAgICAgIH0sIHRydWUpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChpdGVtLnByb21pc2VzKTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgYnJlYWtJdCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goeCA9PiB7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJyZWFrSXQpIHsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICB2YXIgaHRtbCA9IHg7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gaHRtbC5tYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRjaCgvd2luZG93Ll9fREFUQV9fLipcfS9nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02gubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UobWF0YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hbMF0udG9TdHJpbmcoKS5yZXBsYWNlKC93aW5kb3cuX19EQVRBX198PS9nLCAiIikucmVwbGFjZSgvOiwvLCAiOm51bGwsIikudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJpbSgpKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghanNvbiB8fCAhanNvbi5jaGFwdGVycyB8fMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBqc29uLmNoYXB0ZXJzLmxlbmd0aCA8PSAwKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VsdEEgPSBqc29uLmNoYXB0ZXJzLnJlZHVjZSgoYXJyLCB4KSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgYXJyW3guaWRdID0gbmV3IENoYXB0ZXIoeC50aXRsZSwgKCIvcmVhZC0iICsgeC5pZCArICIuaHRtbCIpLnVyaSh0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzLnVybCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnI7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch0aGlzLnBhcnNlci52YWxpZGF0ZUNoYXB0ZXJzKHJlc3VsdEEsIHJlc3VsdCkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICAgICBicmVha0l0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGJyZWFrSXQgPSB0cnVlOw0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIH0gZWxzZSBicmVha0l0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KDQogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMocMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVzdWx0KTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHJlc3VsdCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GdldE5vdmVsOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciBjaGFwdGVycyA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcnMoY29udGFpbmVyLnNlbGVjdCgiLnItZnVsbHN0b3J5LWNoYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XB0ZXJzLWZvb3QgPmEiKS5sYXN0KCkuYXR0cigiaHJlZiIpLnVybCgpKTsNCiAgICAgICAgICAgIHZhciBpdGVtID0gbmV3IE5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsUmV2aWV3cygpOw0KICAgICAgICAgICAgaXRlbS5nZW5yZXMgPSBjb250YWluZXIuZmluZCgiLmxpbmtzW2l0ZW1wcm9wPSdnZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5yZSddIGEiKS50ZXh0QXJyYXkoKTsNCiAgICAgICAgICAgIGl0ZW0uYXV0aG9yID0gY29udGFpbmVyLmZpbmQoInNwYW5baXRlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XByb3A9J2NyZWF0b3InXSIpLnRleHQoZmFsc2UpDQogICAgICAgICAgICBpdGVtLmNvbXBsZXRlZCA9ICJTdGF0dXM6IiArIGNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRhaW5lci5maW5kKCIuci1mdWxsc3Rvcnktc3BlYyB1bCBsaSIpLmVxKDApLnNlbGVjdCgiYSIpLnRleHQoZmFsc2UpDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBpdGVtLnV2b3RlcyA9ICJSYXRpbmc6IiArIGNvbnRhaW5lci5zZWxlY3QoIi5yYXRlLXN0YXQtbnVtIHNwYW5baXRlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XByb3A9J3JhdGluZ1ZhbHVlJ10iKS50ZXh0KGZhbHNlKSArICIvNSI7DQogICAgICAgICAgICB2YXIgdGl0bGUgPSAiIjsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGlmIChjb250YWluZXIuc2VsZWN0KCJoMS50aXRsZSIpLnNlbGVjdCgiW2l0ZW1wcm9wPSduYW1lJ10iKS5oYXNFbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVtZW50KCkpDQogICAgICAgICAgICAgICAgdGl0bGUgPSBjb250YWluZXIuc2VsZWN0KCJoMS50aXRsZSIpLnNlbGVjdCgiW2l0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W1wcm9wPSduYW1lJ10iKS50ZXh0KGZhbHNlKTsNCiAgICAgICAgICAgIGVsc2UgdGl0bGUgPSBjb250YWluZXIuc2VsZWN0KCJoMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S50aXRsZSIpLnJlbW92ZSgic3BhbiIpLnRleHQoZmFsc2UpDQogICAgICAgICAgICB2YXIgckl0ZW0gPSBuZXcgRGV0YWxpSXRlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sh0aGlzLmdldEltYWdlQnlTdHlsZShjb250YWluZXIuc2VsZWN0KCIuY292ZXIiKS5hdHRyKCJzdHlsZSIpLnRleHQoZmFsc2UpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwgdGl0bGUsIGNvbnRhaW5lci5zZWxlY3QoIltpdGVtcHJvcD0nZGVzY3JpcHRpb24nXSIpLmNsZWFuSW5uZXJIVE1MKCksIG5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVXJsLCBjaGFwdGVycywgaXRlbSwgdGhpcy5uYW1lLCB1bmRlZmluZWQpOw0KICAgICAgICAgICAgcmV0dXJuIHJJdGVtOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9LA0KICAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7DQogICAgICAgICAgICByZXR1cm4gdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5jbGVhbmVyLmNsZWFuQ2hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WQpLmdldEh0bWwodXJsKSkuc2VsZWN0KCcjYXJydGljbGUnKSwgdGhpcy5uYW1lKTsNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0SMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W1hZ2VCeVN0eWxlOiBmdW5jdGlvbiAoc3R5bGUpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdmFyIG1hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNoID0gc3R5bGUubWF0Y2goL3VybFwoLipcKS9nKTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaC5sZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5ndGggPiAwID8gbWF0Y2hbMF0udG9TdHJpbmcoKS5yZXBsYWNlKC91cmx8XCh8XCkvZywgIiIpLnVyaSh0aGlzLnVybCkgOiB1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mRlZmluZWQ7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgbGF0ZXN0OiBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03luYyBmdW5jdGlvbiAocGFnZSkgew0KICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMubGF0ZXN0VXJsLnJlcGxhY2UoJ3twfScsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgY29udGFpbmVyLmZpbmQoJ2FydGljbGUnKS5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgICAgICAgICAgdmFyIGltZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yA9IHRoaXMuZ2V0SW1hZ2VCeVN0eWxlKHguc2VsZWN0KCIuY292ZXIiKS5hdHRyKCJzdHlsZSIpLnRleHQoZmFsc2UpKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBpZiAoaW1nKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKGltZywgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5zZWxlY3QoJy50aXRsZSBhJykucmVtb3ZlKCJzcGFuIikudGV4dChmYWxzZSksICcnLCB4LnNlbGVjdCgnLnRpdGxlIGEnKS5hdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG5ldyBQYXJzZXIoKTsNCn07DQo=&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7DQogICAgICAgIHRoaXMuY2xlYW5lciA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HBsdWdpbnMuZmluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KICAgICAgICB0aGlzLmlkID0gIjEucmVhZGxpZ2h0bm92ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WwiOw0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIHRoaXMucGFycMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VyTGFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnUmVhZExpZ2h0Tm92ZWwnOw0KICAgICAgICB0aGlzLmRpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03BsYXlOYW1lID0gIlItTm92ZWwtTGlnaHQiOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL3d3dy5yZWFkbGlnaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRub3ZlbC5jYyc7DQogICAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vd3d3LnJlYWRsaWdodG5vdmVsLmNjLyc7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuc2VhcmNoVXJsID0gJ2h0dHBzOi8vd3d3LnJlYWRsaWdodG5vdmVsLmNjL3NlYXJjaC97cX0ve3B9JzsNCiAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5wYW5pbmF0aW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMuc2VhcmNoUGFnaW5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuaWNvbiA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3MyL2Zhdmljb25zP2RvbWFpbj1odHRwczovL3d3dy5yZWFkbGlnaHRubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZlbC5jYy8nOw0KDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MgPSBuZXcgUGFyc2VyU2VhcmNoU2V0dGluZ3MoKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jogZmFsc2UsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnQW55JywgMCksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0ZhbnRhc3knLCAxKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnWGlhbnhpYScsIDIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdSb21hbnRpYycsIDMpLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIaXN0b3JpY2FsJywgNCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU01NjaS1maScsIDUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdHYW1lJywgNiksDQogICAgICAgICAgICBdLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB9Ow0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQogICAgICAgIGdldFNlY3Rpb25zOiBhc3luYyBmdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKQ0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCg0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFnZSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdGVyOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgZmlsdGVyID0gbmV3IEZpbHRlcigpOw0KICAgICAgICAgICAgcmV0dXJuIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZpbHRlcjsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRHZW5yZXNTZWFyY2g6IGFzeW5jIGZ1bmN0aW9uIChmaWx0ZXIsIHBhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UpIHsNCiAgICAgICAgICAgIHZhciBxID0gJ2h0dHBzOi8vd3d3LnJlYWRsaWdodG5vdmVsLmNjL21lbWJlcmFjdGlvbi5hc3B4JMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0zsNCiAgICAgICAgICAgIHZhciBmID0gew0KICAgICAgICAgICAgICAgIGFjdGlvbjogJ25leHRib29rY2F0ZWdvcnknLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIGNhdGVnb3J5aWQ6IGZpbHRlci5nZW5yZXNbMF0sDQogICAgICAgICAgICAgICAgcGFnZTogcGFnZSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIH07DQoNCiAgICAgICAgICAgIHZhciBqc29uID0gYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5wb3N0Rm9ybShxLCBmKTsNCg0KICAgICAgICAgICAgcmV0dXJuIGpzb24gJiYganNvbi5kYXRhID8ganNvbi5kYXRhLm1hcCgoeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkgPT4NCiAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuZXIuaW1hZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UodGhpcy51cmwseC5Cb29rUGluWWluLnVyaSh0aGlzLnBhcnNlci51cmwpICsgIi8iLCAiLmJvb2stY29udGFpbmVyIGltZyIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgICAgICB4LkJvb2tOYW1lLA0KICAgICAgICAgICAgICAgICAgICB4LkRlc2NyaXB0aW9uLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICB4LkJvb2tQaW5ZaW4udXJpKHRoaXMudXJsKSArICIvIiwNCiAgICAgICAgICAgICAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5uYW1lDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICkgOg0KICAgICAgICAgICAgICAgIFtdOw0KICAgICAgICB9LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKGZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5nZW5yZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRHZW5yZXNTZWFyY2goZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLCBwYWdlKTsNCg0KICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5zZWFyY2hVcmwNCiAgICAgICAgICAgICAgICAucmVwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFjZSgne3F9JywgZmlsdGVyLnRpdGxlIHx8ICIiKQ0KICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7cH0nLCBwYWdlLnRvU3RyaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5nKCkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GllbnQodGhpcy5pZCkuZ2V0SHRtbChxdWVyeSkpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029udGFpbmVyLmZpbmQoJy5saXN0LWl0ZW0nKS5mb3JFYWNoKHggPT4gew0KICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoJ2ltZycpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoJ2ltZycpLmF0dHIoImFsdCB8IHRpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxlIikudGV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgICAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHgucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VsZWN0KCcuYm9vay1uYW1lJykuYXR0cigiaHJlZiIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIHJlc3VsdDsNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsLCBpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU025vcmVDaGFwdGVycykgew0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybCwgaWdub3JlQ2hhcHRlcnMpKTsNCiAgICAgICAgICAgIHZhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBjaGFwdGVycyA9IFtdOw0KICAgICAgICAgICAgdmFyIG5vdmVsUmV2aWV3cyA9IG5ldyBOb3ZlbFJldmlld3MoKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIGlmICghaWdub3JlQ2hhcHRlcnMpIHsNCiAgICAgICAgICAgICAgICB2YXIgaHRtbENoYXB0ZXJzID0gY29udGFpbmVyLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZpbmQoJy5jaGFwdGVyLWxpc3QgYScpOw0KICAgICAgICAgICAgICAgIGh0bWxDaGFwdGVycy5mb3JFYWNoKCh4KSA9PiB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ2hhcHRlcih4LnNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdCgnLmNoYXB0ZXItbmFtZScpLnRleHQoZmFsc2UpLCB4LmF0dHIoImhyZWYiKS51cmwoKSkNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5nZW5yZXMgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SBjb250YWluZXIuZmluZCgiLmJhc2UtaW5mbyAuYm9vay1jYXRhbG9nIC50eHQiKS50ZXh0QXJyYXkoKTsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5vdmVsUmV2aWV3cy5hdXRob3IgPSBjb250YWluZXIuc2VsZWN0KCIuYXV0aG9yIC5uYW1lIikudGV4dChmYWxzZSk7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gY29udGFpbmVyLnNlbGVjdCgiLnNjb3JlIikudGV4dChmYWxzZSkgKyAiIC8gMMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TAiOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZCA9IGNvbnRhaW5lci5zZWxlY3QoIi5iYXNlLWluZm8gLmJvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02stc3RhdGUgLnR4dCIpLnRleHQoZmFsc2UpID09PSAiQ29tcGxldGVkIiA/ICJTdGF0dXM6Q29tcGxldGVkIiA6ICJTdGF0dXM6TMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU025nb2luZyI7DQogICAgICAgICAgICByZXR1cm4gbmV3IERldGFsaUl0ZW0oDQogICAgICAgICAgICAgICAgY29udGFpbmVyLnNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdCgnLmJvb2stY29udGFpbmVyIGltZycpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoJy5ib29rLWluZm8gLmJvb2stbmFtZScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QoJy5zeW5vcHNpcyAuY29udGVudCAuZGVzYycpLmNsZWFuSW5uZXJIVE1MKCksDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgY2hhcHRlcnMsDQogICAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMubmFtZSwNCiAgICAgICAgICAgICAgICB1bmRlZmluZWQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGdldENoYXB0ZXI6IGFzeW5jIGZ1bmN0aW9uICh1cmwpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5DaGFwdGVyKHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQoKS5nZXRIdG1sKHVybCkpLnNlbGVjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgnLnJlYWQtY29udGFpbmVyIC5zZWN0aW9uLWxpc3QnKSwgdGhpcy5uYW1lKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBsYXRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHRoaXMubGF0ZXN0VXJsKSk7DQogICAgICAgICAgICB2YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgcmVzdWx0ID0gW107DQoNCiAgICAgICAgICAgIGNvbnRhaW5lci5maW5kKCcudXBkYXRlLWNvbnRlbnQnKS5mb3JFYWNoKCh4KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA9PiB7DQogICAgICAgICAgICAgICAgdmFyIHUgPSB4LnNlbGVjdCgnLml0ZW0tdGl0bGUgYScpLmF0dHIoImhyZWYiKS50ZXh0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZhbHNlKTsNCiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSB4LnNlbGVjdCgnLml0ZW0tdGl0bGUgYScpLnRleHQoZmFsc2UpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgICAgIGlmICh1ICE9ICIiICYmICFyZXN1bHQuZmluZCgoeCkgPT4gdS51cmkodGhpcy51cmwpID09IHgubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWwgfHwgdGl0bGUgPT0geC50aXRsZSkpDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IExpZ2h0SXRlbSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuZXIuaW1hZ2UodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy51cmwsIHUudXJpKHRoaXMudXJsKSAsICIuYm9vay1jb250YWluZXIgaW1nIiksDQogICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdGl0bGUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S51cmkodGhpcy51cmwpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZQ0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBuZXcgUGFyc2VyKCk7DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCglmdW5jdGlvbiBQYXJzZXIoKSB7DQoJCXRoaXMuY2xlYW5lciA9IHBsdWdpbnMuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KCQl0aGlzLmlkID0gIjEucmVhZG5vdmVsZnVsbCI7DQoJCXRoaXMucGFycMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VyTGFuZ3VhZ2UgPSAiZW4iOw0KCQl0aGlzLm5hbWUgPSAnUmVhZE5vdmVsRnVsbCc7DQoJCXRoaXMuZGlzcGxheU5hbWUgPSAiUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i1Ob3ZlbC1GdWxseSI7DQoJCXRoaXMuZGV0YWxpSXRlbVR5cGUgPSBEZXRhbGlJdGVtVHlwZS5Ob3ZlbDsNCgkJdGhpcy5sYXRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03RVcmwgPSAnaHR0cHM6Ly9yZWFkbm92ZWxmdWxsLmNvbS9sYXRlc3QtcmVsZWFzZS1ub3ZlbD9wYWdlPXtwfSc7DQoJCXRoaXMudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsID0gJ2h0dHBzOi8vcmVhZG5vdmVsZnVsbC5jb20vJzsNCgkJdGhpcy5zZWFyY2hVcmwgPSAnaHR0cHM6Ly9yZWFkbm92ZWxmdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxsLmNvbS9zZWFyY2g/a2V5d29yZD17cX0mcGFnZT17cH0nOw0KCQl0aGlzLmNoYXB0ZXJzVXJsID0gJ2h0dHBzOi8vcmVhZG5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsZnVsbC5jb20vYWpheC9jaGFwdGVyLW9wdGlvbj9ub3ZlbElkPXtpZH0mY3VycmVudENoYXB0ZXJJZD0xJzsNCgkJdGhpcy5wYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5pbmF0aW9uID0gdHJ1ZTsNCgkJdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gdHJ1ZTsNCgkJdGhpcy5pY29uID0gJ2h0dHBzOi8vcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVhZG5vdmVsZnVsbC5jb20vaW1nL2Zhdmljb24uaWNvJzsNCgkJdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJTZWFyY2hTZXR0aW5ncygpOw0KCQl0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLmdlbnJlcyA9IHsNCgkJCW11bHRpU2VsZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uOiBmYWxzZSwNCgkJCXZhbHVlczogWw0KCQkJCW5ldyBsYWJlbFZhbHVlKCdTaG91bmVuJyksDQoJCQkJbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoJ0hhcmVtJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ0NvbWVkeScpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdNYXJ0aWFsIEFydMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HMnLCAnTWFydGlhbCtBcnRzJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ1NjaG9vbCBMaWZlJywgJ1NjaG9vbCtMaWZlJyksDQoJCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QkJbmV3IGxhYmVsVmFsdWUoJ015c3RlcnknKSwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnU2hvdWpvJyksDQoJCQkJbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoJ1JvbWFuY2UnKSwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnU2NpLWZpJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ0dlbmRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBCZW5kZXInLCAnR2VuZGVyK0JlbmRlcicpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdNYXR1cmUnKSwNCgkJCQluZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnRmFudGFzeScpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdIb3Jyb3InKSwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnRHJhbWEnKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnVHJhZ2VkeScpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdTdXBlcm5hdHVyYWwnKSwNCgkJCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QluZXcgbGFiZWxWYWx1ZSgnRWNjaGknKSwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnWHVhbmh1YW4nKSwNCgkJCQluZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgnQWR2ZW50dXJlJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ1BzeWNob2xvZ2ljYWwnKSwNCgkJCQluZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgnWGlhbnhpYScpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdXdXhpYScpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdIaXN0b3JpY2FsJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ1NsaWNlIG9mIExpZmUnLCAnU2xpY2Urb2YrTGlmZScpLA0KCQkJCW5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCdMb2xpY29uJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ0FkdWx0JyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ0pvc2VpJyksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoJCQkJbmV3IGxhYmVsVmFsdWUoJ1Nwb3J0cycpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdTbXV0JyksDQoJCQkJbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoJ01lY2hhJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ1lhb2knKSwNCgkJCQluZXcgbGFiZWxWYWx1ZSgnU2hvdW5lbiBBaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ScsICdTaG91bmVuK0FpJyksDQoJCQldLA0KCQl9Ow0KCQl0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLnNvcnRUeXBlcyA9IHsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0gkJCW11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCgkJCXZhbHVlczogWw0KCQkJCW5ldyBsYWJlbFZhbHVlKCdMYXRlc3QgUmVsZWFzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SBOb3ZlbCcsICdsYXRlc3QtcmVsZWFzZS1ub3ZlbCcpLA0KCQkJCW5ldyBsYWJlbFZhbHVlKCdIb3QgTm92ZWwnLCAnaG90LW5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsJyksDQoJCQkJbmV3IGxhYmVsVmFsdWUoJ0NvbXBsZXRlZCBOb3ZlbCcsICdjb21wbGV0ZWQtbm92ZWwnKSwNCgkJCQluZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgnTW9zdCBQb3B1bGFyJywgJ21vc3QtcG9wdWxhci1ub3ZlbCcpLA0KCQkJXSwNCgkJfTsNCg0KCX0NCg0KDQoJUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFyc2VyLnByb3RvdHlwZSA9IHsNCgkJZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQoJCQl2YXIgc2VjdGlvbnMgPSBbDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoJCQkJbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIkxhdGVzdCIsIHRydWUpLA0KCQkJCW5ldyBTZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uKCJob3QiLCAiSG90IE5vdmVsIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgImhvdC1ub3ZlbCIpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCgkJCQluZXcgU2VjdGlvbigiY29tcGxldGVkIiwgIkNvbXBsZXRlZCBOb3ZlbCIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcih1bmRlZmluZWQsICJjb21wbGV0ZWQtbm92ZWwiKSksDQoJCQkJbmV3IFNlY3Rpb24oInBvcHVsYXIiLCAiTW9zdCBQb3B1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFyIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgIm1vc3QtcG9wdWxhci1ub3ZlbCIpKQ0KCQkJXQ0KCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QkJcmV0dXJuIHNlY3Rpb25zLmZpbHRlcih4ID0+ICFrZXlzIHx8IGtleXMuaW5jbHVkZXMoeC5uYW1lKSk7DQoJCX0sDQoNCgkJdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HJhbnNsYXRlU2VjdGlvbjogYXN5bmMgZnVuY3Rpb24gKHNlY3Rpb24sIHBhZ2UpIHsNCgkJCWlmIChzZWN0aW9uLmlkZW50aWZpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgPT0gIkxhdGVzdCIpIHJldHVybiBhd2FpdCB0aGlzLmxhdGVzdChwYWdlKTsNCgkJCWVsc2UgcmV0dXJuIGF3YWl0IHRoaXMucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCgkJfSwNCgkJZGVmYXVsdEZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jogZnVuY3Rpb24gKCkgew0KCQkJdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKTsNCgkJCXJldHVybiBmaWx0ZXI7DQoJCX0sDQoJCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KCQkJdmFyIGdlbnJlVXJsID0gImdlbnJlL3tnfT9wYWdlPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XtwfSIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLCBwYWdlLnRvU3RyaW5nKCkpOw0KCQkJdmFyIHNvcnRUeXBlVXJsID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ntzfT9wYWdlPXtwfSIudXJpKHRoaXMudXJsKS5yZXBsYWNlKCJ7cH0iLCBwYWdlLnRvU3RyaW5nKCkpOw0KCQkJdmFyIHEgPSBmaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXIuZ2VucmVzLmxlbmd0aCA+IDAgPyBnZW5yZVVybC5yZXBsYWNlKCJ7Z30iLCBmaWx0ZXIuZ2VucmVzWzBdKSA6IChmaWx0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIuc29ydFR5cGUgJiYgZmlsdGVyLnNvcnRUeXBlICE9ICcnID8gc29ydFR5cGVVcmwucmVwbGFjZSgie3N9IiwgZmlsdGVyLnNvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRUeXBlKSA6IHVuZGVmaW5lZCk7DQoJCQl2YXIgcXVlcnkgPSBxIHx8IHRoaXMuc2VhcmNoVXJsLnJlcGxhY2UoJ3txfScsIGZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlci50aXRsZSB8fCAiIikucmVwbGFjZSgne3B9JywgcGFnZS50b1N0cmluZygpKTsNCgkJCXZhciBjb250YWluZXIgPSB0aGlzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwocXVlcnkpKTsNCgkJCXZhciByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQgPSBbXTsNCgkJCWNvbnRhaW5lci5maW5kKCcubGlzdC1ub3ZlbCAucm93JykuZm9yRWFjaCgoeCkgPT4gew0KCQkJCWlmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch4LnNlbGVjdCgnaW1nJykuYXR0cigic3JjIikuaGFzVmFsdWUoKSkgcmVzdWx0LnB1c2gobmV3IExpZ2h0SXRlbSh4LnNlbGVjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CgnaW1nJykuYXR0cigic3JjIikudXJsKCkucmVwbGFjZSgvWzAtOV0reFswLTldKy9naSwgIjE1MHgxNzAiKSwgeC5zZWxlY3QoJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5ub3ZlbC10aXRsZSBhJykudGV4dChmYWxzZSksICcnLCB4LnNlbGVjdCgnLm5vdmVsLXRpdGxlIGEnKS5hdHRyKCJocmVmIikudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJsKCksIHRoaXMubmFtZSksKTsNCgkJCX0pOw0KCQkJcmV0dXJuIHJlc3VsdDsNCgkJfSwNCg0KCQlnZXRDaGFwdGVyczogYXN5bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mMgZnVuY3Rpb24gKG5vdmVsVXJsLCBodG1sQ29udGFpbmVyKSB7DQoJCQl2YXIgY2hhcHRlcnMgPSBbXTsNCgkJCXZhciB1cmwgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SB0aGlzLmNoYXB0ZXJzVXJsLnJlcGxhY2UoJ3tpZH0nLCAoaHRtbENvbnRhaW5lci5zZWxlY3QoJyNyYXRpbmcnKS5hdHRyKCJkYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRhLW5vdmVsLWlkIikuaGFzVmFsdWUoKSA/IGh0bWxDb250YWluZXIuc2VsZWN0KCcjcmF0aW5nJykuYXR0cigiZGF0YS1ub3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C1pZCIpLnRleHQoKSA6IGh0bWxDb250YWluZXIuc2VsZWN0KCdbZGF0YS1ub3ZlbC1pZF0nKS5hdHRyKCJkYXRhLW5vdmVsLWlkIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikudGV4dCgpKSk7DQoJCQl2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KCQkJY29udGFpbmVyLmZpbmQoJ29wdGlvbicpLmZvckVhY2goeCA9PiB7DQoJCQkJaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYgKHguYXR0cigidmFsdWUiKS5oYXNWYWx1ZSgpKSBjaGFwdGVycy5wdXNoKG5ldyBDaGFwdGVyKHgudGV4dChmYWxzZSksIHguYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR0cigidmFsdWUiKS51cmwoKSkpOw0KCQkJfSk7DQoJCQlyZXR1cm4gY2hhcHRlcnM7DQoJCX0sDQoJCWdldE5vdmVsOiBhc3luYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCgkJCXZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIuZ2V0Q2xpZW50KCkuZ2V0SHRtbChub3ZlbFVybCkpOw0KCQkJdmFyIGNoYXB0ZXJzID0gYXdhaXQgdGhpcy5nZXRDaGFwdGVycMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yhub3ZlbFVybCwgY29udGFpbmVyKTsNCgkJCXZhciBpdGVtID0gbmV3IE5vdmVsUmV2aWV3cygpOw0KCQkJdmFyIGluZm8gPSBjbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0250YWluZXIuZmluZCgnLmluZm8gbGknKTsNCgkJCWl0ZW0uZ2VucmVzID0gaW5mby53aGVyZSh4ID0+IHguaW5uZXJIVE1MKCkudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9Mb3dlckNhc2UoKS5pbmRleE9mKCJnZW5yZSIpICE9IC0xKS5maW5kKCJhIikudGV4dEFycmF5KCk7DQoJCQlpdGVtLmF1dGhvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iA9IGluZm8ud2hlcmUoeCA9PiB4LmlubmVySFRNTCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYXV0aG9yIikgIT0gLTEpLmZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mQoImEiKS50ZXh0KGZhbHNlKQ0KCQkJaXRlbS5jb21wbGV0ZWQgPSBpbmZvLndoZXJlKHggPT4geC5pbm5lckhUTUwoKS50b0xvdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VyQ2FzZSgpLmluZGV4T2YoInN0YXR1cyIpICE9IC0xKS50ZXh0KGZhbHNlKTsNCgkJCWl0ZW0uYWx0ZXJuYXRpdmVOYW1lcyA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GluZm8ud2hlcmUoeCA9PiB4LmlubmVySFRNTCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYWx0ZXJuYXRpdmUgbmFtZXMiKSAhPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAtMSkudGV4dCgpOw0KCQkJaXRlbS51dm90ZXMgPSBjb250YWluZXIuc2VsZWN0KCJzcGFuW2l0ZW1wcm9wPSdyYXRpbmdWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SddIikudGV4dChmYWxzZSkgKyAiIC8gMTAiOw0KCQkJcmV0dXJuIG5ldyBEZXRhbGlJdGVtKGNvbnRhaW5lci5zZWxlY3QoJy5ibMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029rIGltZycpLmF0dHIoInNyYyIpLnVybCgpLCBjb250YWluZXIuc2VsZWN0KCcudGl0bGUnKS50ZXh0KGZhbHNlKSwgY29udGFpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyLnNlbGVjdCgnLmRlc2MtdGV4dCcpLmNsZWFuSW5uZXJIVE1MKCksIG5vdmVsVXJsLCBjaGFwdGVycywgaXRlbSwgdGhpcy5uYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W1lLCB1bmRlZmluZWQpOw0KCQl9LA0KCQlnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7DQoJCQlyZXR1cm4gdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5jbGVhbmVyLmNsZWFuQ2hhcHRlcih0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdldEh0bWwodXJsKSkuc2VsZWN0KCcjY2hyLWNvbnRlbnQnKSwgdGhpcy5uYW1lKQ0KCQl9LA0KCQlsYXRlc3Q6IGFzeW5jIGZ1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mN0aW9uIChwYWdlKSB7DQoJCQl2YXIgdXJsID0gdGhpcy5sYXRlc3RVcmwucmVwbGFjZSgne3B9JywgcGFnZS50b1N0cmluZygpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCgkJCXZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdldEh0bWwodXJsKSk7DQoJCQl2YXIgcmVzdWx0ID0gW107DQoJCQljb250YWluZXIuZmluZCgnLmxpc3Qtbm92ZWwgLnJvdycpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZvckVhY2goKHgpID0+IHsNCgkJCQlpZiAoeC5zZWxlY3QoJ2ltZycpLmF0dHIoInNyYyIpLmhhc1ZhbHVlKCkpIHJlc3VsdC5wdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNoKG5ldyBMaWdodEl0ZW0oeC5zZWxlY3QoJ2ltZycpLmF0dHIoInNyYyIpLnVybCgpLnJlcGxhY2UoL1swLTldK3hbMC05XSsvZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02ksICIxNTB4MTcwIiksIHguc2VsZWN0KCcubm92ZWwtdGl0bGUgYScpLnRleHQoKSwgJycsIHguc2VsZWN0KCcubm92ZWwtdGl0bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUgYScpLmF0dHIoImhyZWYiKS51cmwoKSwgdGhpcy5uYW1lKSwpOw0KCQkJfSk7DQoJCQlyZXR1cm4gcmVzdWx0Ow0KCQl9DQoJfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Q0KDQoJcmV0dXJuIG5ldyBQYXJzZXIoKTsNCn0=&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPT0gIkNsZWFuZXIiKTsNCg0KDQogICAgICAgIHRoaXMuaWQgPSAiMS5yb3lhbHJvYWQiOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIHRoaXMucGFyc2VyTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFuZ3VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnUm95YWxSb2FkJzsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA9IHRoaXMubmFtZTsNCiAgICAgICAgdGhpcy5sYXRlc3RVcmwgPSAnaHR0cHM6Ly93d3cucm95YWxyb2FkLmNvbS9maWN0aW9ucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y9sYXRlc3QtdXBkYXRlcz9wYWdlPXtwfSc7DQogICAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vd3d3LnJveWFscm9hZC5jb20nOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICdodHRwczovL3d3dy5yb3lhbHJvYWQuY29tL2ZpY3Rpb25zL3NlYXJjaD9wYWdlPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XtwfSZ0aXRsZT17cX0nOw0KICAgICAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLmljb24gPSAnaHR0cHM6Ly93d3cucm95YWxyb2FkLmNvbS9mYXZpY29uLTE2eDE2LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nBuZz92PTIwMjAwMTI1JzsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncyA9IG5ldyBQYXJzZXJTZWFyY2hTZXR0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5ncygpOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLm11bHRpU2VsZWN0aW9uID0gdHJ1ZTsNCiAgICAgICAgdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogdHJ1ZSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJBY3Rpb24iLCAiYWN0aW9uIiksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFkdmVudHVyZSIsICJhZHZlbnR1cmUiKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgiQ29tZWR5IiwgImNvbWVkeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb250ZW1wbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JhcnkiLCAiY29udGVtcG9yYXJ5IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkRyYW1hIiwgImRyYW1hIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlBzeWNob2xvZ2ljYWwiLCAicHN5Y2hvbG9naWNhbCIpLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJSb21hbmNlIiwgInJvbWFuY2UiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx1ZSgiU2F0aXJlIiwgInNhdGlyZSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTY2ktRmkiLCAic2NpX2ZpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNob3J0IFN0b3J5IiwgIm9uZV9zaG90IiksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIlRyYWdlZHkiLCAidHJhZ2VkeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJGYW50YXN5IiwgImZhbnRhc3kiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTXlzdGVyeSIsICJteXN0ZXJ5IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhpc3RvcmljYWwiLCAiaGlzdG9yaWNhbCIpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBsYWJlbFZhbHVlKCJIb3Jyb3IiLCAiaG9ycm9yIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0k1hZ2ljIiwgIm1hZ2ljIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFudGktSGVybyBMZWFkIiwgImFudGktaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyb19sZWFkIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkFydGlmaWNpYWwgSW50ZWxsaWdlbmNlIiwgImFydMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlmaWNpYWxfaW50ZWxsaWdlbmNlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkF0dHJhY3RpdmUgTUMiLCAiYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR0cmFjdGl2ZV9tYyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDeWJlcnB1bmsiLCAiY3liZXJwdW5rIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkR1bmdlb24iLCAiZHVuZ2VvbiIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJEeXN0b3BpYSIsICJkeXN0b3BpYSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJGZW1hbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUgTGVhZCIsICJmZW1hbGVfbGVhZCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJGaXJzdCBDb250YWN0IiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kZpcnN0X0NvbnRhY3QiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiR2FtZUxpdCIsICJHYW1lTGl0IiksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkdlbmRlciBCZW5kZXIiLCAiZ2VuZGVyX2JlbmRlciIpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBsYWJlbFZhbHVlKCJHZW5ldGljYWxseSBFbmdpbmVlcmVkIiwgIkdlbmV0aWNhbGx5X0VuZ2luZWVyZWQiKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiR3JpbWRhcmsiLCAiR3JpbWRhcmsiKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgiSGFyZCBTY2ktZmkiLCAiSGFyZF9TY2lfZmkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SgiSGFyZW0iLCAiaGFyZW0iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiSGlnaCBGYW50YXN5IiwgImhpZ2hfZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFudGFzeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJMaXRSUEciLCAiTGl0UlBHIiksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIkxvb3AiLCAiTG9vcCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJMb3cgRMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFudGFzeSIsICJsb3dfZmFudGFzeSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNYWxlIExlYWQiLCAibWFsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0V9sZWFkIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk1hcnRpYWwgQXJ0cyIsICJtYXJ0aWFsX2FydHMiKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTXVsdGlwbGUgTGVhZCBDaGFyYWN0ZXJzIiwgIm11dGxpcGxlX2xlYWQiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTXl0aG9zIiwgIm15dGhvcyIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJOb24tSHVtYW4gbGVhZCIsICJub24taHVtYW5fbGVhZCIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCJQb3J0YWwgRmFudGFzeSAvIElzZWthaSIsICJzdW1tb25lZF9oZXJvIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsVmFsdWUoIlBvc3QgQXBvY2FseXB0aWMiLCAicG9zdF9hcG9jYWx5cHRpYyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FZhbHVlKCJQcm9ncmVzc2lvbiIsICJwcm9ncmVzc2lvbiIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJSZWFkZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgaW50ZXJhY3RpdmUiLCAicmVhZGVyX2ludGVyYWN0aXZlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlJlaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5jYXJuYXRpb24iLCAicmVpbmNhcm5hdGlvbiIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJSdWxpbmcgQ2xhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03MiLCAicnVsaW5nX2NsYXNzIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNjaG9vbCBMaWZlIiwgInNjaG9vbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0F9saWZlIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNlY3JldCBJZGVudGl0eSIsICJzZWNyZXRfaWRlbnRpdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2xpY2Ugb2YgTGlmZSIsICJzbGljZV9vZl9saWZlIiksDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNvZnQgU2NpLWZpIiwgIlNvZnRfU2NpX2ZpIiksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoIlNwYWNlIE9wZXJhIiwgInNwYWNlX29wZXJhIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoIlNwb3J0cyIsICJzcG9ydHMiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU3RlYW1wdW5rIiwgInN0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFtcHVuayIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTdHJhdGVneSIsICJzdHJhdGVneSIpLA0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTdHJvbmcgTGVhZCIsICJzdHJvbmdfbGVhZCIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJTdXBlciBIZXJvZXMiLCAic3VwZXJfaGVyb2VzIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoIlN1cGVybmF0dXJhbCIsICJzdXBlcm5hdHVyYWwiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiVGVjaG5vbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9naWNhbGx5IEVuZ2luZWVyZWQiLCAiVGVjaG5vbG9naWNhbGx5X0VuZ2luZWVyZWQiKSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiVGltZSBUcmF2ZWwiLCAiVGltZV9UcmF2ZWwiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJiYW4gRmFudGFzeSIsICJ1cmJhbl9mYW50YXN5IiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlZpbGxhaW5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMgTGVhZCIsICJ2aWxsYWlub3VzX2xlYWQiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiVmlydHVhbCBSZWFsaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR5IiwgInZpcnR1YWxfcmVhbGl0eSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJXYXIgYW5kIE1pbGl0YXJ5IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgIndhcl9hbmRfbWlsaXRhcnkiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiV3V4aWEiLCAid3V4aWEiKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiWGlhbnhpYSIsICJ4aWFueGlhIikNCiAgICAgICAgICAgIF0NCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfQ0KDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3Muc3RhdHVzZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdGlvbjogdHJ1ZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJDb21wbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV0ZWQiLCAiQ09NUExFVEVEIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIk9uZ29pbmciLCAiT05HT0lORyIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIaWF0dXMiLCAiSElBVFVTIiksDQoNCiAgICAgICAgICAgIF0NCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgfQ0KDQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MubGFuZ3VhZ2VzID0gew0KICAgICAgICAgICAgbXVsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlTZWxlY3Rpb246IGZhbHNlLA0KICAgICAgICAgICAgdmFsdWVzOiBbDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0kZhbiBGaWN0aW9uIiwgImZhbmZpY3Rpb24iKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiT3JpZ2luYWwiLCAibMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JpZ2luYWwiKQ0KICAgICAgICAgICAgXQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBbDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIkxhdGVzdCIsIHRydWUpLA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBTZWN0aW9uKCJjb21wbGV0ZWQiLCAiQ29tcGxldGVkIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICJDT01QTEVURUQiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m9uZ29pbmciLCAiT25nb2luZyIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WZpbmVkLCAiT05HT0lORyIpKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigicm9tYW5jZSIsICJSb21hbmNlIiwgIlNlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsicm9tYW5jZSJdKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImFjdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIsICJBY3Rpb24iLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIoWyJhY3Rpb24iXSkpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBTZWN0aW9uKCJteXN0ZXJ5IiwgIk15c3RlcnkiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIoWyJteXN0ZXJ5Il0pKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIF0NCg0KICAgICAgICAgICAgcmV0dXJuIHNlY3Rpb25zLmZpbHRlcih4ID0+ICFrZXlzIHx8IGtleXMuaW5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVkZXMoeC5uYW1lKSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgdHJhbnNsYXRlU2VjdGlvbjogYXN5bmMgZnVuY3Rpb24gKHNlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb24sIHBhZ2UpIHsNCiAgICAgICAgICAgIGlmIChzZWN0aW9uLmlkZW50aWZpZXIgPT0gIkxhdGVzdCIpDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgcmV0dXJuIGF3YWl0IHRoaXMubGF0ZXN0KHBhZ2UpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVybiBhd2FpdCB0aGlzLnNlYXJjaChzZWN0aW9uLmZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXIoKSwgcGFnZSk7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIH0sDQoNCiAgICAgICAgZGVmYXVsdEZpbHRlcjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGZpbHRlciA9IG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBGaWx0ZXIoKTsNCiAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5zZWFyY2hVcmwucmVwbGFjZSgieMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03B9IiwgcGFnZS50b1N0cmluZygpKS5yZXBsYWNlKCJ7cX0iLCBmaWx0ZXIudGl0bGUgfHwgIiIpOw0KICAgICAgICAgICAgaWYgKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GZpbHRlci5nZW5yZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICB1cmwgKz0gIiYiICsgZmlsdGVyLmdlbnJlcy5tYXAoeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA9PiAidGFnc0FkZD0iICsgeCkuam9pbigiJiIpDQoNCiAgICAgICAgICAgIGlmIChmaWx0ZXIuYWN0aXZlICYmIGZpbHRlci5hYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03RpdmUgIT0gIiIpDQogICAgICAgICAgICAgICAgdXJsICs9ICImc3RhdHVzPSIgKyBmaWx0ZXIuYWN0aXZlOw0KDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBpZiAoZmlsdGVyLmxhbmd1YWdlICYmIGZpbHRlci5sYW5ndWFnZSAhPSAiIikNCiAgICAgICAgICAgICAgICB1cmwgKz0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iZ0eXBlPSIgKyBmaWx0ZXIubGFuZ3VhZ2U7DQoNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwodXJsKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgiLmZpY3Rpb24tbGlzdC1pdGVtIikuZm9yRWFjaCh4ID0+IHsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKHguc2VsZWN0KCJpbWciKS5hdHRyKCJzcmMiKS51cmwoKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoIi5maWN0aW9uLXRpdGxlIikudGV4dCgpLA0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiIiwNCiAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoIi5maWN0aW9uLXRpdGxlIGEiKS5hdHRyKCJocmVmIikudXJsKCksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN1bHQ7DQoNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXROb3ZlbDogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsKSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5nZXRIdG1sKG5vdmVsVXJsKSk7DQogICAgICAgICAgICB2YXIgY2hhcHRlcnMgPSBjb250YWluZXIuZmluZCgiI2NoYXB0ZXJzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRib2R5IHRyIikubWFwKHggPT4geC5zZWxlY3QoImEiKSkuZmlsdGVyKHggPT4geC5oYXNFbGVtZW50KCkpLm1hcCh4ID0+IG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBDaGFwdGVyKHgudGV4dCgpLCB4LmF0dHIoImhyZWYiKS51cmwoKSkpOw0KICAgICAgICAgICAgdmFyIG5vdmVsUmV2aWV3cyA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBOb3ZlbFJldmlld3MoKTsNCiAgICAgICAgICAgIHZhciBpbmZvcyA9IGNvbnRhaW5lci5zZWxlY3QoIi5maWN0aW9uLWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m8gLmNvbC1tZC04Iik7DQoNCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5nZW5yZXMgPSBpbmZvcy5maW5kKCIudGFncyBhIikudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV4dEFycmF5KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuYXV0aG9yID0gY29udGFpbmVyLnNlbGVjdCgiLmZpYy10aXRsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SBzcGFuW3Byb3BlcnR5PW5hbWVdIikudGV4dCgpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmRlc2NyaXB0aW9uID0gY29udMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFpbmVyLnNlbGVjdCgiLmRlc2NyaXB0aW9uIikuY2xlYW5Jbm5lckhUTUwoKTsNCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU021wbGV0ZWQgPSBjb250YWluZXIuc2VsZWN0KCIudGFncyIpLmNsb3Nlc3QoImRpdiIpLmZpbmQoInNwYW4iKS53aGVyZSh4ID0+IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HguaW5uZXJIVE1MKCkuaW5kZXhPZigiQ09NUExFVEVEIikgIT0gLTEpLmhhc0VsZW1lbnRzKCkgPyAiU3RhdHVzOkNvbXBsZXRlZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIgOiAiU3RhdHVzOk9uZ29pbmciDQogICAgICAgICAgICByZXR1cm4gbmV3IERldGFsaUl0ZW0oDQogICAgICAgICAgICAgICAgYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029udGFpbmVyLnNlbGVjdCgiLnRleHQtY2VudGVyIGltZyIpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRhaW5lci5zZWxlY3QoIi5maWMtdGl0bGUgaDEiKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICBub3ZlbFJldmlld3MuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVzY3JpcHRpb24sDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgICAgICAgICAgICAgY2hhcHRlcnMsDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIHRoaXMubmFtZSwNCiAgICAgICAgICAgICAgICB1bmRlZmluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZXI6IGFzeW5jIGZ1bmN0aW9uICh1cmwpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYW5DaGFwdGVyKHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xlYW5lci5nZXRDbGllbnQoKS5nZXRIdG1sKHVybCkpLnNlbGVjdCgiLmNoYXB0ZXItY29udGVudCIpLCB0aGlzLm5hbWUpOw0KDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIH0sDQoNCiAgICAgICAgbGF0ZXN0OiBhc3luYyBmdW5jdGlvbiAocGFnZSkgew0KICAgICAgICAgICAgdmFyIHVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA9IHRoaXMubGF0ZXN0VXJsLnJlcGxhY2UoIntwfSIsIHBhZ2UudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB2YXIgY29udGFpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyID0gdGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgICAgY29udGFpbmVyLnNlbGVjdCgiLmZpY3Rpb24tbGlzdC1pdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVtIikuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB4LnNlbGVjdCgiaW1nIikuYXR0cigic3JjIikudXJsKCksDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIuZmljdGlvbi10aXRsZSIpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgICAgICAiIiwNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgeC5zZWxlY3QoIi5maWN0aW9uLXRpdGxlIGEiKS5hdHRyKCJocmVmIikudXJsKCksDQogICAgICAgICAgICAgICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICB9DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KDQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPT0gIkNsZWFuZXIiKTsNCiAgICAgICAgdGhpcy5pZCA9ICIxLnNjcmliYmxlaHViIjsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldGFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgICB0aGlzLnBhcnNlckxhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0md1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ1NjcmliYmxlSHViJzsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA9ICJSLU5vdmVsLUh1YiI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vd3d3LnNjcmliYmxlaHViLmNvbS8/cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Gc9e3B9JzsNCiAgICAgICAgdGhpcy51cmwgPSAnaHR0cHM6Ly93d3cuc2NyaWJibGVodWIuY29tJzsNCiAgICAgICAgdGhpcy5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFyY2hVcmwgPSAnaHR0cHM6Ly93d3cuc2NyaWJibGVodWIuY29tLz9zPXtxfSZwb3N0X3R5cGU9ZmljdGlvbnBvc3RzJzsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdGhpcy5wYW5pbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gZmFsc2U7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHRoaXMuaWNvbiA9ICdodHRwczovL3d3dy5zY3JpYmJsZWh1Yi5jb20vZmF2aWNvbi5pY28nOw0KICAgICAgICB0aGlzLnBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlclNlYXJjaFNldHRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldHRpbmdzKCk7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V0dGluZ3MubXVsdGlTZWxlY3Rpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLnNvcnRUeXBlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yA9IHsNCiAgICAgICAgICAgIG11bHRpU2VsZWN0aW9uOiBmYWxzZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIG5ldyBsYWJlbFZhbHVlKCdDaGFwdGVycyBwZXIgV2VlaycsICJmcmVxdWVuY3kiKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgnRGF0ZSBBZGRlZCcsICJkYXRlYWRkZWQiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mF2b3JpdGVzJywgImZhdm9yaXRlcyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdMYXN0IFVwZGF0ZScsICJsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XN0Y2hwZGF0ZSIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdOdW1iZXIgb2YgUmF0aW5ncycsICJudW1vZnJhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GUiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUGFnZXMnLCAicGFnZXMiKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgnUGFnZXZpZXdzJywgInBhZ2V2aWV3cyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdSYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRpbmdzJywgInJhdGluZ3MiKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnUmVhZGVycycsICJyZWFkZXJzIiksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1RvdGFsIFdvcmRzJywgInRvdGFsd29yZHMiKSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0F0sDQogICAgICAgIH07DQoNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBtdWx0aVNlbGVjdGlvbjogdHJ1ZSwNCiAgICAgICAgICAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVlKCJBY3Rpb24iLCA5KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQ29tZWR5IiwgNyksDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgbmV3IGxhYmVsVmFsdWUoIkZhbnRhc3kiLCAxOSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhpc3RvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mljYWwiLCAyMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkxpdFJQRyIsIDExODApLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCJNeXN0ZXJ5IiwgOTA5KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2NpLWZpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iwgOTEyKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWR1bHQiLCA5MDIpLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJEcmFtYSIsIDkwMyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkdlbmRlciBCZW5kZXIiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA5MDUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIb3Jyb3IiLCAyMiksDQogICAgICAgICAgICAgICAgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GxhYmVsVmFsdWUoIk1hcnRpYWwgQXJ0cyIsIDkwNyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlBzeWNob2xvZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02ljYWwiLCA5MTApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJTZWluZW4iLCA5MTMpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5ldyBsYWJlbFZhbHVlKCJTdXBlcm5hdHVyYWwiLCA1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWR2ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W50dXJlIiwgOCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkVjY2hpIiwgOTA0KSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBuZXcgbGFiZWxWYWx1ZSgiR2lybHMgTG92ZSIsIDg5MiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIklzZWthaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SIsIDM3KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiTWF0dXJlIiwgMjApLA0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBsYWJlbFZhbHVlKCJSb21hbmNlIiwgNiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNsaWNlIG9mIExpZmUiLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA5MTQpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJUcmFnZWR5IiwgOTAxKSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgiQm95cyBMb3ZlIiwgODkxKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRmFuZmljdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iIsIDM4KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiSGFyZW0iLCAxMDE1KSwNCiAgICAgICAgICAgICAgICBuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XcgbGFiZWxWYWx1ZSgiSm9zZWkiLCA5MDYpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJNZWNoYSIsIDkwOCksDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIlNjaG9vbCBMaWZlIiwgOTExKSwNCiAgICAgICAgICAgICAgICBuZXcgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFiZWxWYWx1ZSgiU211dCIsIDkxNSksDQoNCiAgICAgICAgICAgIF0NCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMucGFyc2VyUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VhcmNoU2V0dGluZ3Muc3RhdHVzZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YWx1ZXM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWxsIiwgImFsbCIpLA0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G5ldyBsYWJlbFZhbHVlKCJDb21wbGV0ZWQiLCAiY29tcGxldGVkIiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0k9uZ29pbmciLCAib25nb2luZyIpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJIaWF0dXMiLCAiaGlhdHVzIikNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DQogICAgICAgIGdldFNlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Rpb25zOiBmdW5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgICAgICAgICAgICAgIG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBTZWN0aW9uKCJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKSwNCiAgICAgICAgICAgICAgICBuZXcgUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VjdGlvbigicG9wdWxhciIsICJQb3B1bGFyIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKHVuZGVmaW5lZCwgInBhZ2V2aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WV3cyIpKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigiZmF2b3JpdGVzIiwgIkZhdm9yaXRlcyIsICJTZWFyY2giLCBmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsICJmYXZvcml0ZXMiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XBsZXRlZCIsICJDb21wbGV0ZWQiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVmaW5lZCwgImNvbXBsZXRlZCIpKQ0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICB0cmFuc2xhdGVTZWN0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKHNlY3Rpb24uaWRlbnRpZmllciA9PMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAiTGF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocGFnZSk7DQogICAgICAgICAgICBlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdGVyOiBmdW5jdGlvbiAoKSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YXIgZmlsdGVyID0gbmV3IEZpbHRlcih1bmRlZmluZWQsICJwYWdldmlld3MiLCB1bmRlZmluZWQsICJhbGwiKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyLCBwYWdlKSB7DQogICAgICAgICAgICB2YXIgc29ydFR5cGVVcmkgPSAiaHR0cHM6Ly93d3cuc2NyaWJibGVodWIuY29tLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03Nlcmllcy1maW5kZXIvP3NmPTEmZ2k9e2d9Jm1naT1hbmQmc29ydD17c29ydH0mb3JkZXI9ZGVzYyZjcD17c3RhdHVzfSZwZz0iIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CsgcGFnZTsNCiAgICAgICAgICAgIHZhciBzb3J0VHlwZVVybCA9IHNvcnRUeXBlVXJpLnJlcGxhY2UoIntnfSIsIGZpbHRlci5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5yZXMuam9pbigiLCIpKS5yZXBsYWNlKCJ7c29ydH0iLCBmaWx0ZXIuc29ydFR5cGUpLnJlcGxhY2UoIntzdGF0dXN9IiwgZmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyLmFjdGl2ZSk7DQoNCiAgICAgICAgICAgIHZhciB1cmwgPSBmaWx0ZXIudGl0bGUgJiYgZmlsdGVyLnRpdGxlLmxlbmd0aCA+IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DAgPyB0aGlzLnNlYXJjaFVybC5yZXBsYWNlKCJ7cX0iLCBmaWx0ZXIudGl0bGUpIDogc29ydFR5cGVVcmw7DQoNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcShhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Eh0bWwodXJsKSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBjb250YWluZXIuZmluZCgiLnNlYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJjaF9tYWluX2JveCIpLmZvckVhY2goeCA9PiB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IExpZ2h0SXRlbSgNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgeC5zZWxlY3QoImltZyIpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB4LnNlbGVjdCgiLnNlYXJjaF90aXRsZSIpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgICAgICAiIiwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgeC5zZWxlY3QoIi5zZWFyY2hfdGl0bGUgYSIpLmF0dHIoImhyZWYiKS51cmwoKSwNCiAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgdGhpcy5uYW1lKSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICAgICAgZ2V0Q2hhcHRlcnM6IGFzeW5jIGZ1bmN0aW9uIChpZCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coInN0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lNJRDoiICsgaWQpDQogICAgICAgICAgICB2YXIgaHRtbCA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9zdEZvcm0oImh0dHBzOi8vd3d3LnNjcmliYmxlaHViLmNvbS93cC1hZG1pbi9hZG1pbi1hamF4LnBocCIsIHsNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBhY3Rpb246ICJ3aV9nZXR0b2NjaHAiLA0KICAgICAgICAgICAgICAgIHN0clNJRDogcGFyc2VJbnQoaWQpLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIHN0cm15cG9zdGlkOiAwLA0KICAgICAgICAgICAgICAgIHN0ckZpYzogInllcyINCiAgICAgICAgICAgIH0pOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VyLmpxKHBhcnNlSHRtbChodG1sKSkuZmluZCgiYSIpLm1hcCh4ID0+IG5ldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0yBDaGFwdGVyKHgudGV4dChmYWxzZSksIHguYXR0cigiaHJlZiIpLnVybCgpKSk7DQogICAgICAgIH0sDQogICAgICAgIGdldE5vdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVsOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Shhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaWQpLmdldEh0bWwobm92ZWxVcmwpKTsNCiAgICAgICAgICAgIHZhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBpZCA9IGNvbnRhaW5lci5zZWxlY3QoIiNteXBvc3RpZCIpLm5vZGVWYWx1ZSgpID8gY29udGFpbmVyLnNlbGVjdCgiI215cG9zdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlkIikubm9kZVZhbHVlKCkgOiBub3ZlbFVybC5zcGxpdCgiLyIpW25vdmVsVXJsLnNwbGl0KCIvIikuaW5kZXhPZigic2VyaWVzIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikgKyAxXTsNCiAgICAgICAgICAgIHZhciBjaGFwdGVycyA9IGF3YWl0IHRoaXMuZ2V0Q2hhcHRlcnMoaWQgfHwgIiIpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoLyIocmF0aW5nVmFsdWUpIjoiKChcXCJ8W14iXSkqKSIvLCAiaSIpDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB2YXIgcmVzID0gcmVnLmV4ZWMoY29udGFpbmVyLmlubmVySFRNTCgpKTsNCiAgICAgICAgICAgIHZhciByYXRlID0gZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XZhbCgocmVzICYmIHJlcy5sZW5ndGggPiAwID8gKHJlcy5maW5kQXQoMCkgfHwgIiIpLnNwbGl0KCI6IikubGFzdCgpIHx8ICIiIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0DogIjEiKSk7DQogICAgICAgICAgICB2YXIgbm92ZWxSZXZpZXdzID0gbmV3IE5vdmVsUmV2aWV3cygpOw0KICAgICAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m92ZWxSZXZpZXdzLmF1dGhvciA9IGNvbnRhaW5lci5zZWxlY3QoIltwcm9wZXJ0eT0nYXV0aG9yJ10gLmF1dGhfbmFtZV9maWMiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S50ZXh0KGZhbHNlKTsNCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5nZW5yZXMgPSBjb250YWluZXIuZmluZCgiLndpX2ZpY19nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5yZSBhIikudGV4dEFycmF5KCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gIlJhdGluZzoiICsgcGFyc2VJbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nQocmF0ZSA/IHJhdGUgOiAiMSIpLnRvRml4ZWQoMCkgKyAiLzUiOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA9IGNvbnRhaW5lci5zZWxlY3QoIi53aWRnZXRfZmljX3NpbWlsYXIiKS50ZXh0KGZhbHNlKS5pbmRleE9mKCJDb21wbGV0ZWQiKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SAhPSAtMSA/ICJTdGF0dXM6Q29tcGxldGVkIiA6ICJTdGF0dXM6T25nb2luZyI7DQogICAgICAgICAgICByZXR1cm4gbmV3IERldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GFsaUl0ZW0oDQogICAgICAgICAgICAgICAgY29udGFpbmVyLnNlbGVjdCgiLm5vdmVsLWNvdmVyIGltZyIpLmF0dHIoInNyYyIpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5maWNfdGl0bGUnKS50ZXh0KGZhbHNlKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcud2lfZmljX2Rlc2MnKS5jbGVhbklubmVySFRNTCgpLA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIG5vdmVsVXJsLA0KICAgICAgICAgICAgICAgIGNoYXB0ZXJzLnJldmVyc2UoKSwNCiAgICAgICAgICAgICAgICBub3ZlbFJldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlld3MsDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ck7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2hhcHRlcjogYXN5bmMgZnVuY3Rpb24gKHVybCkgew0KICAgICAgICAgICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIHRoaXMuY2xlYW5lci5jbGVhbkNoYXB0ZXIodGhpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch0aGlzLmlkKS5nZXRIdG1sKHVybCkpLnNlbGVjdCgiLmNocF9yYXciKSwgdGhpcy5uYW1lKTsNCiAgICAgICAgfSwNCg0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5sYXRlc3RVcmwucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVwbGFjZSgie3B9IiwgcGFnZS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Shhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoIiNtYWluX3JlbGVhc2VzIHRkIikuZm9yRWFjaCh4ID0+IHsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICByZXN1bHQucHVzaChuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICB4LnNlbGVjdCgiaW1nIikuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR0cigic3JjIikudXJsKCksDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCIuZnBfdGl0bGUiKS50ZXh0KGZhbHNlKSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgIiIsDQogICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCIuZnBfdGl0bGUiKS5hdHRyKCJocMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVmIikudXJsKCksDQogICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSkpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9DQoNCiAgICB9DQogICAgcmV0dXJuIG5ldyBQYXJzZXIoKTsNCg0KfQ==&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQoNCg0KICAgIGZ1bmN0aW9uIFBhcnNlcigpIHsNCiAgICAgICAgdGhpcy5jbGVhbmVyIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gcGx1Z2lucy5maW5kKHggPT4geC5uYW1lID09ICJDbGVhbmVyIik7DQogICAgICAgIHRoaXMuaWQgPSAiMS50YXByZWFkIjsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldGFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgICB0aGlzLnBhcnNlckxhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0md1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ1RhcFJlYWQnOw0KICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lQtTm92ZWwtUmVhZCI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vd3d3LnRhcHJlYWQuY29tL2FqYXgvYm9vaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y9sYXN0dXBkYXRlbGlzdCc7DQogICAgICAgIHRoaXMudXJsID0gJ2h0dHBzOi8vd3d3LnRhcHJlYWQuY29tLyc7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuc2VhcmNoVXJsID0gJ2h0dHBzOi8vd3d3LnRhcHJlYWQuY29tL2FqYXgvc2VhcmNoL3N0b3J5JzsNCiAgICAgICAgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5wYW5pbmF0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zZWFyY2hQYWdpbmF0aW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WNvbiA9ICdodHRwczovL3N0YXRpYy50YXByZWFkLmNvbS9wYy9pbWFnZXMvZmF2aWNvbi5pY28nOw0KICAgICAgICB0aGlzLnBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlclNlYXJjaFNldHRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldHRpbmdzKCk7DQoNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02hTZXR0aW5ncy5nZW5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgICB2YWx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XM6IFsNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiQWxsIiwgMCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFsdWUoIld1eGlhJlhpYW54aWEiLCAxKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiRmFudGFzeSIsIDIpLA0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJSb21hbmNlIiwgMyksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WUoIkxHQlQrIiwgNDMpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCJVcmJhbiIsIDQ0KSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiR2FtZXMiLCA0NSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkVhc3Rlcm4iLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA0NiksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoIkhvcnJvciZUaHJpbGxlciIsIDQ3KSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgiSGlzdG9yaWNhbCIsIDc1KSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgiU2NpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0UZpIiwgNzYpLA0KDQogICAgICAgICAgICBdDQogICAgICAgIH0NCiAgICB9DQoNCg0KICAgIFBhcnNlci5wcm90b3R5cGUgPSB7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIGdldFNlY3Rpb25zOiBmdW5jdGlvbiAoa2V5cykgew0KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gWw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJsYXRlc3QiLCAiTGF0ZXN0IFVwZGF0ZSIsICJMYXRlc3QiLCB0cnVlKSwNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgU2VjdGlvbigiaG9ycm9yIiwgIkhvcnJvciZUaHJpbGxlciIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcihbNDddKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oInJvbWFuY2UiLCAiUm9tYW5jZSIsICJTZWFyY2giLCBmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSwgbmV3IEZpbHRlcihbM10pKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigiZmFudGFzeSIsICJGYW50YXN5IiwgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsyXSkpLA0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICByZXR1cm4gc2VjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbnMuZmlsdGVyKHggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICB0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaWYgKHNlY3Rpb24uaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WRlbnRpZmllciA9PSAiTGF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlc3QocGFnZSk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3Rpb24uZmlsdGVyIHx8IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdGVyOiBmdW5jdGlvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAoKSB7DQogICAgICAgICAgICB2YXIgZmlsdGVyID0gbmV3IEZpbHRlcigpOw0KICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgfSwNCg0KICAgICAgICBnZXRHZW5yZTogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgdmFyIHVybCA9ICJodHRwczovL3d3dy50YXByZWFkLmNvbS9hamF4L2NhdGVnb3J5L2RldGFpbCI7DQogICAgICAgICAgICB2YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIgcmVzdWx0ID0gW107DQogICAgICAgICAgICB2YXIgZGF0YSA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkucG9zdEZvcm0odXJsLCB7IGNhdGVJZDogZmlsdGVyLmdlbnJlc1swXSwgcGFnZU5vOiBwYWdlIH0pOw0KICAgICAgICAgICAgaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYgKGRhdGEgJiYgZGF0YS5yZXN1bHQgJiYgZGF0YS5yZXN1bHQuYm9va0xpc3QpIHsNCiAgICAgICAgICAgICAgICBkYXRhLnJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VsdC5ib29rTGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBMaWdodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0El0ZW0oDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFuZXIuZ2V0Tm92ZWxJZCh0aGlzLm5hbWUsICJnZXROb3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIsIFtpdGVtLmJvb2tJZCwgdHJ1ZV0pLCBpdGVtLmJvb2tOYW1lLCBpdGVtLmRlc2NyaXB0aW9uLCBpdGVtLmJvb2tJZCwgdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5uYW1lKSkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICB9LA0KDQogICAgICAgIHNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgaWYgKGZpbHRlci5nZW5yZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRHZW5yZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ShmaWx0ZXIsIHBhZ2UpOw0KDQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICB2YXIgZGF0YSA9IGF3YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkucG9zdEZvcm0odGhpcy5zZWFyY2hVcmwsIHsgc2VhcmNoVGV4dDogZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mlsdGVyLnRpdGxlIHx8ICIiLCBzdG9yeVR5cGU6IDEsIHBhZ2VObzogcGFnZSB9KTsNCiAgICAgICAgICAgIGlmIChkYXRhICYmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GRhdGEucmVzdWx0ICYmIGRhdGEucmVzdWx0LnN0b3J5TGlzdCkgew0KICAgICAgICAgICAgICAgIGRhdGEucmVzdWx0LnN0b3J5TMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlzdC5mb3JFYWNoKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBMaWdodEl0ZW0odGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5jbGVhbmVyLmdldE5vdmVsSWQodGhpcy5uYW1lLCAiZ2V0Tm92ZWwiLCBbaXRlbS5zdG9yeUlkLCB0cnVlXSksIGl0ZW0uc3RvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nlOYW1lLCAiIiwgaXRlbS5zdG9yeUlkLCB0aGlzLm5hbWUpKQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZXJzOiBhc3luYyBmdW5jdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbiAoYm9va0lkKSB7DQogICAgICAgICAgICB2YXIgZGF0YSA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CkucG9zdEZvcm0oImh0dHBzOi8vd3d3LnRhcHJlYWQuY29tL2FqYXgvYm9vay9jb250ZW50cyIsIHsgYm9va0lkOiBib29rSWQgfMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnJlc3VsdCAmJiBkYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRhLnJlc3VsdC5jaGFwdGVyTGlzdCkNCiAgICAgICAgICAgICAgICBkYXRhLnJlc3VsdC5jaGFwdGVyTGlzdC5mb3JFYWNoKGl0ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W0gPT4gew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuZXcgQ2hhcHRlcihpdGVtLmNoYXB0ZXJOYW1lLCAoaXRlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5ib29rSWQgKyAiLyIgKyBpdGVtLmNoYXB0ZXJJZCkudXJpKCJodHRwczovL3d3dy50YXByZWFkLmNvbS9hamF4L2Jvb2svY2hhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlciIpKSkNCiAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCg0KICAgICAgICB9LA0KDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIGdldE5vdmVsOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwsIGlnbm9yZWNoYXB0ZXJzKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBub3ZlbFVybCA9IHBhcnNlSW50KG5vdmVsVXJsKS50b1N0cmluZygpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybC50b1N0cmluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ygpLnVyaSgiaHR0cHM6Ly93d3cudGFwcmVhZC5jb20vYm9vay9kZXRhaWwvIiksIGlnbm9yZWNoYXB0ZXJzKSk7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB2YXIgY2hhcHRlcnMgPSAhaWdub3JlY2hhcHRlcnMgPyBhd2FpdCB0aGlzLmdldENoYXB0ZXJzKG5vdmVsVXJsKSA6IFtdOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdmFyIG5vdmVsUmV2aWV3cyA9IG5ldyBOb3ZlbFJldmlld3MoKTsNCiAgICAgICAgICAgIG5vdmVsUmV2aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WV3cy5nZW5yZXMgPSBjb250YWluZXIuZmluZCgiLmJhc2UtaW5mbyAuYm9vay1jYXRhbG9nIC50eHQiKS50ZXh0QXJyYXkoKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5hdXRob3IgPSBjb250YWluZXIuc2VsZWN0KCIuYXV0aG9yIC5uYW1lIikudGV4dChmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxzZSk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gY29udGFpbmVyLnNlbGVjdCgiLnNjb3JlIikudGV4dCgpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CsgIiAvIDUiOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLmNvbXBsZXRlZCA9IGNvbnRhaW5lci5zZWxlY3QoIi5iYXNlLWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m8gLmJvb2stc3RhdGUgLnR4dCIpLnRleHQoZmFsc2UpID09PSAiQ29tcGxldGVkIiA/ICJTdGF0dXM6Q29tcGxldGVkIiA6ICJTdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF0dXM6T25nb2luZyI7DQogICAgICAgICAgICByZXR1cm4gbmV3IERldGFsaUl0ZW0oDQogICAgICAgICAgICAgICAgY29udGFpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVyLnNlbGVjdCgnLmJvb2staW1nIGltZycpLmF0dHIoInNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoJy5ib29rLW5hbWUnKS50ZXh0KGZhbHNlKSwNCiAgICAgICAgICAgICAgICBjb250YWluZXIuc2VsZWN0KCcuZGVzYycpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNsZWFuSW5uZXJIVE1MKCksDQogICAgICAgICAgICAgICAgbm92ZWxVcmwsDQogICAgICAgICAgICAgICAgY2hhcHRlcnMsDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgbm92ZWxSZXZpZXdzLA0KICAgICAgICAgICAgICAgIHRoaXMubmFtZSwNCiAgICAgICAgICAgICAgICB1bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mRlZmluZWQsDQogICAgICAgICAgICApOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldENoYXB0ZXI6IGFzeW5jIGZ1bmN0aW9uIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ch1cmwpIHsNCiAgICAgICAgICAgIHZhciB1cmxDb250ZW50ID0gdXJsLnNwbGl0KCIvIik7DQogICAgICAgICAgICB2YXIgYm9vaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU00lkID0gdXJsQ29udGVudFt1cmxDb250ZW50Lmxlbmd0aCAtIDJdOw0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJJZCA9IHVybENvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRlbnRbdXJsQ29udGVudC5sZW5ndGggLSAxXTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJib29rSWQ6IiArIGJvb2tJZCkNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjaGFwdGVySWQ6IiArIGNoYXB0ZXJJZCkNCiAgICAgICAgICAgIHZhciBkYXRhID0gYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5wb3N0Rm9ybSgiaHR0cHM6Ly93d3cudGFwcmVhZC5jb20vYWpheMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C9ib29rL2NoYXB0ZXIiLCB7IGJvb2tJZDogYm9va0lkLCBjaGFwdGVySWQ6IGNoYXB0ZXJJZCB9KQ0KICAgICAgICAgICAgaWYgKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GRhdGEgJiYgZGF0YS5yZXN1bHQpDQogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEucmVzdWx0LmNvbnRlbnQ7DQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICByZXR1cm4gIlNvbWV0aGluZyB3ZW50IHdyb25nIjsNCg0KICAgICAgICB9LA0KDQogICAgICAgIGxhdGVzdDogYXN5bmMgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nVuY3Rpb24gKHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmxhdGVzdFVybDsNCiAgICAgICAgICAgIHZhciBkYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRhID0gYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5wb3N0Rm9ybSh1cmwsIHsgYW1vdW10OiAwLCBwYWdlTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m86IHBhZ2UgfSk7DQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107DQogICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnJlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VsdCAmJiBkYXRhLnJlc3VsdCkgew0KICAgICAgICAgICAgICAgIGRhdGEucmVzdWx0LmZvckVhY2goaXRlbSA9PiB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBMaWdodEl0ZW0odGhpcy5jbGVhbmVyLmdldE5vdmVsSWQodGhpcy5uYW1lLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAiZ2V0Tm92ZWwiLCBbaXRlbS5ib29rSWQsIHRydWVdKSwgaXRlbS50aXRsZSwgIiIsIGl0ZW0uYm9va0lkLCB0aGlzLm5hbWUpKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Q0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB9DQogICAgfQ0KICAgIHJldHVybiBuZXcgUGFyc2VyKCk7DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KICAgIGZ1bmN0aW9uIFBhcnNlcigpIHsNCiAgICAgICAgdGhpcy5pZCA9ICIxLndubXRsbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03JnIjsNCiAgICAgICAgdGhpcy5kZXRhbGlJdGVtVHlwZSA9IERldGFsaUl0ZW1UeXBlLk5vdmVsOw0KICAgICAgICB0aGlzLnBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlckxhbmd1YWdlID0gImVuIjsNCiAgICAgICAgdGhpcy5uYW1lID0gJ1dubXRsJzsNCiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA9ICJXLU1UTCI7DQogICAgICAgIHRoaXMubGF0ZXN0VXJsID0gJ2h0dHBzOi8vYXBpLm15c3Rvcnl3YXZlLmNvbS9zdG9yeS13YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XZlLWJhY2tlbmQvYXBpL3YxL2NvbnRlbnQvYm9va3MvY3VzdG9tL0xhc3RVcGRhdGVkTG9jYWwnOw0KICAgICAgICB0aGlzLnVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA9ICdodHRwOi8vd3d3LndubXRsLm9yZyc7DQogICAgICAgIHRoaXMuc2VhcmNoVXJsID0gIiI7DQogICAgICAgIHRoaXMucGFuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaXMuc2VhcmNoUGFnaW5hdGlvbiA9IHRydWU7DQogICAgICAgIHRoaXMuaWNvbiA9IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CdodHRwczovL25vdmVsZnVsbC5jb20vd2ViL2ltYWdlcy9mYXZpY29uLmljbyc7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V0dGluZ3MgPSBuZXcgUGFyc2VyU2VhcmNoU2V0dGluZ3MoKTsNCiAgICAgICAgdGhpcy5wYXJzZXJTZWFyY2hTZXR0aW5ncy5nZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5yZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogZmFsc2UsDQogICAgICAgICAgICB2YWx1ZXM6IFsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnRmFudGFzeScsIDEpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdTYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02ktZmknLCAyKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnU3BvcnRzJywgMyksDQogICAgICAgICAgICAgICAgbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV3IGxhYmVsVmFsdWUoJ1VyYmFuJywgNCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0Vhc3Rlcm4gRmFudGFzeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ScsIDUpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIb3Jyb3ImVGhyaWxsZXInLCA2KSwNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICBuZXcgbGFiZWxWYWx1ZSgnVmlkZW8gR2FtZScsIDcpLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdIaXN0bMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03J5JywgOCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1dhcicsIDkpLA0KICAgICAgICAgICAgICAgIG5ldyBsYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WJlbFZhbHVlKCdVcmJhbiBSb21hbmNlJywgMTApLA0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdGYW50YXN5IFJvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFuY2UnLCAxMSksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0hpc3RvcmljYWwgUm9tYW5jZScsIDEyKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnVGVlbicsIDEzKSwNCiAgICAgICAgICAgICAgICBuZXcgbGFiZWxWYWx1ZSgnTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EdCVCsnLCAxNCksDQogICAgICAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ1JvbWFuY2UnLCAxNSksDQogICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgbmV3IGxhYmVsVmFsdWUoJ09USEVSUysnLCAxNiksDQogICAgICAgICAgICBdLA0KICAgICAgICB9DQogICAgICAgIHRoaXMuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xlYW5lciA9IHBsdWdpbnMuZmluZCh4ID0+IHgubmFtZSA9PSAiQ2xlYW5lciIpOw0KICAgICAgICB0aGlzLmNsZWFuZXIuZ2V0QMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02xpZW50KHRoaXMuaWQpLmFkZFN0YXRpY0hlYWRlcigic2l0ZS1kb21haW4iLCAid25tdGwub3JnIik7DQogICAgfQ0KDQoNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBQYXJzZXIucHJvdG90eXBlID0gew0KICAgICAgICBnZXRTZWN0aW9uczogZnVuY3Rpb24gKGtleXMpIHsNCiAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HZhciBzZWN0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigibGF0ZXN0IiwgIkxhdGVzdCBVcGRhdGUiLCAiTMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GF0ZXN0IiwgdHJ1ZSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oIlVyYmFuIiwgIlVyYmFuIE5vdmVsIiwgIlNlYXJjaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIsIGZhbHNlLCBuZXcgRmlsdGVyKFs0XSkpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJSb21hbmNlIiwgIlJvbWFuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UgTm92ZWwiLCAiU2VhcmNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIoWzE1XSkpLA0KICAgICAgICAgICAgXQ0KDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CByZXR1cm4gc2VjdGlvbnMuZmlsdGVyKHggPT4gIWtleXMgfHwga2V5cy5pbmNsdWRlcyh4Lm5hbWUpKTsNCiAgICAgICAgfSwNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICB0cmFuc2xhdGVTZWN0aW9uOiBhc3luYyBmdW5jdGlvbiAoc2VjdGlvbiwgcGFnZSkgew0KICAgICAgICAgICAgaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WYgKHNlY3Rpb24uaWRlbnRpZmllciA9PSAiTGF0ZXN0IikNCiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5sYXRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03QocGFnZSk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2VhcmNoKHNlY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024uZmlsdGVyIHx8IHRoaXMuZGVmYXVsdEZpbHRlcigpLCBwYWdlKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWZhdWx0RmlsdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVyOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEZpbHRlcigpOw0KICAgICAgICB9LA0KDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlYXJjaDogYXN5bmMgZnVuY3Rpb24gKGZpbHRlciwgcGFnZSkgew0KICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwczovL2FwaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S5teXN0b3J5d2F2ZS5jb20vc3Rvcnktd2F2ZS1iYWNrZW5kL2FwaS92MS9jb250ZW50L2Jvb2tzPyZwYWdlTnVtYmVyPSIgKyBwYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WdlICsgIiZwYWdlU2l6ZT0xMDAiDQogICAgICAgICAgICBpZiAoZmlsdGVyLmdlbnJlcyAmJiBmaWx0ZXIuZ2VucmVzLmxlbmd0aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CA+IDApIHsNCiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAiJmdlbnJlPSIgKyBmaWx0ZXIuZ2VucmVzW2ZpbHRlci5nZW5yZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMubGVuZ3RoIC0gMV07DQogICAgICAgICAgICB9IGVsc2UgdXJsID0gdXJsID0gImh0dHBzOi8vYXBpLm15c3Rvcnl3YXZlLmNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S9zdG9yeS13YXZlLWJhY2tlbmQvYXBpL3YxL2NvbnRlbnQvYm9va3Mvc2VhcmNoP2tleVdvcmQ9IiArIGZpbHRlci50aXRsZSArIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CImcGFnZU51bWJlcj0iICsgcGFnZSArICImcGFnZVNpemU9MTAwIg0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGF3YWl0IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuR2V0SnNvbih1cmwpOw0KICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5kYXRhLmxpc3QubWFwKHggPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB4LmNvdmVySW1nVXJsLA0KICAgICAgICAgICAgICAgICAgICB4LnRpdGxlLA0KICAgICAgICAgICAgICAgICAgICAnJMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ywNCiAgICAgICAgICAgICAgICAgICAgImh0dHBzOi8vYXBpLm15c3Rvcnl3YXZlLmNvbS9zdG9yeS13YXZlLWJhY2tlbmQvYXBpLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03YxL2NvbnRlbnQvYm9va3MvIiArIHguaWQsIHRoaXMubmFtZQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9KTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgfSwNCg0KICAgICAgICBnZXRDaGFwdGVyczogYXN5bmMgZnVuY3Rpb24gKG5vdmVsVXJsKSB7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgY2hhcHRlcnMgPSBbXTsNCiAgICAgICAgICAgIHZhciBpZCA9IG5vdmVsVXJsLnNwbGl0KCIvIikubGFzdCgpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgdmFyIHVybCA9ICJodHRwczovL2FwaS5teXN0b3J5d2F2ZS5jb20vc3Rvcnktd2F2ZS1iYWNrZW5kL2FwaS92MS9jbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0250ZW50L2NoYXB0ZXJzL3BhZ2U/c29ydERpcmVjdGlvbj1BU0MmYm9va0lkPSIgKyBpZCArICImcGFnZU51bWJlcj0xJnBhZ2VTaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XplPTEwMDAwMCINCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBhd2FpdCB0aGlzLmNsZWFuZXIuZ2V0Q2xpZW50KHRoaXMuaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WQpLkdldEpzb24odXJsKTsNCiAgICAgICAgICAgIGlmIChjb250YWluZXIuZGF0YSAmJiBjb250YWluZXIuZGF0YS5saXN0KQ0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGNvbnRhaW5lci5kYXRhLmxpc3QuZm9yRWFjaCgoeCwgaSkgPT4gew0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CBjaGFwdGVycy5wdXNoKG5ldyBDaGFwdGVyKCh4LmNoYXB0ZXJPcmRlciAhPSB1bmRlZmluZWQgPyB4LmNoYXB0ZXJPcmRlciA6IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GkgKyAxKSArICItIiArIHgudGl0bGUsICJodHRwczovL2FwaS5teXN0b3J5d2F2ZS5jb20vc3Rvcnktd2F2ZS1iYWNrZW5kL2FwaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0S92MS9jb250ZW50L2NoYXB0ZXJzLyIgKyB4LmlkKSk7DQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgcmV0dXJuIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNoYXB0ZXJzOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldE5vdmVsOiBhc3luYyBmdW5jdGlvbiAobm92ZWxVcmwpIHsNCg0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuR2V0SnNvbihubMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03ZlbFVybCk7DQogICAgICAgICAgICB2YXIgY2hhcHRlcnMgPSBhd2FpdCB0aGlzLmdldENoYXB0ZXJzKG5vdmVsVXJsKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhciBub3ZlbFJldmlld3MgPSBuZXcgTm92ZWxSZXZpZXdzKCk7DQogICAgICAgICAgICBub3ZlbFJldmlld3MuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02VucmVzID0gW2NvbnRhaW5lci5kYXRhLmdlbnJlTmFtZV0NCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cy5hdXRob3IgPSBjb250YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WluZXIuZGF0YS5hdXRob3JQc2V1ZG9ueW07DQogICAgICAgICAgICBub3ZlbFJldmlld3MudXZvdGVzID0gY29udGFpbmVyLmRhdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GEucmF0aW5nQ291bnRzICsgIiAvIDUiOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBEZXRhbGlJdGVtKA0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGNvbnRhaW5lci5kYXRhLmNvdmVySW1nVXJsLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5kYXRhLnRpdGxlLA0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIHBhcnNlSHRtbChjb250YWluZXIuZGF0YS5zeW5vcHNpcykuY2xlYW5Jbm5lckhUTUwoKSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBub3ZlbFVybCwNCiAgICAgICAgICAgICAgICBjaGFwdGVycywNCiAgICAgICAgICAgICAgICBub3ZlbFJldmlld3MsDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgdGhpcy5uYW1lLA0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgICAgICk7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIH0sDQoNCg0KICAgICAgICBnZXRDaGFwdGVyOiBhc3luYyBmdW5jdGlvbiAodXJsKSB7DQogICAgICAgICAgICB2YXIgYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029udGFpbmVyID0gYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5HZXRKc29uKHVybCk7DQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CB2YXIgZGF0YSA9IGNvbnRhaW5lci5kYXRhLmNvbnRlbnQuc3BsaXQoIlxuIik7DQogICAgICAgICAgICBkYXRhID0gZGF0YS5maMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wx0ZXIoeCA9PiB4ICYmIHgubGVuZ3RoID4gMCkubWFwKHggPT4gIjxwPiIgKyB4ICsgIjwvcD4iKS5qb2luKCIiKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHJldHVybiB0aGlzLmNsZWFuZXIuY2xlYW5DaGFwdGVyKHBhcnNlSHRtbChkYXRhKSwgdGhpcy5uYW1lKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgfSwNCg0KICAgICAgICBsYXRlc3Q6IGFzeW5jIGZ1bmN0aW9uIChwYWdlKSB7DQogICAgICAgICAgICB2YXIgdXJsID0gdGhpcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5sYXRlc3RVcmw7DQogICAgICAgICAgICB2YXIgZGF0YSA9IGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9zdEpzb24odXJsLCB7IGNvbmRpdGlvbkpzb246ICd7InRpdGxlIjoiTGF0ZXN0IFVwZGF0ZXMiLG1heFNpemU6MTYsIG1vYmlsZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ul0ZW1zOjEyfScsIHBhZ2VOdW1iZXI6IHBhZ2UsIHBhZ2VTaXplOiAyMCB9KTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0TsNCiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmxpc3QgJiYgZGF0YS5kYXRhLmxpc3QubGVuZ3RoKSB7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICAgICAgZGF0YS5kYXRhLmxpc3QuZm9yRWFjaCh4ID0+IHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HguY292ZXJJbWdVcmwsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeC50aXRsZSwNCiAgICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaHR0cHM6Ly9hcGkubXlzdG9yeXdhdmUuY29tL3N0b3J5LMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XdhdmUtYmFja2VuZC9hcGkvdjEvY29udGVudC9ib29rcy8iICsgeC5pZCwgdGhpcy5uYW1lDQogICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICApKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gbmV3IFBhcnNlcigpOw0KfQ0K&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCwgcGx1Z2lucykgPT4gew0KDQogICAgZnVuY3Rpb24gUGFyc2VyKCkgew0KICAgICAgICB0aGlzLmNsZWFuZXIgPSBwbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HVnaW5zLmZpbmQoeCA9PiB4Lm5hbWUgPT0gIkNsZWFuZXIiKTsNCg0KICAgICAgICB0aGlzLmlkID0gIjEuemlubm92ZWwiOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB0aGlzLmRldGFsaUl0ZW1UeXBlID0gRGV0YWxpSXRlbVR5cGUuTm92ZWw7DQogICAgICAgIHRoaXMucGFyc2VyTGFuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VhZ2UgPSAiZW4iOw0KICAgICAgICB0aGlzLm5hbWUgPSAnWmluTm92ZWwnOw0KICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0lotTm92ZWwiOw0KICAgICAgICB0aGlzLmxhdGVzdFVybCA9ICdodHRwczovL3ppbm5vdmVsLmNvbS9wYWdlL3twfS8nOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB0aGlzLnVybCA9ICdodHRwczovL3ppbm5vdmVsLmNvbS8nOw0KICAgICAgICB0aGlzLnNlYXJjaFVybCA9ICcnOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB0aGlzLnBhbmluYXRpb24gPSB0cnVlOw0KICAgICAgICB0aGlzLnNlYXJjaFBhZ2luYXRpb24gPSBmYWxzZTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgdGhpcy5pY29uID0gJ2h0dHBzOi8vemlubm92ZWwuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIwLzA3L2Nyb3BwZWQtVW50aMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XRsZWQtMi0zMngzMi5qcGcnOw0KICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzID0gbmV3IFBhcnNlclNlYXJjaFNldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpbmdzKCk7DQogICAgICAgIHRoaXMucGFyc2VyU2VhcmNoU2V0dGluZ3MuZ2VucmVzID0gew0KICAgICAgICAgICAgbXVsdGlTZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3Rpb246IHRydWUsDQogICAgICAgICAgICB2YWx1ZXM6IFtdLA0KICAgICAgICB9Ow0KDQoNCiAgICAgICAgdGhpcy5wYXJzZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJTZWFyY2hTZXR0aW5ncy5zb3J0VHlwZXMgPSB7DQogICAgICAgICAgICBtdWx0aVNlbGVjdGlvbjogdHJ1ZSwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhbHVlczogWw0KICAgICAgICAgICAgICAgIG5ldyBsYWJlbFZhbHVlKCdPbmdvaW5nJywgJ29uLWdvaW5nJyksDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgbmV3IGxhYmVsVmFsdWUoJ0NvbXBsZXRlZCBOb3ZlbCcsICdlbmQnKSwNCiAgICAgICAgICAgIF0sDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIH07DQogICAgfQ0KDQogICAgUGFyc2VyLnByb3RvdHlwZSA9IHsNCiAgICAgICAgbG9hZFNldHRpbmdzOiBhc3luYyBmdW5jdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbiAoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlclNlYXJjaFNldHRpbmdzLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mdlbnJlcy52YWx1ZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCgiaHR0cHM6Ly96aW5ub3ZlbC5jb20vP3M9JnBvc3RfdHlwZT13cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C1tYW5nYSIpLnRoZW4oaHRtbCA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhcnNlci5qcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ShodG1sKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoIiNzZWFyY2gtYWR2YW5jZWQgLmNoZWNrYm94LWdybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03VwIC5jaGVja2JveCIpLmZvckVhY2goYSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlclNlYXJjaFNldMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRpbmdzLmdlbnJlcy52YWx1ZXMucHVzaChuZXcgbGFiZWxWYWx1ZShhLmZpbmQoImxhYmVsIikudGV4dCgpLCBhLmZpbmQoImlucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HV0IikuYXR0cigidmFsdWUiKS50ZXh0KCkpKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfSkNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCk7DQogICAgICAgICAgICB9DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uIChrZXlzKSB7DQogICAgICAgICAgICB2YXIgc2VjdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GlvbnMgPSBbDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImxhdGVzdCIsICJMYXRlc3QgVXBkYXRlIiwgIkxhdGVzdCIsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRydWUpLA0KICAgICAgICAgICAgICAgIG5ldyBTZWN0aW9uKCJhY3Rpb24iLCAiQWN0aW9uIE5vdmVsIiwgIlNlYXJjaCIsIGZhbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HNlLCBuZXcgRmlsdGVyKFsiYWN0aW9uIl0pKSwNCiAgICAgICAgICAgICAgICBuZXcgU2VjdGlvbigicm9tYW5jZSIsICJSb21hbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNlIE5vdmVsIiwgIlNlYXJjaCIsIGZhbHNlLCBuZXcgRmlsdGVyKFsicm9tYW5jZSJdKSksDQogICAgICAgICAgICAgICAgbmV3IMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24oIm9uZ29pbmciLCAiT25nb2luZyBOb3ZlbCIsICJTZWFyY2giLCBmYWxzZSwgbmV3IEZpbHRlcih1bmRlZmluZWQsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJlbmQiKSksDQogICAgICAgICAgICAgICAgbmV3IFNlY3Rpb24oImNvbXBsZXRlZCIsICJDb21wbGV0ZWQgTm92ZWwiLCAiU2VhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mNoIiwgZmFsc2UsIG5ldyBGaWx0ZXIodW5kZWZpbmVkLCAiZW5kIikpDQoNCiAgICAgICAgICAgIF0NCg0KICAgICAgICAgICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIHNlY3Rpb25zLmZpbHRlcih4ID0+ICFrZXlzIHx8IGtleXMuaW5jbHVkZXMoeC5uYW1lKSk7DQogICAgICAgIH0sDQoNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgdHJhbnNsYXRlU2VjdGlvbjogYXN5bmMgZnVuY3Rpb24gKHNlY3Rpb24sIHBhZ2UpIHsNCiAgICAgICAgICAgIGlmIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ChzZWN0aW9uLmlkZW50aWZpZXIgPT0gIkxhdGVzdCIpDQogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubGF0ZXN0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HBhZ2UpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnNlYXJjaChzZWN0aW9uLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mZpbHRlciB8fCB0aGlzLmRlZmF1bHRGaWx0ZXIoKSwgcGFnZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZGVmYXVsdEZpbHRlcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0jogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIGZpbHRlciA9IG5ldyBGaWx0ZXIoKTsNCiAgICAgICAgICAgIHJldHVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iBmaWx0ZXI7DQogICAgICAgIH0sDQoNCiAgICAgICAgc2VhcmNoOiBhc3luYyBmdW5jdGlvbiAoZmlsdGVyLCBwYWdlKSB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICB2YXIgdXJsID0gImh0dHBzOi8vemlubm92ZWwuY29tLz9zPSIgKyAoZmlsdGVyLnRpdGxlIHx8ICIiKSArICImcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0G9zdF90eXBlPXdwLW1hbmdhJntnZW5yZX0mb3A9JmF1dGhvcj0mYXJ0aXN0PSZyZWxlYXNlPSZhZHVsdD0me3N0YXR1c30iDQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBpZiAoZmlsdGVyLmdlbnJlcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UoIntnZW5yZX0iLCBmaWx0ZXIuZ2VucmVzLm1hcCh4ID0+ICJnZW5yZSU1QiU1RD0iICsgeCkuam9pbigiJiIpKTsNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIH0gZWxzZSB1cmwgPSB1cmwucmVwbGFjZSgiJntnZW5yZX0iLCAiIik7DQoNCiAgICAgICAgICAgIGlmIChmaWx0ZXIucMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029ydFR5cGUgJiYgZmlsdGVyLnNvcnRUeXBlLmxlbmd0aCA+IDEpDQogICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ntzdGF0dXN9IiwgInN0YXR1cyU1QiU1RD0iICsgZmlsdGVyLnNvcnRUeXBlKTsNCiAgICAgICAgICAgIGVsc2UgdXJsID0gdXJsLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nJlcGxhY2UoIiZ7c3RhdHVzfSIsICIiKTsNCg0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Wl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SBbXQ0KICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoJy5jLXRhYnMtaXRlbSAucm93JykuZm9yRWFjaCgoeCkgPT4gew0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIHJlc3VsdC5wdXNoKA0KICAgICAgICAgICAgICAgICAgICBuZXcgTGlnaHRJdGVtKHguZmluZCgiaW1nIikuYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XR0cigiZGF0YS1zcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCcucG9zdC10aXRsZSBhJykudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgICAgICAgICAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CcucG9zdC10aXRsZSBhJykuYXR0cigiaHJlZiIpLnVybCgpLCB0aGlzLm5hbWUNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0sDMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICAgICAgZ2V0Tm92ZWw6IGFzeW5jIGZ1bmN0aW9uIChub3ZlbFVybCkgew0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbGllbnQodGhpcy5pZCkuZ2V0SHRtbChub3ZlbFVybCkpOMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0w0KICAgICAgICAgICAgdmFyIGNoYXB0ZXJzID0gY29udGFpbmVyLmZpbmQoIi5saXN0aW5nLWNoYXB0ZXJzX3dyYXAgbGkgPiBhIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ikubWFwKHggPT4gbmV3IENoYXB0ZXIoeC50ZXh0KGZhbHNlKSwgeC5hdHRyKCJocmVmIikudXJsKCkpKS5yZXZlcnNlKCkNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIHZhciBub3ZlbFJldmlld3MgPSBuZXcgTm92ZWxSZXZpZXdzKCk7DQoNCiAgICAgICAgICAgIG5vdmVsUmV2aWV3cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0y5nZW5yZXMgPSBjb250YWluZXIuZmluZCgiLmdlbnJlcy1jb250ZW50IGEiKS5tYXAoeCA9PiB4LnRleHQoZmFsc2UpKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIG5vdmVsUmV2aWV3cy5hdXRob3IgPSBjb250YWluZXIuZmluZCgiLmF1dGhvci1jb250ZW50IGEiKS5tYXAoeCA9PMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iB4LnRleHQoZmFsc2UpKS5qb2luKCIsICIpOw0KICAgICAgICAgICAgbm92ZWxSZXZpZXdzLnV2b3RlcyA9IGNvbnRhaW5lci5zZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxlY3QoIi5wb3N0LXJhdGluZyAudG90YWxfdm90ZXMiKS50ZXh0KGZhbHNlKSArICIgLyA1IjsNCiAgICAgICAgICAgIG5vdmVsUMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV2aWV3cy5jb21wbGV0ZWQgPSBjb250YWluZXIuc2VsZWN0KCIucG9zdC1zdGF0dXMgLnBvc3QtY29udGVudF9pdGVtIC5zdW1tYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJ5LWNvbnRlbnQiKS50ZXh0KGZhbHNlKSA9PT0gIkNvbXBsZXRlZCIgPyAiU3RhdHVzOkNvbXBsZXRlZCIgOiAiU3RhdHVzOk9uZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU029pbmciOw0KDQogICAgICAgICAgICByZXR1cm4gbmV3IERldGFsaUl0ZW0oDQogICAgICAgICAgICAgICAgY29udGFpbmVyLnNlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GVjdCgnLnN1bW1hcnlfaW1hZ2UgaW1nJykuYXR0cigiZGF0YS1zcmMiKS51cmwoKSwNCiAgICAgICAgICAgICAgICBjb250YWluZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XIuc2VsZWN0KCcucG9zdC10aXRsZScpLnRleHQoZmFsc2UpLA0KICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zZWxlY3QoJy5kZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNjcmlwdGlvbi1zdW1tYXJ5JykuY2xlYW5Jbm5lckhUTUwoKSwNCiAgICAgICAgICAgICAgICBub3ZlbFVybCwNCiAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICBjaGFwdGVycywNCiAgICAgICAgICAgICAgICBub3ZlbFJldmlld3MsDQogICAgICAgICAgICAgICAgdGhpcy5uYW1lLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0A0KICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwNCiAgICAgICAgICAgICk7DQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2hhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HRlcjogYXN5bmMgZnVuY3Rpb24gKHVybCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xlYW5lci5jbGVhbkNoYXB0ZXIodMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Ghpcy5wYXJzZXIuanEoYXdhaXQgdGhpcy5jbGVhbmVyLmdldENsaWVudCh0aGlzLmlkKS5nZXRIdG1sKHVybCkpLnNlbGVjdCgnLMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nJlYWRpbmctY29udGVudCcpLCB0aGlzLm5hbWUpOw0KICAgICAgICB9LA0KDQogICAgICAgIGxhdGVzdDogYXN5bmMgZnVuY3RpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU024gKHBhZ2UpIHsNCiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmxhdGVzdFVybC5yZXBsYWNlKCd7cH0nLCBwYWdlLnRvU3RyaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W5nKCkpOw0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMucGFyc2VyLmpxKGF3YWl0IHRoaXMuY2xlYW5lci5nZXRDbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GllbnQodGhpcy5pZCkuZ2V0SHRtbCh1cmwpKTsNCiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgICAgIGNvbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nRhaW5lci5maW5kKCcucGFnZS1jb250ZW50LWxpc3RpbmcgLnBhZ2UtaXRlbS1kZXRhaWwnKS5mb3JFYWNoKCh4KSA9PiB7DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgaWYgKHguc2VsZWN0KCdpbWcnKS5hdHRyKCJzcmMiKS5oYXNWYWx1ZSgpKQ0KICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICByZXN1bHQucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMaWdodEl0ZW0oeC5maW5kKCJpbWciKS5hdHRyKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CJkYXRhLXNyYyIpLnVybCgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2VsZWN0KCcucG9zdC10aXRsZSBhJykudMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GV4dChmYWxzZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0C5zZWxlY3QoJy5wb3N0LXRpdGxlIGEnKS5hdHRyKCJocmVmIikudXJsKCksIHRoaXMubmFtZQ0KICAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgKSk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgIH0NCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0g0KICAgIHJldHVybiBuZXcgUGFyc2VyKCk7DQp9&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCkgPT4gew0KICAgIGZ1bmN0aW9uIFBsdWdpbigpIHsNCiAgICAgICAgdGhpcy50eXBlID0gIi0tcGx1Z2luLS0iOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB0aGlzLm5hbWUgPSAiUGFnZXIiOw0KICAgICAgICB0aGlzLmNsaWVudCA9IHt9Ow0KICAgIH0NCg0KICAgIFBsdWdpbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5wcm90b3R5cGUgPSB7DQogICAgICAgIHJlbmRlckNvdW50ZXJDYWxsczogYXN5bmMgZnVuY3Rpb24gKHVybCwgc2VsZWN0b3IsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Gh0bWxPbmx5KSB7DQogICAgICAgICAgICB2YXIgbWF4UGFnZSA9IHNlbGVjdG9yKGF3YWl0ICghaHRtbE9ubHkgPyBIdHRwQ2xpZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0W50LmdldEh0bWwodXJsLnJlcGxhY2UoIntwYWdlfSIsIDEpKSA6IEh0dHBDbGllbnQuR2V0VGV4dCh1cmwucmVwbGFjZSgie3BhZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02V9IiwgMSkpKSk7DQogICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0D0gbWF4UGFnZTsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIHV1cmwgPSB1cmwucmVwbGFjZSgie3BhZ2V9IiwgaS50b1N0cMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mluZygpKTsNCiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCFodG1sT25seSA/IEh0dHBDbGllbnQuZ2V0SHRtbCh1dXJsKMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0SA6IEh0dHBDbGllbnQuR2V0VGV4dCh1dXJsKSk7DQogICAgICAgICAgICAgICAgYXdhaXQgSHR0cENsaWVudC53YWl0KDIwMCk7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4geyBwcm9taXNlcyB9Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mV0dXJuIG5ldyBQbHVnaW4oKTsNCn0=&KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FNlY3Rpb24sIENoYXB0ZXIsIEh0dHBDbGllbnQsIERldGFsaUl0ZW0sIExpZ2h0SXRlbSwgUGFyc2VyU2VhcmNoU2V0dGluZ3MsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0EZpbHRlciwgbGFiZWxWYWx1ZSwgRGV0YWxpSXRlbVR5cGUsIE5vdmVsUmV2aWV3cywgY2xpZW50LCBJbWFnZUhhbmRsZXIsIHBhcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0nNlSHRtbCkgPT4gew0KICAgIGZ1bmN0aW9uIFBsdWdpbigpIHsNCiAgICAgICAgdGhpcy50eXBlID0gIi0tcGx1Z2luLS0iOw0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICB0aGlzLm5hbWUgPSAiQ2xlYW5lciI7DQogICAgICAgIHRoaXMuY2xpZW50ID0ge307DQogICAgfQ0KDQogICAgUGx1ZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02luLnByb3RvdHlwZSA9IHsNCiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uKHBhcnNlclVSSSwgdXJsLCBzZWxlY3RvciwgYXR0cil7DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QogICAgICAgICAgICByZXR1cm4gbmV3IEltYWdlSGFuZGxlcihwYXJzZXJVUkksIHVybCwgc2VsZWN0b3IsIGF0dHIpOw0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICB9LA0KDQogICAgICAgIGdldE5vdmVsSWQ6KHBhcnNlck5hbWUsIG1ldGhvZCwgYXJncywgcHJvcGVydHkpPT4gew0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgcmV0dXJuIHtwYXJzZXJOYW1lLCBtZXRob2QsIGFyZ3MsIHByb3BlcnR5fQ0KICAgICAgICB9LA0KDQogICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0GNsZWFuQ2hhcHRlcjogZnVuY3Rpb24gKHNlbGVjdG9yLCBuYW1lKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIHZhciBjaGFycyA9IFsNCiAgICAgICAgICAgICAgICAgICAgIklmIHlvdSBmaW5kIGFueSBlcnJvcnMgKCBicm9rZW4gbGluaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU03MsIG5vbi1zdGFuZGFyZCBjb250ZW50LCBldGMuLiApLCBQbGVhc2UgbGV0IHVzIGtub3cgIHJlcG9ydCBjaGFwdGVyID4gc28gdMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU02UgY2FuIGZpeCBpdCBhcyBzb29uIGFzIHBvc3NpYmxlLiIsDQogICAgICAgICAgICAgICAgICAgICJJZiB5b3UgZmluZCBhbnkgZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XJyb3JzICggYnJva2VuIGxpbmtzLCBub24tc3RhbmRhcmQgY29udGVudCwgZXRjLi4gKSwgUGxlYXNlIGxldCB1cyBrbm93IDwgcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0mVwb3J0IGNoYXB0ZXIgPiBzbyB3ZSBjYW4gZml4IGl0IGFzIHNvb24gYXMgcG9zc2libGUuIiwNCiAgICAgICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIlByZXYgQ2hhcHRlciIsDQogICAgICAgICAgICAgICAgICAgICJOZXh0IENoYXB0ZXIiDQogICAgICAgICAgICAgICAgXQ0KIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXNUb1JlbW92ZSA9IFsiaW5wdXQiLCAic2NyaXB0IiwgInN0eWxlIl07DQoNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICBzd2l0Y2ggKG5hbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiTGlnaHROb3ZlbFB1YiI6DQogIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzVG9SZW1vdmUucHVzaCgiLmNoYXB0ZXItY29udGVudCA+cFtjbGFzc106bm90KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0FtjbGFzcz0nJ10pIik7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiQMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WxsTm92ZWwiOg0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlc1RvUmVtb3ZlLnB1c2goIi5hZC1jb250YWluZXIiKTsNCMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBzZWxlY3RvcMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0i5yZW1vdmUoY2xhc3Nlc1RvUmVtb3ZlLmpvaW4oIiwiKSkub3V0ZXJIVE1MKCkucmVwbGFjZSgvKD89JikoLio/KSg7KS9nLCAiIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0ik7DQogICAgICAgICAgICAgICAgY29uc3QgckNoYXJzID0gY2hhcnMubWFwKHggPT4gSHR0cENsaWVudC5lc2NhcGVSZWdleCh4KMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0Sk7DQogICAgICAgICAgICAgICAgaWYgKG5hbWUpDQogICAgICAgICAgICAgICAgICAgIHJDaGFycy5wdXNoKEh0dHBDbGllbnQuZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XNjYXBlUmVnZXgobmFtZSkpOw0KDQogICAgICAgICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSAiKCIgKyByQ2hhcnMuam9pbigifMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CIpICsgIikiOw0KICAgICAgICAgICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24sICJnbWkiKTsNCiAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICByZXR1cm4gaHRtbC5yZXBsYWNlKHJlZ2V4cCwgIiIpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0HsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ2xlYW5pbmdDaGFwdGVyIEVycm9yIiwgZXJyb3IpOw0KICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgIHJldHVybiBzZWxlY3Rvci5jbGVhbklubmVySFRNTCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgIGdldENsaWVudDogZnVuY3Rpb24gKHBhcnNlcklkKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHBhcnNlcklkKSB7DQogICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgY2FzZSAiMS5ub3ZlbGZ1bGwiOg0KICAgICAgICAgICAgICAgIGNhc2UgIjEuYm94bm92ZWwiOg0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGNhc2UgIjEubm92ZWxoYWxsIjoNCiAgICAgICAgICAgICAgICBjYXNlICIxLmNvbXJhZGVtYW8iOg0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgIGNhc2UgIjEubGlnaHRub3ZlbHB1YiI6DQogICAgICAgICAgICAgICAgY2FzZSAiMS5tYW5nYW5lbG8iOg0KICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgIGNhc2UgIjEubXRsbm92ZWwiOg0KICAgICAgICAgICAgICAgIGNhc2UgImluZm9ybWF0aW9uIjoNCiAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICBjYXNlICIxLm5vdmVsb25saW5lZnVsbCI6DQogICAgICAgICAgICAgICAgY2FzZSAiMS5yZWFkbGlnaHRub3ZlbMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CI6DQogICAgICAgICAgICAgICAgY2FzZSAiMS5yZWFkbm92ZWxmdWxsIjoNCiAgICAgICAgICAgICAgICBjYXNlICIxLnJveWFscMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0m9hZCI6DQogICAgICAgICAgICAgICAgY2FzZSAiMS5zY3JpYmJsZWh1YiI6DQogICAgICAgICAgICAgICAgY2FzZSAiMS50YXByZMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0WFkIjoNCiAgICAgICAgICAgICAgICBjYXNlICIxLndubXRsb3JnIjoNCiAgICAgICAgICAgICAgICBjYXNlICIxLnppbm5vdmVsIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0joNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50W3BhcnNlcklkXSAhPSB1bmRlZmluZWQpDQogICAgICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbGllbnRbcGFyc2VySWRdOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHRoaMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XMuY2xpZW50W3BhcnNlcklkXSA9IG5ldyBjbGllbnQoWyJzY3JpcHQiLCAic3R5bGUiXSkpDQogICAgICAgICAgICAgICAgZGVmYMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0XVsdDoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50WyJkZWZhdWx0Il0gIT0gdW5kZWZpbmVkKQ0KICAgICAgIMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0CAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50WyJkZWZhdWx0Il07DQogICAgICAgICAgICAgICAgICAgIHJldHVybMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0iAodGhpcy5jbGllbnRbImRlZmF1bHQiXSA9IG5ldyBjbGllbnQoKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DMDAyMjU0NjU3ODk3NjU0NjU0YXNkNjU0NjU0OTg3OWE4ZDU2NDZhN3NkOTg3YTU0ZDU0MTMyMTM0YTk2c2Q4Nzk4YXM3ZDYzNTQxNjU0YXNkNjU0QoNCiAgICByZXR1cm4gbmV3IFBsdWdpbigpOw0KfTs=